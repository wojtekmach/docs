<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.4">
    <meta name="project" content="req v0.3.0-dev">

    <title>Req.Request â€” req v0.3.0-dev</title>
    <link rel="stylesheet" href="dist/elixir-b6f1ed5df9b1d42a7309.css" />

    <script src="dist/sidebar_items-1545ad75ce.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-bd1cb213813bf4825aa2.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

    <div class="sidebar-projectDetails">
      <a href="readme.html" class="sidebar-projectName" translate="no">
req
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.3.0-dev
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">Pages</a></li>

        <li><a id="modules-list-link" href="#full-list">Modules</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span translate="no">Req.Request</span> 
  <small class="app-vsn" translate="no">(req v0.3.0-dev)</small>

</h1>


  <section id="moduledoc">
<p>The low-level API and the request struct.</p><p>Req is composed of three main pieces:</p><ul><li><p><a href="Req.html"><code class="inline">Req</code></a> - the high-level API</p></li><li><p><a href="Req.Request.html#content"><code class="inline">Req.Request</code></a> - the low-level API and the request struct (you're here!)</p></li><li><p><a href="Req.Steps.html"><code class="inline">Req.Steps</code></a> - the collection of built-in steps</p></li></ul><p>The low-level API and the request struct is the foundation of Req's extensibility. Virtually all
of the functionality is broken down into individual pieces - steps. Req works by running the
request struct through these steps. You can easily reuse or rearrange built-in steps or write new
ones.</p><h2 id="module-the-low-level-api" class="section-heading">
  <a href="#module-the-low-level-api" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">the-low-level-api</p>
  </a>
  The Low-level API
</h2>
<p>Most Req users would use it like this:</p><pre><code class="makeup elixir" translate="no"><span class="nc">Req</span><span class="o">.</span><span class="n">get!</span><span class="p" data-group-id="4081001987-1">(</span><span class="s">&quot;https://api.github.com/repos/elixir-lang/elixir&quot;</span><span class="p" data-group-id="4081001987-1">)</span><span class="o">.</span><span class="n">body</span><span class="p" data-group-id="4081001987-2">[</span><span class="s">&quot;description&quot;</span><span class="p" data-group-id="4081001987-2">]</span><span class="w">
</span><span class="c1">#=&gt; &quot;Elixir is a dynamic, functional language designed for building scalable and maintainable applications&quot;</span></code></pre><p>Here is the equivalent using the low-level API:</p><pre><code class="makeup elixir" translate="no"><span class="n">url</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;https://api.github.com/repos/elixir-lang/elixir&quot;</span><span class="w">

</span><span class="n">req</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="p" data-group-id="3211558598-1">%</span><span class="nc" data-group-id="3211558598-1">Req.Request</span><span class="p" data-group-id="3211558598-1">{</span><span class="ss">method</span><span class="p">:</span><span class="w"> </span><span class="ss">:get</span><span class="p">,</span><span class="w"> </span><span class="ss">url</span><span class="p">:</span><span class="w"> </span><span class="n">url</span><span class="p" data-group-id="3211558598-1">}</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">append_request_steps</span><span class="p" data-group-id="3211558598-2">(</span><span class="w">
    </span><span class="ss">put_user_agent</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Req.Steps</span><span class="o">.</span><span class="n">put_user_agent</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="c1"># ...</span><span class="w">
  </span><span class="p" data-group-id="3211558598-2">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">append_response_steps</span><span class="p" data-group-id="3211558598-3">(</span><span class="w">
    </span><span class="c1"># ...</span><span class="w">
    </span><span class="ss">decompress_body</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Req.Steps</span><span class="o">.</span><span class="n">decompress_body</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="ss">decode_body</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Req.Steps</span><span class="o">.</span><span class="n">decode_body</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="c1"># ...</span><span class="w">
  </span><span class="p" data-group-id="3211558598-3">)</span><span class="w">
  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">append_error_steps</span><span class="p" data-group-id="3211558598-4">(</span><span class="w">
    </span><span class="ss">retry</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Req.Steps</span><span class="o">.</span><span class="n">retry</span><span class="o">/</span><span class="mi">1</span><span class="p">,</span><span class="w">
    </span><span class="c1"># ...</span><span class="w">
  </span><span class="p" data-group-id="3211558598-4">)</span><span class="w">

</span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">run!</span><span class="p" data-group-id="3211558598-5">(</span><span class="n">req</span><span class="p" data-group-id="3211558598-5">)</span><span class="o">.</span><span class="n">body</span><span class="p" data-group-id="3211558598-6">[</span><span class="s">&quot;description&quot;</span><span class="p" data-group-id="3211558598-6">]</span><span class="w">
</span><span class="c1">#=&gt; &quot;Elixir is a dynamic, functional language designed for building scalable and maintainable applications&quot;</span></code></pre><p>By putting the request pipeline yourself you have precise control of exactly what is running and in what order.</p><h2 id="module-the-request-struct" class="section-heading">
  <a href="#module-the-request-struct" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">the-request-struct</p>
  </a>
  The Request Struct
</h2>
<ul><li><p><code class="inline">:method</code> - the HTTP request method</p></li><li><p><code class="inline">:url</code> - the HTTP request URL</p></li><li><p><code class="inline">:headers</code> - the HTTP request headers</p></li><li><p><code class="inline">:body</code> - the HTTP request body</p></li><li><p><code class="inline">:request_steps</code> - the list of request steps</p></li><li><p><code class="inline">:response_steps</code> - the list of response steps</p></li><li><p><code class="inline">:error_steps</code> - the list of error steps</p></li><li><p><code class="inline">:private</code> - a map reserved for libraries and frameworks to use.
Prefix the keys with the name of your project to avoid any future
conflicts. Only accepts <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types"><code class="inline">atom/0</code></a> keys.</p></li><li><p><code class="inline">:halted</code> - whether the request pipeline is halted. See <a href="#halt/1"><code class="inline">halt/1</code></a></p></li><li><p><code class="inline">:adapter</code> - a request step that makes the actual HTTP request. Defaults to
<a href="Req.Steps.html#run_finch/1"><code class="inline">Req.Steps.run_finch/1</code></a>. See <a href="#module-adapter">&quot;Adapter&quot;</a> section below for more information.</p></li></ul><h2 id="module-steps" class="section-heading">
  <a href="#module-steps" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">steps</p>
  </a>
  Steps
</h2>
<p>Req has three types of steps: request, response, and error.</p><p>Request steps are used to refine the data that will be sent to the server.</p><p>After making the actual HTTP request, we'll either get a HTTP response or an error.
The request, along with the response or error, will go through response or
error steps, respectively.</p><p>Nothing is actually executed until we run the pipeline with <a href="#run/1"><code class="inline">Req.Request.run/1</code></a>.</p><h3 id="module-request-steps" class="section-heading">
  <a href="#module-request-steps" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">request-steps</p>
  </a>
  Request steps
</h3>
<p>A request step is a function that accepts a <code class="inline">request</code> and returns one of the following:</p><ul><li><p>A <code class="inline">request</code></p></li><li><p>A <code class="inline">{request, response_or_error}</code> tuple. In that case no further request steps are executed
and the return value goes through response or error steps</p></li></ul><p>Examples:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">put_default_headers</span><span class="p" data-group-id="0587014831-1">(</span><span class="n">request</span><span class="p" data-group-id="0587014831-1">)</span><span class="w"> </span><span class="k" data-group-id="0587014831-2">do</span><span class="w">
  </span><span class="n">update_in</span><span class="p" data-group-id="0587014831-3">(</span><span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="0587014831-4">[</span><span class="p" data-group-id="0587014831-5">{</span><span class="s">&quot;user-agent&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;req&quot;</span><span class="p" data-group-id="0587014831-5">}</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ni">&amp;1</span><span class="p" data-group-id="0587014831-4">]</span><span class="p" data-group-id="0587014831-3">)</span><span class="w">
</span><span class="k" data-group-id="0587014831-2">end</span><span class="w">

</span><span class="kd">def</span><span class="w"> </span><span class="nf">read_from_cache</span><span class="p" data-group-id="0587014831-6">(</span><span class="n">request</span><span class="p" data-group-id="0587014831-6">)</span><span class="w"> </span><span class="k" data-group-id="0587014831-7">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">ResponseCache</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="0587014831-8">(</span><span class="n">request</span><span class="p" data-group-id="0587014831-8">)</span><span class="w"> </span><span class="k" data-group-id="0587014831-9">do</span><span class="w">
    </span><span class="p" data-group-id="0587014831-10">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="0587014831-10">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0587014831-11">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="0587014831-11">}</span><span class="w">
    </span><span class="ss">:error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">request</span><span class="w">
  </span><span class="k" data-group-id="0587014831-9">end</span><span class="w">
</span><span class="k" data-group-id="0587014831-7">end</span></code></pre><h3 id="module-response-and-error-steps" class="section-heading">
  <a href="#module-response-and-error-steps" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">response-and-error-steps</p>
  </a>
  Response and error steps
</h3>
<p>A response step is a function that accepts a <code class="inline">{request, response}</code> tuple and returns one of the
following:</p><ul><li><p>A <code class="inline">{request, response}</code> tuple</p></li><li><p>A <code class="inline">{request, exception}</code> tuple. In that case, no further response steps are executed but the
exception goes through error steps</p></li></ul><p>Similarly, an error step is a function that accepts a <code class="inline">{request, exception}</code> tuple and returns one
of the following:</p><ul><li><p>A <code class="inline">{request, exception}</code> tuple</p></li><li><p>A <code class="inline">{request, response}</code> tuple. In that case, no further error steps are executed but the
response goes through response steps</p></li></ul><p>Examples:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">decode</span><span class="p" data-group-id="3097031600-1">(</span><span class="p" data-group-id="3097031600-2">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="3097031600-2">}</span><span class="p" data-group-id="3097031600-1">)</span><span class="w"> </span><span class="k" data-group-id="3097031600-3">do</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">keyfind</span><span class="p" data-group-id="3097031600-4">(</span><span class="n">response</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;content-type&quot;</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="3097031600-4">)</span><span class="w"> </span><span class="k" data-group-id="3097031600-5">do</span><span class="w">
    </span><span class="p" data-group-id="3097031600-6">{</span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;application/json&quot;</span><span class="w"> </span><span class="o">&lt;&gt;</span><span class="w"> </span><span class="bp">_</span><span class="p" data-group-id="3097031600-6">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="3097031600-7">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">update_in</span><span class="p" data-group-id="3097031600-8">(</span><span class="n">response</span><span class="o">.</span><span class="n">body</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Jason</span><span class="o">.</span><span class="n">decode!</span><span class="o">/</span><span class="mi">1</span><span class="p" data-group-id="3097031600-8">)</span><span class="p" data-group-id="3097031600-7">}</span><span class="w">

    </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="3097031600-9">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="3097031600-9">}</span><span class="w">
  </span><span class="k" data-group-id="3097031600-5">end</span><span class="w">
</span><span class="k" data-group-id="3097031600-3">end</span><span class="w">

</span><span class="kd">def</span><span class="w"> </span><span class="nf">log_error</span><span class="p" data-group-id="3097031600-10">(</span><span class="p" data-group-id="3097031600-11">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">exception</span><span class="p" data-group-id="3097031600-11">}</span><span class="p" data-group-id="3097031600-10">)</span><span class="w"> </span><span class="k" data-group-id="3097031600-12">do</span><span class="w">
  </span><span class="nc">Logger</span><span class="o">.</span><span class="n">error</span><span class="p" data-group-id="3097031600-13">(</span><span class="p" data-group-id="3097031600-14">[</span><span class="s">&quot;</span><span class="si" data-group-id="3097031600-15">#{</span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="si" data-group-id="3097031600-15">}</span><span class="s"> </span><span class="si" data-group-id="3097031600-16">#{</span><span class="n">request</span><span class="o">.</span><span class="n">uri</span><span class="si" data-group-id="3097031600-16">}</span><span class="s">: &quot;</span><span class="p">,</span><span class="w"> </span><span class="nc">Exception</span><span class="o">.</span><span class="n">message</span><span class="p" data-group-id="3097031600-17">(</span><span class="n">exception</span><span class="p" data-group-id="3097031600-17">)</span><span class="p" data-group-id="3097031600-14">]</span><span class="p" data-group-id="3097031600-13">)</span><span class="w">
  </span><span class="p" data-group-id="3097031600-18">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">exception</span><span class="p" data-group-id="3097031600-18">}</span><span class="w">
</span><span class="k" data-group-id="3097031600-12">end</span></code></pre><h3 id="module-halting" class="section-heading">
  <a href="#module-halting" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">halting</p>
  </a>
  Halting
</h3>
<p>Any step can call <a href="#halt/1"><code class="inline">Req.Request.halt/1</code></a> to halt the pipeline. This will prevent any further steps
from being invoked.</p><p>Examples:</p><pre><code class="makeup elixir" translate="no"><span class="kd">def</span><span class="w"> </span><span class="nf">circuit_breaker</span><span class="p" data-group-id="9439780053-1">(</span><span class="n">request</span><span class="p" data-group-id="9439780053-1">)</span><span class="w"> </span><span class="k" data-group-id="9439780053-2">do</span><span class="w">
  </span><span class="k">if</span><span class="w"> </span><span class="nc">CircuitBreaker</span><span class="o">.</span><span class="n">open?</span><span class="p" data-group-id="9439780053-3">(</span><span class="p" data-group-id="9439780053-3">)</span><span class="w"> </span><span class="k" data-group-id="9439780053-4">do</span><span class="w">
    </span><span class="p" data-group-id="9439780053-5">{</span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">halt</span><span class="p" data-group-id="9439780053-6">(</span><span class="n">request</span><span class="p" data-group-id="9439780053-6">)</span><span class="p">,</span><span class="w"> </span><span class="nc">RuntimeError</span><span class="o">.</span><span class="n">exception</span><span class="p" data-group-id="9439780053-7">(</span><span class="s">&quot;circuit breaker is open&quot;</span><span class="p" data-group-id="9439780053-7">)</span><span class="p" data-group-id="9439780053-5">}</span><span class="w">
  </span><span class="k" data-group-id="9439780053-4">else</span><span class="w">
    </span><span class="n">request</span><span class="w">
  </span><span class="k" data-group-id="9439780053-4">end</span><span class="w">
</span><span class="k" data-group-id="9439780053-2">end</span></code></pre><h2 id="module-adapter" class="section-heading">
  <a href="#module-adapter" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">adapter</p>
  </a>
  Adapter
</h2>
<p>As noted in the <a href="#module-request-steps">&quot;Request steps&quot;</a> section, a request step besides returning the request,
might also return <code class="inline">{request, response}</code> or <code class="inline">{request, exception}</code>, thus invoking either response or error steps next.
This is exactly how Req makes the underlying HTTP call, by invoking a request step that follows this contract.</p><p>The default adapter is using Finch via the <a href="Req.Steps.html#run_finch/1"><code class="inline">Req.Steps.run_finch/1</code></a> step.</p><p>Here is a mock adapter that always returns a successful response:</p><pre><code class="makeup elixir" translate="no"><span class="n">adapter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="7763314268-1">fn</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7763314268-2">%</span><span class="nc" data-group-id="7763314268-2">Req.Response</span><span class="p" data-group-id="7763314268-2">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;it works!&quot;</span><span class="p" data-group-id="7763314268-2">}</span><span class="w">
  </span><span class="p" data-group-id="7763314268-3">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="7763314268-3">}</span><span class="w">
</span><span class="k" data-group-id="7763314268-1">end</span><span class="w">

</span><span class="nc">Req</span><span class="o">.</span><span class="n">request!</span><span class="p" data-group-id="7763314268-4">(</span><span class="ss">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;http://example&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">adapter</span><span class="p">:</span><span class="w"> </span><span class="n">adapter</span><span class="p" data-group-id="7763314268-4">)</span><span class="o">.</span><span class="n">body</span><span class="w">
</span><span class="c1">#=&gt; &quot;it works!&quot;</span></code></pre><p>And here is a naive Hackney-based implementation:</p><pre><code class="makeup elixir" translate="no"><span class="n">hackney</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="4866912442-1">fn</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="k">case</span><span class="w"> </span><span class="nc">:hackney</span><span class="o">.</span><span class="n">request</span><span class="p" data-group-id="4866912442-2">(</span><span class="w">
         </span><span class="n">request</span><span class="o">.</span><span class="n">method</span><span class="p">,</span><span class="w">
         </span><span class="nc">URI</span><span class="o">.</span><span class="n">to_string</span><span class="p" data-group-id="4866912442-3">(</span><span class="n">request</span><span class="o">.</span><span class="n">url</span><span class="p" data-group-id="4866912442-3">)</span><span class="p">,</span><span class="w">
         </span><span class="n">request</span><span class="o">.</span><span class="n">headers</span><span class="p">,</span><span class="w">
         </span><span class="n">request</span><span class="o">.</span><span class="n">body</span><span class="p">,</span><span class="w">
         </span><span class="p" data-group-id="4866912442-4">[</span><span class="ss">:with_body</span><span class="p" data-group-id="4866912442-4">]</span><span class="w">
       </span><span class="p" data-group-id="4866912442-2">)</span><span class="w"> </span><span class="k" data-group-id="4866912442-5">do</span><span class="w">
    </span><span class="p" data-group-id="4866912442-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="n">body</span><span class="p" data-group-id="4866912442-6">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="n">headers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p" data-group-id="4866912442-7">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="4866912442-7">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4866912442-8">{</span><span class="nc">String</span><span class="o">.</span><span class="n">downcase</span><span class="p" data-group-id="4866912442-9">(</span><span class="n">name</span><span class="p" data-group-id="4866912442-9">)</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="4866912442-8">}</span><span class="w">
      </span><span class="n">response</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4866912442-10">%</span><span class="nc" data-group-id="4866912442-10">Req.Response</span><span class="p" data-group-id="4866912442-10">{</span><span class="ss">status</span><span class="p">:</span><span class="w"> </span><span class="n">status</span><span class="p">,</span><span class="w"> </span><span class="ss">headers</span><span class="p">:</span><span class="w"> </span><span class="n">headers</span><span class="p">,</span><span class="w"> </span><span class="ss">body</span><span class="p">:</span><span class="w"> </span><span class="n">body</span><span class="p" data-group-id="4866912442-10">}</span><span class="w">
      </span><span class="p" data-group-id="4866912442-11">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="4866912442-11">}</span><span class="w">

    </span><span class="p" data-group-id="4866912442-12">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">reason</span><span class="p" data-group-id="4866912442-12">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="p" data-group-id="4866912442-13">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="nc">RuntimeError</span><span class="o">.</span><span class="n">exception</span><span class="p" data-group-id="4866912442-14">(</span><span class="n">inspect</span><span class="p" data-group-id="4866912442-15">(</span><span class="n">reason</span><span class="p" data-group-id="4866912442-15">)</span><span class="p" data-group-id="4866912442-14">)</span><span class="p" data-group-id="4866912442-13">}</span><span class="w">
  </span><span class="k" data-group-id="4866912442-5">end</span><span class="w">
</span><span class="k" data-group-id="4866912442-1">end</span><span class="w">

</span><span class="nc">Req</span><span class="o">.</span><span class="n">get!</span><span class="p" data-group-id="4866912442-16">(</span><span class="s">&quot;https://api.github.com/repos/elixir-lang/elixir&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">adapter</span><span class="p">:</span><span class="w"> </span><span class="n">hackney</span><span class="p" data-group-id="4866912442-16">)</span><span class="o">.</span><span class="n">body</span><span class="p" data-group-id="4866912442-17">[</span><span class="s">&quot;description&quot;</span><span class="p" data-group-id="4866912442-17">]</span><span class="w">
</span><span class="s">&quot;Elixir is a dynamic, functional language designed for building scalable and maintainable applications&quot;</span></code></pre>
  </section>


  <section id="summary" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#summary">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
      Summary
    </h1>

  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#t:t/0" translate="no">t()</a>

        </div>

      </div>

  </div>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#append_error_steps/2" translate="no">append_error_steps(request, steps)</a>

        </div>

          <div class="summary-synopsis"><p>Appends error steps.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#append_request_steps/2" translate="no">append_request_steps(request, steps)</a>

        </div>

          <div class="summary-synopsis"><p>Appends request steps.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#append_response_steps/2" translate="no">append_response_steps(request, steps)</a>

        </div>

          <div class="summary-synopsis"><p>Appends response steps.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#get_private/3" translate="no">get_private(request, key, default \\ nil)</a>

        </div>

          <div class="summary-synopsis"><p>Gets the value for a specific private <code class="inline">key</code>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#halt/1" translate="no">halt(request)</a>

        </div>

          <div class="summary-synopsis"><p>Halts the request pipeline preventing any further steps from executing.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#prepend_error_steps/2" translate="no">prepend_error_steps(request, steps)</a>

        </div>

          <div class="summary-synopsis"><p>Prepends error steps.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#prepend_request_steps/2" translate="no">prepend_request_steps(request, steps)</a>

        </div>

          <div class="summary-synopsis"><p>Prepends request steps.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#prepend_response_steps/2" translate="no">prepend_response_steps(request, steps)</a>

        </div>

          <div class="summary-synopsis"><p>Prepends response steps.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#put_private/3" translate="no">put_private(request, key, value)</a>

        </div>

          <div class="summary-synopsis"><p>Assigns a private <code class="inline">key</code> to <code class="inline">value</code>.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#register_option/2" translate="no">register_option(request, option)</a>

        </div>

          <div class="summary-synopsis"><p>Registers an option to be used by a custom step.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#run!/1" translate="no">run!(request)</a>

        </div>

          <div class="summary-synopsis"><p>Runs a request pipeline and returns a response or raises an error.</p></div>

      </div>

      <div class="summary-row">
        <div class="summary-signature">
          <a href="#run/1" translate="no">run(request)</a>

        </div>

          <div class="summary-synopsis"><p>Runs a request pipeline.</p></div>

      </div>

  </div>

  </section>


  <section id="types" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#types">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Types
    </h1>
    <div class="types-list">
<section class="detail" id="t:t/0">

  <div class="detail-header">
    <a href="#t:t/0" class="detail-link" title="Link to this type">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature" translate="no">t()</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L202" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <div class="specs">

          <pre translate="no"><span class="attribute">@type</span> t() :: %Req.Request{
  adapter: request_step(),
  body: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">iodata</a>(),
  error_steps: [{name :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), error_step()}],
  halted: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
  headers: [{<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">binary</a>()}],
  method: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(),
  options: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(),
  private: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">map</a>(),
  registered_options: <a href="https://hexdocs.pm/elixir/MapSet.html#t:t/0">MapSet.t</a>(),
  request_steps: [{name :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), request_step()}],
  response_steps: [{name :: <a href="https://hexdocs.pm/elixir/typespecs.html#basic-types">atom</a>(), response_step()}],
  url: <a href="https://hexdocs.pm/elixir/URI.html#t:t/0">URI.t</a>()
}</pre>

      </div>


  </section>
</section>

    </div>
  </section>

  <section id="functions" class="details-list">
    <h1 class="section-heading">
      <a class="hover-link" href="#functions">
        <i class="ri-link-m" aria-hidden="true"></i>
        <span class="sr-only">Link to this section</span>
      </a>
Functions
    </h1>
    <div class="functions-list">
<section class="detail" id="append_error_steps/2">

  <div class="detail-header">
    <a href="#append_error_steps/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">append_error_steps(request, steps)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L331" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Appends error steps.</p><h2 id="append_error_steps/2-examples" class="section-heading">
  <a href="#append_error_steps/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">append_error_steps</span><span class="p" data-group-id="7717570852-1">(</span><span class="n">request</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">noop</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="7717570852-2">fn</span><span class="w"> </span><span class="p" data-group-id="7717570852-3">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">exception</span><span class="p" data-group-id="7717570852-3">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="7717570852-4">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">exception</span><span class="p" data-group-id="7717570852-4">}</span><span class="w"> </span><span class="k" data-group-id="7717570852-2">end</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">inspect</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">IO</span><span class="o">.</span><span class="n">inspect</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="7717570852-1">)</span></code></pre>
  </section>
</section>
<section class="detail" id="append_request_steps/2">

  <div class="detail-header">
    <a href="#append_request_steps/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">append_request_steps(request, steps)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L275" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Appends request steps.</p><h2 id="append_request_steps/2-examples" class="section-heading">
  <a href="#append_request_steps/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">append_request_steps</span><span class="p" data-group-id="9305239893-1">(</span><span class="n">request</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">noop</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="9305239893-2">fn</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="k" data-group-id="9305239893-2">end</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">inspect</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">IO</span><span class="o">.</span><span class="n">inspect</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="9305239893-1">)</span></code></pre>
  </section>
</section>
<section class="detail" id="append_response_steps/2">

  <div class="detail-header">
    <a href="#append_response_steps/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">append_response_steps(request, steps)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L303" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Appends response steps.</p><h2 id="append_response_steps/2-examples" class="section-heading">
  <a href="#append_response_steps/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">append_request_steps</span><span class="p" data-group-id="0640425471-1">(</span><span class="n">request</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">noop</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="0640425471-2">fn</span><span class="w"> </span><span class="p" data-group-id="0640425471-3">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="0640425471-3">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="0640425471-4">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="0640425471-4">}</span><span class="w"> </span><span class="k" data-group-id="0640425471-2">end</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">inspect</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">IO</span><span class="o">.</span><span class="n">inspect</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="0640425471-1">)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_private/3">

    <span id="get_private/2"></span>

  <div class="detail-header">
    <a href="#get_private/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">get_private(request, key, default \\ nil)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L236" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets the value for a specific private <code class="inline">key</code>.</p>
  </section>
</section>
<section class="detail" id="halt/1">

  <div class="detail-header">
    <a href="#halt/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">halt(request)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L250" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Halts the request pipeline preventing any further steps from executing.</p>
  </section>
</section>
<section class="detail" id="prepend_error_steps/2">

  <div class="detail-header">
    <a href="#prepend_error_steps/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">prepend_error_steps(request, steps)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L345" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Prepends error steps.</p><h2 id="prepend_error_steps/2-examples" class="section-heading">
  <a href="#prepend_error_steps/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">prepend_error_steps</span><span class="p" data-group-id="5916212402-1">(</span><span class="n">request</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">noop</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="5916212402-2">fn</span><span class="w"> </span><span class="p" data-group-id="5916212402-3">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">exception</span><span class="p" data-group-id="5916212402-3">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="5916212402-4">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">exception</span><span class="p" data-group-id="5916212402-4">}</span><span class="w"> </span><span class="k" data-group-id="5916212402-2">end</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">inspect</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">IO</span><span class="o">.</span><span class="n">inspect</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="5916212402-1">)</span></code></pre>
  </section>
</section>
<section class="detail" id="prepend_request_steps/2">

  <div class="detail-header">
    <a href="#prepend_request_steps/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">prepend_request_steps(request, steps)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L289" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Prepends request steps.</p><h2 id="prepend_request_steps/2-examples" class="section-heading">
  <a href="#prepend_request_steps/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">prepend_request_steps</span><span class="p" data-group-id="3470562727-1">(</span><span class="n">request</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">noop</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="3470562727-2">fn</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">request</span><span class="w"> </span><span class="k" data-group-id="3470562727-2">end</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">inspect</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">IO</span><span class="o">.</span><span class="n">inspect</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="3470562727-1">)</span></code></pre>
  </section>
</section>
<section class="detail" id="prepend_response_steps/2">

  <div class="detail-header">
    <a href="#prepend_response_steps/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">prepend_response_steps(request, steps)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L317" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Prepends response steps.</p><h2 id="prepend_response_steps/2-examples" class="section-heading">
  <a href="#prepend_response_steps/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">prepend_request_steps</span><span class="p" data-group-id="6348285450-1">(</span><span class="n">request</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">noop</span><span class="p">:</span><span class="w"> </span><span class="k" data-group-id="6348285450-2">fn</span><span class="w"> </span><span class="p" data-group-id="6348285450-3">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="6348285450-3">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="p" data-group-id="6348285450-4">{</span><span class="n">request</span><span class="p">,</span><span class="w"> </span><span class="n">response</span><span class="p" data-group-id="6348285450-4">}</span><span class="w"> </span><span class="k" data-group-id="6348285450-2">end</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">inspect</span><span class="p">:</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">IO</span><span class="o">.</span><span class="n">inspect</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="6348285450-1">)</span></code></pre>
  </section>
</section>
<section class="detail" id="put_private/3">

  <div class="detail-header">
    <a href="#put_private/3" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">put_private(request, key, value)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L243" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Assigns a private <code class="inline">key</code> to <code class="inline">value</code>.</p>
  </section>
</section>
<section class="detail" id="register_option/2">

  <div class="detail-header">
    <a href="#register_option/2" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">register_option(request, option)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L387" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Registers an option to be used by a custom step.</p><p>Req ensures that all used options were previously registered which helps
finding accidentally mistyped option names. If you're adding custom steps
that are accepting options, call this function to register them.</p><h2 id="register_option/2-examples" class="section-heading">
  <a href="#register_option/2-examples" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">examples</p>
  </a>
  Examples
</h2>
<pre><code class="makeup elixir" translate="no"><span class="gp unselectable">iex&gt; </span><span class="nc">Req</span><span class="o">.</span><span class="n">request!</span><span class="p" data-group-id="1462323756-1">(</span><span class="ss">urll</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://httpbin.org&quot;</span><span class="p" data-group-id="1462323756-1">)</span><span class="w">
</span><span class="gt">** (ArgumentError) unknown option :urll. Did you mean :url?</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Req</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="1462323756-2">(</span><span class="ss">bas_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://httpbin.org&quot;</span><span class="p" data-group-id="1462323756-2">)</span><span class="w">
</span><span class="gt">** (ArgumentError) unknown option :bas_url. Did you mean :base_url?</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">req</span><span class="w"> </span><span class="o">=</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Req</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="1462323756-3">(</span><span class="ss">base_url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://httpbin.org&quot;</span><span class="p" data-group-id="1462323756-3">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="o">|&gt;</span><span class="w"> </span><span class="nc">Req.Request</span><span class="o">.</span><span class="n">register_option</span><span class="p" data-group-id="1462323756-4">(</span><span class="ss">:foo</span><span class="p" data-group-id="1462323756-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Req</span><span class="o">.</span><span class="n">get!</span><span class="p" data-group-id="1462323756-5">(</span><span class="n">req</span><span class="p">,</span><span class="w"> </span><span class="ss">url</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;/status/201&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="ss">:bar</span><span class="p" data-group-id="1462323756-5">)</span><span class="o">.</span><span class="n">status</span><span class="w">
</span><span class="mi">201</span></code></pre>
  </section>
</section>
<section class="detail" id="run!/1">

  <div class="detail-header">
    <a href="#run!/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">run!(request)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L439" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Runs a request pipeline and returns a response or raises an error.</p><p>See <a href="#run/1"><code class="inline">run/1</code></a> for more information.</p>
  </section>
</section>
<section class="detail" id="run/1">

  <div class="detail-header">
    <a href="#run/1" class="detail-link" title="Link to this function">
      <i class="ri-link-m" aria-hidden="true"></i>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature" translate="no">run(request)</h1>

      <a href="https://github.com/wojtekmach/req/blob/v0.3.0-dev/lib/req/request.ex#L400" class="view-source" rel="help" title="View Source">
       <i class="ri-code-s-slash-line" aria-hidden="true"></i>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Runs a request pipeline.</p><p>Returns <code class="inline">{:ok, response}</code> or <code class="inline">{:error, exception}</code>.</p>
  </section>
</section>

    </div>
  </section>

      <footer class="footer">

          <p>
            On Hex.pm:

            <span class="line">
              <a href="https://hex.pm/packages/req/0.3.0-dev" class="line footer-hex-package">Package</a>
              <a href="https://preview.hex.pm/preview/req/0.3.0-dev" class="line">Preview</a>

                <a href="https://preview.hex.pm/preview/req/0.3.0-dev/show/lib/req/request.ex">(current file)</a>

            </span>

            <button class="line footer-button display-quick-switch">
              Search
            </button>
          </p>

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.4) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
