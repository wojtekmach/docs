<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.24.3-dev">
    <meta name="project" content="telemetry v0.5.0-dev">

    <title>telemetry â€” telemetry v0.5.0-dev</title>
    <link rel="stylesheet" href="dist/erlang-342d9843ccb2e80b8d3f.css" />

    <script src="dist/sidebar_items-45a1f96398.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-f27ff079945e43879c46.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="readme.html" class="sidebar-projectName">
telemetry
      </a>
      <strong class="sidebar-projectVersion">
        v0.5.0-dev
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
telemetry <small class="app-vsn">(telemetry v0.5.0-dev)</small>

          <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L9" title="View Source" class="view-source" rel="help">
            <span class="icon-code" aria-hidden="true"></span>
            <span class="sr-only">View Source</span>
          </a>

      </h1>


        <section id="moduledoc">
<p><code>telemetry</code> allows you to invoke certain functions whenever a particular event is emitted.</p>For more information see the documentation for <a href="#attach/4" rel="https://erlang.org/doc/link/seemfa"><code>attach/4</code></a>, <a href="#attach_many/4" rel="https://erlang.org/doc/link/seemfa"><code>attach_many/4</code></a> and <a href="#execute/2" rel="https://erlang.org/doc/link/seemfa"><code>execute/2</code></a>.
        </section>


        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>

  <div class="summary-types summary">
    <h2>
      <a href="#types">Types</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:event_measurements/0">event_measurements/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:event_metadata/0">event_metadata/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:event_name/0">event_name/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:event_prefix/0">event_prefix/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:event_value/0">event_value/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:handler/0">handler/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:handler_config/0">handler_config/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:handler_function/0">handler_function/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:handler_id/0">handler_id/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:span_function/0">span_function/0</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#t:span_result/0">span_result/0</a>

  </div>

</div>

  </div>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#assert_event_name/1">assert_event_name(List)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#assert_event_names/1">assert_event_names(List)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#assert_event_prefix/1">assert_event_prefix(List)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#attach/4">attach(HandlerId, EventName, Function, Config)</a>

  </div>

    <div class="summary-synopsis"><p>Attaches the handler to the event.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#attach_many/4">attach_many(HandlerId, EventNames, Function, Config)</a>

  </div>

    <div class="summary-synopsis"><p>Attaches the handler to many events.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#detach/1">detach(HandlerId)</a>

  </div>

    <div class="summary-synopsis"><p>Removes the existing handler.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#execute/2">execute(EventName, Measurements)</a>

  </div>

    <div class="summary-synopsis"><p>Equivalent to <a href="#execute/3" rel="https://erlang.org/doc/link/seemfa">execute(EventName, Measurements, #{})</a>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#execute/3">execute(EventName, Measurements, Metadata)</a>

  </div>

    <div class="summary-synopsis"><p>Emits the event, invoking handlers attached to it.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_handlers/1">list_handlers(EventPrefix)</a>

  </div>

    <div class="summary-synopsis"><p>Returns all handlers attached to events with given prefix.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#merge_ctx/2">merge_ctx(Metadata, Ctx)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#span/3">span(EventPrefix, StartMetadata, SpanFunction)</a>

  </div>

    <div class="summary-synopsis"><p>Emit start, and stop/exception events, invoking the handlers attached to each.</p></div>

</div>

  </div>

        </section>


        <section id="types" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#types">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Types
          </h1>
          <div class="types-list">
<section class="detail" id="t:event_measurements/0">

  <div class="detail-header">
    <a href="#t:event_measurements/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">event_measurements/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L23" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>event_measurements() :: map().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:event_metadata/0">

  <div class="detail-header">
    <a href="#t:event_metadata/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">event_metadata/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L24" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>event_metadata() :: map().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:event_name/0">

  <div class="detail-header">
    <a href="#t:event_name/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">event_name/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L22" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>event_name() :: [atom(), ...].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:event_prefix/0">

  <div class="detail-header">
    <a href="#t:event_prefix/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">event_prefix/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L26" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>event_prefix() :: [atom()].</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:event_value/0">

  <div class="detail-header">
    <a href="#t:event_value/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">event_value/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L25" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>event_value() :: number().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:handler/0">

  <div class="detail-header">
    <a href="#t:handler/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">handler/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L31" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>handler() ::
    #{id := handler_id(),
      event_name := event_name(),
      function := handler_function(),
      config := handler_config()}.</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:handler_config/0">

  <div class="detail-header">
    <a href="#t:handler_config/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">handler_config/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L27" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>handler_config() :: term().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:handler_function/0">

  <div class="detail-header">
    <a href="#t:handler_function/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">handler_function/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L28" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>handler_function() ::
    fun((event_name(), event_measurements(), event_metadata(), handler_config()) -> any()).</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:handler_id/0">

  <div class="detail-header">
    <a href="#t:handler_id/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">handler_id/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L21" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>handler_id() :: term().</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:span_function/0">

  <div class="detail-header">
    <a href="#t:span_function/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">span_function/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L30" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>span_function() :: fun(() -> {span_result(), event_metadata()}).</pre>

      </div>


  </section>
</section>
<section class="detail" id="t:span_result/0">

  <div class="detail-header">
    <a href="#t:span_result/0" class="detail-link" title="Link to this type">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this type</span>
    </a>
    <h1 class="signature">span_result/0</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L29" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>span_result() :: term().</pre>

      </div>


  </section>
</section>

          </div>
        </section>

        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions
          </h1>
          <div class="functions-list">
<section class="detail" id="assert_event_name/1">

  <div class="detail-header">
    <a href="#assert_event_name/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">assert_event_name(List)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L335" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>assert_event_name(term()) -> ok.</pre>

      </div>


  </section>
</section>
<section class="detail" id="assert_event_names/1">

  <div class="detail-header">
    <a href="#assert_event_names/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">assert_event_names(List)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L318" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>assert_event_names(term()) -> [ok].</pre>

      </div>


  </section>
</section>
<section class="detail" id="assert_event_prefix/1">

  <div class="detail-header">
    <a href="#assert_event_prefix/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">assert_event_prefix(List)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L324" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>assert_event_prefix(term()) -> ok.</pre>

      </div>


  </section>
</section>
<section class="detail" id="attach/4">

  <div class="detail-header">
    <a href="#attach/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">attach(HandlerId, EventName, Function, Config)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L69" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>attach(HandlerId, EventName, Function, Config) -> ok | {error, already_exists}
          when
              HandlerId :: handler_id(),
              EventName :: event_name(),
              Function :: handler_function(),
              Config :: handler_config().</pre>

      </div>

<p>Attaches the handler to the event.</p><p><code>handler_id</code> must be unique, if another handler with the same ID already exists the <code>{error, already_exists}</code> tuple is returned.</p><p>See <a href="#execute/3" rel="https://erlang.org/doc/link/seemfa"><code>execute/3</code></a> to learn how the handlers are invoked.</p><p><b>Note:</b> due to how anonymous functions are implemented in the Erlang VM, it is best to use function captures (i.e. <code>fun mod:fun/4</code> in Erlang or <code>&amp;Mod.fun/4</code> in Elixir) as event handlers to achieve maximum performance. In other words, avoid using literal anonymous functions (<code>fun(...) -&gt; ... end</code> or <code>fn ... -&gt; ... end</code>) or local function captures (<code>fun handle_event/4</code> or <code>&amp;handle_event/4</code> ) as event handlers.</p>All the handlers are executed by the process dispatching event. If the function fails (raises, exits or throws) then the handler is removed. Note that you should not rely on the order in which handlers are invoked.
  </section>
</section>
<section class="detail" id="attach_many/4">

  <div class="detail-header">
    <a href="#attach_many/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">attach_many(HandlerId, EventNames, Function, Config)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L92" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>attach_many(HandlerId, [EventName], Function, Config) -> ok | {error, already_exists}
               when
                   HandlerId :: handler_id(),
                   EventName :: event_name(),
                   Function :: handler_function(),
                   Config :: handler_config().</pre>

      </div>

<p>Attaches the handler to many events.</p><p>The handler will be invoked whenever any of the events in the <code>event_names</code> list is emitted. Note that failure of the handler on any of these invocations will detach it from all the events in <code>event_name</code> (the same applies to manual detaching using <a href="#detach/1" rel="https://erlang.org/doc/link/seemfa"><code>detach/1</code></a>).</p><p><b>Note:</b> due to how anonymous functions are implemented in the Erlang VM, it is best to use function captures (i.e. <code>fun mod:fun/4</code> in Erlang or <code>&amp;Mod.fun/4</code> in Elixir) as event handlers to achieve maximum performance. In other words, avoid using literal anonymous functions (<code>fun(...) -&gt; ... end</code> or <code>fn ... -&gt; ... end</code>) or local function captures (<code>fun handle_event/4</code> or <code>&amp;handle_event/4</code> ) as event handlers.</p>All the handlers are executed by the process dispatching event. If the function fails (raises, exits or throws) then the handler is removed. Note that you should not rely on the order in which handlers are invoked.
  </section>
</section>
<section class="detail" id="detach/1">

  <div class="detail-header">
    <a href="#detach/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">detach(HandlerId)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L100" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>detach(handler_id()) -> ok | {error, not_found}.</pre>

      </div>

<p>Removes the existing handler.</p>If the handler with given ID doesn't exist, <code>{error, not_found}</code> is returned.
  </section>
</section>
<section class="detail" id="execute/2">

  <div class="detail-header">
    <a href="#execute/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">execute(EventName, Measurements)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L296" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>execute(EventName, Measurements) -> ok
           when EventName :: event_name(), Measurements :: event_measurements() | event_value().</pre>

      </div>

<p>Equivalent to <a href="#execute/3" rel="https://erlang.org/doc/link/seemfa">execute(EventName, Measurements, #{})</a>.</p>
  </section>
</section>
<section class="detail" id="execute/3">

  <div class="detail-header">
    <a href="#execute/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">execute(EventName, Measurements, Metadata)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L124" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>execute(EventName, Measurements, Metadata) -> ok
           when
               EventName :: event_name(),
               Measurements :: event_measurements() | event_value(),
               Metadata :: event_metadata().</pre>

      </div>

<p>Emits the event, invoking handlers attached to it.</p>When the event is emitted, the handler function provided to <a href="#attach/4" rel="https://erlang.org/doc/link/seemfa"><code>attach/4</code></a> is called with four arguments:<ul><li>the event name</li><li>the map of measurements</li><li>the map of event metadata</li><li>the handler configuration given to <a href="#attach/4" rel="https://erlang.org/doc/link/seemfa"><code>attach/4</code></a></li></ul><h4>Best practices and conventions:</h4><p>While you are able to emit messages of any <code>event_name</code> structure, it is recommended that you follow the the guidelines laid out in <a href="#span-3"><code>span/3</code></a> if you are capturing start/stop events.</p>
  </section>
</section>
<section class="detail" id="list_handlers/1">

  <div class="detail-header">
    <a href="#list_handlers/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_handlers(EventPrefix)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L305" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>list_handlers(event_prefix()) -> [handler()].</pre>

      </div>

<p>Returns all handlers attached to events with given prefix.</p>Handlers attached to many events at once using <a href="#attach_many-4"><code>attach_many/4</code></a> will be listed once for each event they're attached to. Note that you can list all handlers by feeding this function an empty list.
  </section>
</section>
<section class="detail" id="merge_ctx/2">

  <div class="detail-header">
    <a href="#merge_ctx/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">merge_ctx(Metadata, Ctx)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L346" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>merge_ctx(event_metadata(), any()) -> event_metadata().</pre>

      </div>


  </section>
</section>
<section class="detail" id="span/3">

  <div class="detail-header">
    <a href="#span/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">span(EventPrefix, StartMetadata, SpanFunction)</h1>

      <a href="https://github.com/beam-telemetry/telemetry/blob/v0.5.0-dev/src/telemetry.erl#L273" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>span(event_prefix(), event_metadata(), span_function()) -> span_result().</pre>

      </div>

<p>Emit start, and stop/exception events, invoking the handlers attached to each.</p>When this function is called, 2 events will be emitted via <a href="#execute-3"><code>execute/3</code></a>. Those events will be one of the following pairs:<ul><li><code>EventPrefix ++ [start]</code> and <code>EventPrefix ++ [stop]</code></li><li><code>EventPrefix ++ [start]</code> and <code>EventPrefix ++ [exception]</code></li></ul><p>However, note that in case the current processes crashes due to an exit signal of another process, then none or only part of those events would be emitted. Below is a breakdown of the measurements and metadata associated with each individual event.</p><p>When providing <code>StartMetadata</code> and <code>StopMetadata</code>, these values will be sent independently to <code>start</code> and <code>stop</code> events. If an exception occurs, exception metadata will be merged onto the <code>StartMetadata</code>. In general, <code>StopMetadata</code> should only provide values that are additive to <code>StartMetadata</code> so that handlers, such as those used for metrics, can rely entirely on the <code>stop</code> event.</p><p>A default span context is added to event metadata under the <code>telemetry_span_context</code> key if none is provided by the user in the <code>StartMetadata</code>. This context is useful for tracing libraries to identify unique executions of span events within a process to match start, stop, and exception events. Users should ensure this value is unique within the context of a process at a minimum if overriding this key and that the same value is provided to both <code>StartMetadata</code> and <code>StopMetadata</code>.</p><p>For <code>telemetry</code> events denoting the <strong>start</strong> of a larger event, the following data is provided:</p><p><ul><li>Event:<pre>  EventPrefix ++ [start]</pre></li><li>Measurements:<pre>  #{
    % The current system time in native units from
    % calling: erlang:system_time()
    system_time =&gt; integer()
  }</pre></li><li>Metadata:<pre>  #{
    telemetry_span_context =&gt; term(),
    % User defined metadata
    ...
  }</pre></li></ul></p>For <code>telemetry</code> events denoting the <strong>stop</strong> of a larger event, the following data is provided:<p><ul><li>Event:<pre>  EventPrefix ++ [stop]</pre></li><li>Measurements:<pre>  #{
    % The current monotonic time minus the start monotonic time in native units
    % by calling: erlang:monotonic_time() - start_monotonic_time
    duration =&gt; integer()
  }</pre></li><li>Metadata:<pre>  #{
    % An optional error field if the stop event is the result of an error
    % but not necessarily an exception. Additional user defined metadata can
    % also be added here.
    error =&gt; term(),
    telemetry_span_context =&gt; term(),
    ...
  }</pre></li></ul></p>For <code>telemetry</code> events denoting an <strong>exception</strong> of a larger event, the following data is provided:<p><ul><li>Event:<pre>  EventPrefix ++ [exception]</pre></li><li>Measurements:<pre>  #{
    % The current monotonic time minus the start monotonic time in native units
    % derived by calling: erlang:monotonic_time() - start_monotonic_time
    duration =&gt; integer()
  }</pre></li><li>Metadata:<pre>  #{
    kind =&gt; throw | error | exit,
    reason =&gt; term(),
    stacktrace =&gt; list(),
    telemetry_span_context =&gt; term(),
    % User defined metadata from the start event
     ...
  }</pre></li></ul></p>
  </section>
</section>

          </div>
        </section>

      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.24.3-dev) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
