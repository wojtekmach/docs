<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.24.1">
    <meta name="project" content="Elixir v1.12.0-rc.0">

    <title>Kernel.SpecialForms â€” Elixir v1.12.0-rc.0</title>
    <link rel="stylesheet" href="dist/elixir-a172fe91e725dcb259e2.css" />

      <link rel="canonical" href="https://hexdocs.pm/elixir/1.12/Kernel.SpecialForms.html" />

    <script src="dist/sidebar_items-1a6c36a221.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-f27ff079945e43879c46.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="https://elixir-lang.org/docs.html" class="sidebar-projectName">
Elixir
      </a>
      <strong class="sidebar-projectVersion">
        v1.12.0-rc.0
      </strong>
    </div>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
Kernel.SpecialForms <small class="app-vsn">(Elixir v1.12.0-rc.0)</small>

          <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1" title="View Source" class="view-source" rel="help">
            <span class="icon-code" aria-hidden="true"></span>
            <span class="sr-only">View Source</span>
          </a>

      </h1>


        <section id="moduledoc">
<p>Special forms are the basic building blocks of Elixir, and therefore
cannot be overridden by the developer.</p><p>The <a href="Kernel.SpecialForms.html#content"><code class="inline">Kernel.SpecialForms</code></a> module consists solely of macros that can be
invoked anywhere in Elixir code without the use of the
<code class="inline">Kernel.SpecialForms.</code> prefix. This is possible because they all have
been automatically imported, in the same fashion as the functions and
macros from the <a href="Kernel.html"><code class="inline">Kernel</code></a> module.</p><p>These building blocks are defined in this module. Some of these special forms are lexical (such as
<a href="#alias/2"><code class="inline">alias/2</code></a> and <a href="#case/2"><code class="inline">case/2</code></a>). The macros <a href="#%7B%7D/1"><code class="inline">{}/1</code></a> and <a href="#%3C%3C%3E%3E/1"><code class="inline">&lt;&lt;&gt;&gt;/1</code></a> are also special
forms used to define tuple and binary data structures respectively.</p><p>This module also documents macros that return information about Elixir's
compilation environment, such as (<a href="#__ENV__/0"><code class="inline">__ENV__/0</code></a>, <a href="#__MODULE__/0"><code class="inline">__MODULE__/0</code></a>, <a href="#__DIR__/0"><code class="inline">__DIR__/0</code></a>,
<a href="#__STACKTRACE__/0"><code class="inline">__STACKTRACE__/0</code></a>, and <a href="#__CALLER__/0"><code class="inline">__CALLER__/0</code></a>).</p><p>Additionally, it documents two special forms, <a href="#__block__/1"><code class="inline">__block__/1</code></a> and
<a href="#__aliases__/1"><code class="inline">__aliases__/1</code></a>, which are not intended to be called directly by the
developer but they appear in quoted contents since they are essential
in Elixir's constructs.</p>
        </section>


        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#%25/2">%struct{}</a>

  </div>

    <div class="summary-synopsis"><p>Matches on or builds a struct.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#%25%7B%7D/1">%{}</a>

  </div>

    <div class="summary-synopsis"><p>Creates a map.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#&/1">&amp;(expr)</a>

  </div>

    <div class="summary-synopsis"><p>Capture operator. Captures or creates an anonymous function.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#./2">left . right</a>

  </div>

    <div class="summary-synopsis"><p>Dot operator. Defines a remote call, a call to an anonymous function, or an alias.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#::/2">left :: right</a>

  </div>

    <div class="summary-synopsis"><p>Type operator. Used by types and bitstrings to specify types.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#%3C%3C%3E%3E/1">&lt;&lt;args&gt;&gt;</a>

  </div>

    <div class="summary-synopsis"><p>Defines a new bitstring.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#=/2">left = right</a>

  </div>

    <div class="summary-synopsis"><p>Match operator. Matches the value on the right against the pattern on the left.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#%5E/1">^var</a>

  </div>

    <div class="summary-synopsis"><p>Pin operator. Accesses an already bound variable in match clauses.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#__CALLER__/0">__CALLER__</a>

  </div>

    <div class="summary-synopsis"><p>Returns the current calling environment as a <a href="Macro.Env.html"><code class="inline">Macro.Env</code></a> struct.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#__DIR__/0">__DIR__</a>

  </div>

    <div class="summary-synopsis"><p>Returns the absolute path of the directory of the current file as a binary.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#__ENV__/0">__ENV__</a>

  </div>

    <div class="summary-synopsis"><p>Returns the current environment information as a <a href="Macro.Env.html"><code class="inline">Macro.Env</code></a> struct.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#__MODULE__/0">__MODULE__</a>

  </div>

    <div class="summary-synopsis"><p>Returns the current module name as an atom or <code class="inline">nil</code> otherwise.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#__STACKTRACE__/0">__STACKTRACE__</a>

  </div>

    <div class="summary-synopsis"><p>Returns the stacktrace for the currently handled exception.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#__aliases__/1">__aliases__(args)</a>

  </div>

    <div class="summary-synopsis"><p>Internal special form to hold aliases information.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#__block__/1">__block__(args)</a>

  </div>

    <div class="summary-synopsis"><p>Internal special form for block expressions.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#%7B%7D/1">{args}</a>

  </div>

    <div class="summary-synopsis"><p>Creates a tuple.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#alias/2">alias(module, opts)</a>

  </div>

    <div class="summary-synopsis"><p><a href="#alias/2"><code class="inline">alias/2</code></a> is used to set up aliases, often useful with modules' names.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#case/2">case(condition, clauses)</a>

  </div>

    <div class="summary-synopsis"><p>Matches the given expression against the given clauses.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#cond/1">cond(clauses)</a>

  </div>

    <div class="summary-synopsis"><p>Evaluates the expression corresponding to the first clause that
evaluates to a truthy value.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#fn/1">fn</a>

  </div>

    <div class="summary-synopsis"><p>Defines an anonymous function.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#for/1">for(args)</a>

  </div>

    <div class="summary-synopsis"><p>Comprehensions allow you to quickly build a data structure from
an enumerable or a bitstring.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#import/2">import(module, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Imports functions and macros from other modules.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#quote/2">quote(opts, block)</a>

  </div>

    <div class="summary-synopsis"><p>Gets the representation of any expression.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#receive/1">receive(args)</a>

  </div>

    <div class="summary-synopsis"><p>Checks if there is a message matching the given clauses
in the current process mailbox.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#require/2">require(module, opts)</a>

  </div>

    <div class="summary-synopsis"><p>Requires a module in order to use its macros.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#super/1">super(args)</a>

  </div>

    <div class="summary-synopsis"><p>Calls the overridden function when overriding it with <a href="Kernel.html#defoverridable/1"><code class="inline">Kernel.defoverridable/1</code></a>.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#try/1">try(args)</a>

  </div>

    <div class="summary-synopsis"><p>Evaluates the given expressions and handles any error, exit,
or throw that may have happened.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#unquote/1">unquote(expr)</a>

  </div>

    <div class="summary-synopsis"><p>Unquotes the given expression inside a quoted expression.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#unquote_splicing/1">unquote_splicing(expr)</a>

  </div>

    <div class="summary-synopsis"><p>Unquotes the given list expanding its arguments.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#with/1">with(args)</a>

  </div>

    <div class="summary-synopsis"><p>Used to combine matching clauses.</p></div>

</div>

  </div>

        </section>


        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions
          </h1>
          <div class="functions-list">
<section class="detail" id="%25/2">

  <div class="detail-header">
    <a href="#%25/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">%struct{}</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L154" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Matches on or builds a struct.</p><p>A struct is a tagged map that allows developers to provide
default values for keys, tags to be used in polymorphic
dispatches and compile time assertions.</p><p>Structs are usually defined with the <a href="Kernel.html#defstruct/1"><code class="inline">Kernel.defstruct/1</code></a> macro:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">User</span><span class="w"> </span><span class="k" data-group-id="8859595664-1">do</span><span class="w">
  </span><span class="kd">defstruct</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;john&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="w">
</span><span class="k" data-group-id="8859595664-1">end</span></code></pre><p>Now a struct can be created as follows:</p><pre><code class="makeup elixir"><span class="p" data-group-id="0007396678-1">%</span><span class="nc" data-group-id="0007396678-1">User</span><span class="p" data-group-id="0007396678-1">{</span><span class="p" data-group-id="0007396678-1">}</span></code></pre><p>Underneath a struct is just a map with a <code class="inline">:__struct__</code> key
pointing to the <code class="inline">User</code> module:</p><pre><code class="makeup elixir"><span class="p" data-group-id="4131150027-1">%</span><span class="nc" data-group-id="4131150027-1">User</span><span class="p" data-group-id="4131150027-1">{</span><span class="p" data-group-id="4131150027-1">}</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p" data-group-id="4131150027-2">%{</span><span class="ss">__struct__</span><span class="p">:</span><span class="w"> </span><span class="nc">User</span><span class="p">,</span><span class="w"> </span><span class="ss">name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;john&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">27</span><span class="p" data-group-id="4131150027-2">}</span></code></pre><p>The struct fields can be given when building the struct:</p><pre><code class="makeup elixir"><span class="p" data-group-id="1536300913-1">%</span><span class="nc" data-group-id="1536300913-1">User</span><span class="p" data-group-id="1536300913-1">{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">31</span><span class="p" data-group-id="1536300913-1">}</span><span class="w">
</span><span class="c1">#=&gt; %{__struct__: User, name: &quot;john&quot;, age: 31}</span></code></pre><p>Or also on pattern matching to extract values out:</p><pre><code class="makeup elixir"><span class="p" data-group-id="4635937306-1">%</span><span class="nc" data-group-id="4635937306-1">User</span><span class="p" data-group-id="4635937306-1">{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="n">age</span><span class="p" data-group-id="4635937306-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span></code></pre><p>An update operation specific for structs is also available:</p><pre><code class="makeup elixir"><span class="p" data-group-id="4776261517-1">%</span><span class="nc" data-group-id="4776261517-1">User</span><span class="p" data-group-id="4776261517-1">{</span><span class="n">user</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="mi">28</span><span class="p" data-group-id="4776261517-1">}</span></code></pre><p>The advantage of structs is that they validate that the given
keys are part of the defined struct. The example below will fail
because there is no key <code class="inline">:full_name</code> in the <code class="inline">User</code> struct:</p><pre><code class="makeup elixir"><span class="p" data-group-id="8486341760-1">%</span><span class="nc" data-group-id="8486341760-1">User</span><span class="p" data-group-id="8486341760-1">{</span><span class="ss">full_name</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;john doe&quot;</span><span class="p" data-group-id="8486341760-1">}</span></code></pre><p>The syntax above will guarantee the given keys are valid at
compilation time and it will guarantee at runtime the given
argument is a struct, failing with <a href="BadStructError.html"><code class="inline">BadStructError</code></a> otherwise.</p><p>Although structs are maps, by default structs do not implement
any of the protocols implemented for maps. Check
<a href="Kernel.html#defprotocol/2"><code class="inline">Kernel.defprotocol/2</code></a> for more information on how structs
can be used with protocols for polymorphic dispatch. Also
see <a href="Kernel.html#struct/2"><code class="inline">Kernel.struct/2</code></a> and <a href="Kernel.html#struct!/2"><code class="inline">Kernel.struct!/2</code></a> for examples on
how to create and update structs dynamically.</p><h2 id="%25/2-pattern-matching-on-struct-names" class="section-heading">
  <a href="#%25/2-pattern-matching-on-struct-names" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Pattern matching on struct names
</h2>
<p>Besides allowing pattern matching on struct fields, such as:</p><pre><code class="makeup elixir"><span class="p" data-group-id="7109159473-1">%</span><span class="nc" data-group-id="7109159473-1">User</span><span class="p" data-group-id="7109159473-1">{</span><span class="ss">age</span><span class="p">:</span><span class="w"> </span><span class="n">age</span><span class="p" data-group-id="7109159473-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span></code></pre><p>Structs also allow pattern matching on the struct name:</p><pre><code class="makeup elixir"><span class="p">%</span><span class="n">struct_name</span><span class="p" data-group-id="5475827477-1">{</span><span class="p" data-group-id="5475827477-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span><span class="w">
</span><span class="n">struct_name</span><span class="w"> </span><span class="c1">#=&gt; User</span></code></pre><p>You can also assign the struct name to <code class="inline">_</code> when you want to
check if something is a struct but you are not interested in
its name:</p><pre><code class="makeup elixir"><span class="p">%</span><span class="bp">_</span><span class="p" data-group-id="3864602022-1">{</span><span class="p" data-group-id="3864602022-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">user</span></code></pre>
  </section>
</section>
<section class="detail" id="%25%7B%7D/1">

  <div class="detail-header">
    <a href="#%25%7B%7D/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">%{}</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L82" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Creates a map.</p><p>See the <a href="Map.html"><code class="inline">Map</code></a> module for more information about maps, their syntax, and ways to
access and manipulate them.</p><h2 id="%25%7B%7D/1-ast-representation" class="section-heading">
  <a href="#%25%7B%7D/1-ast-representation" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  AST representation
</h2>
<p>Regardless of whether <code class="inline">=&gt;</code> or the keyword syntax is used, key-value pairs in
maps are always represented internally as a list of two-element tuples for
simplicity:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="8286721494-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="8286721494-2">%{</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="ss">:b</span><span class="p">,</span><span class="w"> </span><span class="ss">c</span><span class="p">:</span><span class="w"> </span><span class="ss">:d</span><span class="p" data-group-id="8286721494-2">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="8286721494-1">end</span><span class="w">
</span><span class="p" data-group-id="8286721494-3">{</span><span class="ss">:%{}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8286721494-4">[</span><span class="p" data-group-id="8286721494-4">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8286721494-5">[</span><span class="p" data-group-id="8286721494-6">{</span><span class="s">&quot;a&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">:b</span><span class="p" data-group-id="8286721494-6">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8286721494-7">{</span><span class="ss">:c</span><span class="p">,</span><span class="w"> </span><span class="ss">:d</span><span class="p" data-group-id="8286721494-7">}</span><span class="p" data-group-id="8286721494-5">]</span><span class="p" data-group-id="8286721494-3">}</span></code></pre>
  </section>
</section>
<section class="detail" id="&/1">

  <div class="detail-header">
    <a href="#&/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">&amp;(expr)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1685" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Capture operator. Captures or creates an anonymous function.</p><h2 id="&/1-capture" class="section-heading">
  <a href="#&/1-capture" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Capture
</h2>
<p>The capture operator is most commonly used to capture a
function with given name and arity from a module:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">fun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Kernel</span><span class="o">.</span><span class="n">is_atom</span><span class="o">/</span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">fun</span><span class="o">.</span><span class="p" data-group-id="9816323344-1">(</span><span class="ss">:atom</span><span class="p" data-group-id="9816323344-1">)</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">fun</span><span class="o">.</span><span class="p" data-group-id="9816323344-2">(</span><span class="s">&quot;string&quot;</span><span class="p" data-group-id="9816323344-2">)</span><span class="w">
</span><span class="no">false</span></code></pre><p>In the example above, we captured <a href="Kernel.html#is_atom/1"><code class="inline">Kernel.is_atom/1</code></a> as an
anonymous function and then invoked it.</p><p>The capture operator can also be used to capture local functions,
including private ones, and imported functions by omitting the
module name:</p><pre><code class="makeup elixir"><span class="o">&amp;</span><span class="n">local_function</span><span class="o">/</span><span class="mi">1</span></code></pre><p>See also <a href="Function.html#capture/3"><code class="inline">Function.capture/3</code></a>.</p><h2 id="&/1-anonymous-functions" class="section-heading">
  <a href="#&/1-anonymous-functions" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Anonymous functions
</h2>
<p>The capture operator can also be used to partially apply
functions, where <code class="inline">&amp;1</code>, <code class="inline">&amp;2</code> and so on can be used as value
placeholders. For example:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">double</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="4579457045-1">(</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="4579457045-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">double</span><span class="o">.</span><span class="p" data-group-id="4579457045-2">(</span><span class="mi">2</span><span class="p" data-group-id="4579457045-2">)</span><span class="w">
</span><span class="mi">4</span></code></pre><p>In other words, <code class="inline">&amp;(&amp;1 * 2)</code> is equivalent to <code class="inline">fn x -&gt; x * 2 end</code>.</p><p>We can partially apply a remote function with placeholder:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">take_five</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="nc">Enum</span><span class="o">.</span><span class="n">take</span><span class="p" data-group-id="5884131264-1">(</span><span class="ni">&amp;1</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="5884131264-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">take_five</span><span class="o">.</span><span class="p" data-group-id="5884131264-2">(</span><span class="mi">1</span><span class="o">.</span><span class="o">.</span><span class="mi">10</span><span class="p" data-group-id="5884131264-2">)</span><span class="w">
</span><span class="p" data-group-id="5884131264-3">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="5884131264-3">]</span></code></pre><p>Another example while using an imported or local function:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">first_elem</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="n">elem</span><span class="p" data-group-id="9796511808-1">(</span><span class="ni">&amp;1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="9796511808-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">first_elem</span><span class="o">.</span><span class="p" data-group-id="9796511808-2">(</span><span class="p" data-group-id="9796511808-3">{</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="9796511808-3">}</span><span class="p" data-group-id="9796511808-2">)</span><span class="w">
</span><span class="mi">0</span></code></pre><p>The <code class="inline">&amp;</code> operator can be used with more complex expressions:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">fun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="3332073696-1">(</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ni">&amp;2</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="ni">&amp;3</span><span class="p" data-group-id="3332073696-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">fun</span><span class="o">.</span><span class="p" data-group-id="3332073696-2">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="3332073696-2">)</span><span class="w">
</span><span class="mi">6</span></code></pre><p>As well as with lists and tuples:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">fun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="1641235239-1">{</span><span class="ni">&amp;1</span><span class="p">,</span><span class="w"> </span><span class="ni">&amp;2</span><span class="p" data-group-id="1641235239-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">fun</span><span class="o">.</span><span class="p" data-group-id="1641235239-2">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1641235239-2">)</span><span class="w">
</span><span class="p" data-group-id="1641235239-3">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1641235239-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">fun</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">&amp;</span><span class="p" data-group-id="1641235239-4">[</span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="ni">&amp;2</span><span class="p" data-group-id="1641235239-4">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">fun</span><span class="o">.</span><span class="p" data-group-id="1641235239-5">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1641235239-6">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="1641235239-6">]</span><span class="p" data-group-id="1641235239-5">)</span><span class="w">
</span><span class="p" data-group-id="1641235239-7">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="1641235239-7">]</span></code></pre><p>The only restrictions when creating anonymous functions is that at
least one placeholder must be present, i.e. it must contain at least
<code class="inline">&amp;1</code>, and that block expressions are not supported:</p><pre><code class="makeup elixir"><span class="c1"># No placeholder, fails to compile.</span><span class="w">
</span><span class="o">&amp;</span><span class="p" data-group-id="1865715458-1">(</span><span class="ss">:foo</span><span class="p" data-group-id="1865715458-1">)</span><span class="w">

</span><span class="c1"># Block expression, fails to compile.</span><span class="w">
</span><span class="o">&amp;</span><span class="p" data-group-id="1865715458-2">(</span><span class="ni">&amp;1</span><span class="p">;</span><span class="w"> </span><span class="ni">&amp;2</span><span class="p" data-group-id="1865715458-2">)</span></code></pre>
  </section>
</section>
<section class="detail" id="./2">

  <div class="detail-header">
    <a href="#./2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">left . right</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L493" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Dot operator. Defines a remote call, a call to an anonymous function, or an alias.</p><p>The dot (<code class="inline">.</code>) in Elixir can be used for remote calls:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="nc">String</span><span class="o">.</span><span class="n">downcase</span><span class="p" data-group-id="9810289466-1">(</span><span class="s">&quot;FOO&quot;</span><span class="p" data-group-id="9810289466-1">)</span><span class="w">
</span><span class="s">&quot;foo&quot;</span></code></pre><p>In this example above, we have used <code class="inline">.</code> to invoke <code class="inline">downcase</code> in the
<a href="String.html"><code class="inline">String</code></a> module, passing <code class="inline">&quot;FOO&quot;</code> as argument.</p><p>The dot may be used to invoke anonymous functions too:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="6847938005-1">(</span><span class="k" data-group-id="6847938005-2">fn</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="k" data-group-id="6847938005-2">end</span><span class="p" data-group-id="6847938005-1">)</span><span class="o">.</span><span class="p" data-group-id="6847938005-3">(</span><span class="mi">7</span><span class="p" data-group-id="6847938005-3">)</span><span class="w">
</span><span class="mi">7</span></code></pre><p>in which case there is a function on the left hand side.</p><p>We can also use the dot for creating aliases:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="nc">Hello.World</span><span class="w">
</span><span class="nc">Hello.World</span></code></pre><p>This time, we have joined two aliases, defining the final alias
<code class="inline">Hello.World</code>.</p><h2 id="./2-syntax" class="section-heading">
  <a href="#./2-syntax" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Syntax
</h2>
<p>The right side of <code class="inline">.</code> may be a word starting with an uppercase letter, which represents
an alias, a word starting with lowercase or underscore, any valid language
operator or any name wrapped in single- or double-quotes. Those are all valid
examples:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="nc">Kernel.Sample</span><span class="w">
</span><span class="nc">Kernel.Sample</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Kernel</span><span class="o">.</span><span class="n">length</span><span class="p" data-group-id="1292901755-1">(</span><span class="p" data-group-id="1292901755-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="1292901755-2">]</span><span class="p" data-group-id="1292901755-1">)</span><span class="w">
</span><span class="mi">3</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Kernel</span><span class="o">.</span><span class="o">+</span><span class="p" data-group-id="1292901755-3">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1292901755-3">)</span><span class="w">
</span><span class="mi">3</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="nc">Kernel</span><span class="o">.</span><span class="s">&quot;+&quot;</span><span class="p" data-group-id="1292901755-4">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1292901755-4">)</span><span class="w">
</span><span class="mi">3</span></code></pre><p>Wrapping the function name in single- or double-quotes is always a
remote call. Therefore <code class="inline">Kernel.&quot;Foo&quot;</code> will attempt to call the function &quot;Foo&quot;
and not return the alias <code class="inline">Kernel.Foo</code>. This is done by design as module names
are more strict than function names.</p><p>When the dot is used to invoke an anonymous function there is only one
operand, but it is still written using a postfix notation:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">negate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="1233945247-1">fn</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">-</span><span class="n">n</span><span class="w"> </span><span class="k" data-group-id="1233945247-1">end</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">negate</span><span class="o">.</span><span class="p" data-group-id="1233945247-2">(</span><span class="mi">7</span><span class="p" data-group-id="1233945247-2">)</span><span class="w">
</span><span class="o">-</span><span class="mi">7</span></code></pre><h2 id="./2-quoted-expression" class="section-heading">
  <a href="#./2-quoted-expression" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Quoted expression
</h2>
<p>When <code class="inline">.</code> is used, the quoted expression may take two distinct
forms. When the right side starts with a lowercase letter (or
underscore):</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="2967919391-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">String</span><span class="o">.</span><span class="n">downcase</span><span class="p" data-group-id="2967919391-2">(</span><span class="s">&quot;FOO&quot;</span><span class="p" data-group-id="2967919391-2">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="2967919391-1">end</span><span class="w">
</span><span class="p" data-group-id="2967919391-3">{</span><span class="p" data-group-id="2967919391-4">{</span><span class="ss">:.</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2967919391-5">[</span><span class="p" data-group-id="2967919391-5">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2967919391-6">[</span><span class="p" data-group-id="2967919391-7">{</span><span class="ss">:__aliases__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2967919391-8">[</span><span class="ss">alias</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="2967919391-8">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2967919391-9">[</span><span class="ss">:String</span><span class="p" data-group-id="2967919391-9">]</span><span class="p" data-group-id="2967919391-7">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:downcase</span><span class="p" data-group-id="2967919391-6">]</span><span class="p" data-group-id="2967919391-4">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2967919391-10">[</span><span class="p" data-group-id="2967919391-10">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2967919391-11">[</span><span class="s">&quot;FOO&quot;</span><span class="p" data-group-id="2967919391-11">]</span><span class="p" data-group-id="2967919391-3">}</span></code></pre><p>Note that we have an inner tuple, containing the atom <code class="inline">:.</code> representing
the dot as first element:</p><pre><code class="makeup elixir"><span class="p" data-group-id="8093704742-1">{</span><span class="ss">:.</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8093704742-2">[</span><span class="p" data-group-id="8093704742-2">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8093704742-3">[</span><span class="p" data-group-id="8093704742-4">{</span><span class="ss">:__aliases__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8093704742-5">[</span><span class="ss">alias</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="8093704742-5">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8093704742-6">[</span><span class="ss">:String</span><span class="p" data-group-id="8093704742-6">]</span><span class="p" data-group-id="8093704742-4">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:downcase</span><span class="p" data-group-id="8093704742-3">]</span><span class="p" data-group-id="8093704742-1">}</span></code></pre><p>This tuple follows the general quoted expression structure in Elixir,
with the name as first argument, some keyword list as metadata as second,
and the list of arguments as third. In this case, the arguments are the
alias <a href="String.html"><code class="inline">String</code></a> and the atom <code class="inline">:downcase</code>. The second argument in a remote call
is <strong>always</strong> an atom.</p><p>In the case of calls to anonymous functions, the inner tuple with the dot
special form has only one argument, reflecting the fact that the operator is
unary:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="9391684740-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">negate</span><span class="o">.</span><span class="p" data-group-id="9391684740-2">(</span><span class="mi">0</span><span class="p" data-group-id="9391684740-2">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="9391684740-1">end</span><span class="w">
</span><span class="p" data-group-id="9391684740-3">{</span><span class="p" data-group-id="9391684740-4">{</span><span class="ss">:.</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9391684740-5">[</span><span class="p" data-group-id="9391684740-5">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9391684740-6">[</span><span class="p" data-group-id="9391684740-7">{</span><span class="ss">:negate</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9391684740-8">[</span><span class="p" data-group-id="9391684740-8">]</span><span class="p">,</span><span class="w"> </span><span class="bp">__MODULE__</span><span class="p" data-group-id="9391684740-7">}</span><span class="p" data-group-id="9391684740-6">]</span><span class="p" data-group-id="9391684740-4">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9391684740-9">[</span><span class="p" data-group-id="9391684740-9">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9391684740-10">[</span><span class="mi">0</span><span class="p" data-group-id="9391684740-10">]</span><span class="p" data-group-id="9391684740-3">}</span></code></pre><p>When the right side is an alias (i.e. starts with uppercase), we get instead:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="9254391436-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Hello.World</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="9254391436-1">end</span><span class="w">
</span><span class="p" data-group-id="9254391436-2">{</span><span class="ss">:__aliases__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9254391436-3">[</span><span class="ss">alias</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="9254391436-3">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9254391436-4">[</span><span class="ss">:Hello</span><span class="p">,</span><span class="w"> </span><span class="ss">:World</span><span class="p" data-group-id="9254391436-4">]</span><span class="p" data-group-id="9254391436-2">}</span></code></pre><p>We go into more details about aliases in the <a href="#__aliases__/1"><code class="inline">__aliases__/1</code></a> special form
documentation.</p><h2 id="./2-unquoting" class="section-heading">
  <a href="#./2-unquoting" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Unquoting
</h2>
<p>We can also use unquote to generate a remote call in a quoted expression:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:downcase</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="6582128531-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">String</span><span class="o">.</span><span class="k">unquote</span><span class="p" data-group-id="6582128531-2">(</span><span class="n">x</span><span class="p" data-group-id="6582128531-2">)</span><span class="p" data-group-id="6582128531-3">(</span><span class="s">&quot;FOO&quot;</span><span class="p" data-group-id="6582128531-3">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="6582128531-1">end</span><span class="w">
</span><span class="p" data-group-id="6582128531-4">{</span><span class="p" data-group-id="6582128531-5">{</span><span class="ss">:.</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6582128531-6">[</span><span class="p" data-group-id="6582128531-6">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6582128531-7">[</span><span class="p" data-group-id="6582128531-8">{</span><span class="ss">:__aliases__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6582128531-9">[</span><span class="ss">alias</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="6582128531-9">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6582128531-10">[</span><span class="ss">:String</span><span class="p" data-group-id="6582128531-10">]</span><span class="p" data-group-id="6582128531-8">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:downcase</span><span class="p" data-group-id="6582128531-7">]</span><span class="p" data-group-id="6582128531-5">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6582128531-11">[</span><span class="p" data-group-id="6582128531-11">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6582128531-12">[</span><span class="s">&quot;FOO&quot;</span><span class="p" data-group-id="6582128531-12">]</span><span class="p" data-group-id="6582128531-4">}</span></code></pre><p>Similar to <code class="inline">Kernel.&quot;FUNCTION_NAME&quot;</code>, <code class="inline">unquote(x)</code> will always generate a remote call,
independent of the value of <code class="inline">x</code>. To generate an alias via the quoted expression,
one needs to rely on <a href="Module.html#concat/2"><code class="inline">Module.concat/2</code></a>:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">Sample</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="3837007134-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Module</span><span class="o">.</span><span class="n">concat</span><span class="p" data-group-id="3837007134-2">(</span><span class="nc">String</span><span class="p">,</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="3837007134-3">(</span><span class="n">x</span><span class="p" data-group-id="3837007134-3">)</span><span class="p" data-group-id="3837007134-2">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="3837007134-1">end</span><span class="w">
</span><span class="p" data-group-id="3837007134-4">{</span><span class="p" data-group-id="3837007134-5">{</span><span class="ss">:.</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3837007134-6">[</span><span class="p" data-group-id="3837007134-6">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3837007134-7">[</span><span class="p" data-group-id="3837007134-8">{</span><span class="ss">:__aliases__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3837007134-9">[</span><span class="ss">alias</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="3837007134-9">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3837007134-10">[</span><span class="ss">:Module</span><span class="p" data-group-id="3837007134-10">]</span><span class="p" data-group-id="3837007134-8">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:concat</span><span class="p" data-group-id="3837007134-7">]</span><span class="p" data-group-id="3837007134-5">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3837007134-11">[</span><span class="p" data-group-id="3837007134-11">]</span><span class="p">,</span><span class="w">
 </span><span class="p" data-group-id="3837007134-12">[</span><span class="p" data-group-id="3837007134-13">{</span><span class="ss">:__aliases__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3837007134-14">[</span><span class="ss">alias</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="3837007134-14">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3837007134-15">[</span><span class="ss">:String</span><span class="p" data-group-id="3837007134-15">]</span><span class="p" data-group-id="3837007134-13">}</span><span class="p">,</span><span class="w"> </span><span class="nc">Sample</span><span class="p" data-group-id="3837007134-12">]</span><span class="p" data-group-id="3837007134-4">}</span></code></pre>
  </section>
</section>
<section class="detail" id="::/2">

  <div class="detail-header">
    <a href="#::/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">left :: right</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L785" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Type operator. Used by types and bitstrings to specify types.</p><p>This operator is used in two distinct occasions in Elixir.
It is used in typespecs to specify the type of a variable,
function or of a type itself:</p><pre><code class="makeup elixir"><span class="na">@type</span><span class="w"> </span><span class="n">number</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">integer</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">float</span><span class="w">
</span><span class="na">@spec</span><span class="w"> </span><span class="n">add</span><span class="p" data-group-id="9107947838-1">(</span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p" data-group-id="9107947838-1">)</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="n">number</span></code></pre><p>It may also be used in bit strings to specify the type
of a given bit segment:</p><pre><code class="makeup elixir"><span class="p" data-group-id="2986762640-1">&lt;&lt;</span><span class="n">int</span><span class="o">::</span><span class="n">integer</span><span class="o">-</span><span class="n">little</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="o">::</span><span class="n">bits</span><span class="p" data-group-id="2986762640-1">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bits</span></code></pre><p>Read the documentation on the <code class="inline">Typespec</code> page and
<a href="#%3C%3C%3E%3E/1"><code class="inline">&lt;&lt;&gt;&gt;/1</code></a> for more information on typespecs and
bitstrings respectively.</p>
  </section>
</section>
<section class="detail" id="%3C%3C%3E%3E/1">

  <div class="detail-header">
    <a href="#%3C%3C%3E%3E/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">&lt;&lt;args&gt;&gt;</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L371" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Defines a new bitstring.</p><h2 id="%3C%3C%3E%3E/1-examples" class="section-heading">
  <a href="#%3C%3C%3E%3E/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8495889393-1">&lt;&lt;</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="8495889393-1">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="8495889393-2">&lt;&lt;</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="8495889393-2">&gt;&gt;</span></code></pre><h2 id="%3C%3C%3E%3E/1-types" class="section-heading">
  <a href="#%3C%3C%3E%3E/1-types" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Types
</h2>
<p>A bitstring is made of many segments and each segment has a
type. There are 9 types used in bitstrings:</p><ul><li><code class="inline">integer</code></li><li><code class="inline">float</code></li><li><code class="inline">bits</code> (alias for <code class="inline">bitstring</code>)</li><li><code class="inline">bitstring</code></li><li><code class="inline">binary</code></li><li><code class="inline">bytes</code> (alias for <code class="inline">binary</code>)</li><li><code class="inline">utf8</code></li><li><code class="inline">utf16</code></li><li><code class="inline">utf32</code></li></ul><p>When no type is specified, the default is <code class="inline">integer</code>:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8306882795-1">&lt;&lt;</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="8306882795-1">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="8306882795-2">&lt;&lt;</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="8306882795-2">&gt;&gt;</span></code></pre><p>Elixir also accepts by default the segment to be a literal
string or a literal charlist, which are by default expanded to integers:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="6466130739-1">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="6466130739-1">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="6466130739-2">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w"> </span><span class="mi">111</span><span class="p" data-group-id="6466130739-2">&gt;&gt;</span></code></pre><p>Binaries need to be explicitly tagged as <code class="inline">binary</code>:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">rest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;oo&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="9654353250-1">&lt;&lt;</span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="9654353250-1">&gt;&gt;</span><span class="w">
</span><span class="s">&quot;foo&quot;</span></code></pre><p>The <code class="inline">utf8</code>, <code class="inline">utf16</code>, and <code class="inline">utf32</code> types are for Unicode code points. They
can also be applied to literal strings and charlists:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4154334341-1">&lt;&lt;</span><span class="s">&quot;foo&quot;</span><span class="o">::</span><span class="n">utf16</span><span class="p" data-group-id="4154334341-1">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="4154334341-2">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">111</span><span class="p" data-group-id="4154334341-2">&gt;&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4154334341-3">&lt;&lt;</span><span class="s">&quot;foo&quot;</span><span class="o">::</span><span class="n">utf32</span><span class="p" data-group-id="4154334341-3">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="4154334341-4">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">111</span><span class="p" data-group-id="4154334341-4">&gt;&gt;</span></code></pre><p>Otherwise we get an <a href="ArgumentError.html"><code class="inline">ArgumentError</code></a> when constructing the binary:</p><pre><code class="makeup elixir"><span class="n">rest</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;oo&quot;</span><span class="w">
</span><span class="p" data-group-id="3598742311-1">&lt;&lt;</span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="p" data-group-id="3598742311-1">&gt;&gt;</span><span class="w">
</span><span class="gt">** (ArgumentError) argument error</span></code></pre><h2 id="%3C%3C%3E%3E/1-options" class="section-heading">
  <a href="#%3C%3C%3E%3E/1-options" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Options
</h2>
<p>Many options can be given by using <code class="inline">-</code> as separator. Order is
arbitrary, so the following are all equivalent:</p><pre><code class="makeup elixir"><span class="p" data-group-id="0568476215-1">&lt;&lt;</span><span class="mi">102</span><span class="o">::</span><span class="n">integer</span><span class="o">-</span><span class="n">native</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0568476215-1">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="0568476215-2">&lt;&lt;</span><span class="mi">102</span><span class="o">::</span><span class="n">native</span><span class="o">-</span><span class="n">integer</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0568476215-2">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="0568476215-3">&lt;&lt;</span><span class="mi">102</span><span class="o">::</span><span class="n">unsigned</span><span class="o">-</span><span class="n">big</span><span class="o">-</span><span class="n">integer</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0568476215-3">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="0568476215-4">&lt;&lt;</span><span class="mi">102</span><span class="o">::</span><span class="n">unsigned</span><span class="o">-</span><span class="n">big</span><span class="o">-</span><span class="n">integer</span><span class="o">-</span><span class="n">size</span><span class="p" data-group-id="0568476215-5">(</span><span class="mi">8</span><span class="p" data-group-id="0568476215-5">)</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0568476215-4">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="0568476215-6">&lt;&lt;</span><span class="mi">102</span><span class="o">::</span><span class="n">unsigned</span><span class="o">-</span><span class="n">big</span><span class="o">-</span><span class="n">integer</span><span class="o">-</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0568476215-6">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="0568476215-7">&lt;&lt;</span><span class="mi">102</span><span class="o">::</span><span class="mi">8</span><span class="o">-</span><span class="n">integer</span><span class="o">-</span><span class="n">big</span><span class="o">-</span><span class="n">unsigned</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0568476215-7">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="0568476215-8">&lt;&lt;</span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="n">rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0568476215-8">&gt;&gt;</span></code></pre><h3 id="%3C%3C%3E%3E/1-unit-and-size" class="section-heading">
  <a href="#%3C%3C%3E%3E/1-unit-and-size" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Unit and Size
</h3>
<p>The length of the match is equal to the <code class="inline">unit</code> (a number of bits) times the
<code class="inline">size</code> (the number of repeated segments of length <code class="inline">unit</code>).</p><table><thead><tr><th style="text-align: left;">Type</th><th style="text-align: left;">Default Unit</th></tr></thead><tbody><tr><td style="text-align: left;"><code class="inline">integer</code></td><td style="text-align: left;">1 bit</td></tr><tr><td style="text-align: left;"><code class="inline">float</code></td><td style="text-align: left;">1 bit</td></tr><tr><td style="text-align: left;"><code class="inline">binary</code></td><td style="text-align: left;">8 bits</td></tr></tbody></table><p>Sizes for types are a bit more nuanced. The default size for integers is 8.</p><p>For floats, it is 64. For floats, <code class="inline">size * unit</code> must result in 16, 32, or 64,
corresponding to <a href="https://en.wikipedia.org/wiki/IEEE_floating_point">IEEE 754</a>
binary16, binary32, and binary64, respectively.</p><p>For binaries, the default is the size of the binary. Only the last binary in a
match can use the default size. All others must have their size specified
explicitly, even if the match is unambiguous. For example:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4843773959-1">&lt;&lt;</span><span class="n">name</span><span class="o">::</span><span class="n">binary</span><span class="o">-</span><span class="n">size</span><span class="p" data-group-id="4843773959-2">(</span><span class="mi">5</span><span class="p" data-group-id="4843773959-2">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; the &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="4843773959-1">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4843773959-3">&lt;&lt;</span><span class="s">&quot;Frank the Walrus&quot;</span><span class="p" data-group-id="4843773959-3">&gt;&gt;</span><span class="w">
</span><span class="s">&quot;Frank the Walrus&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4843773959-4">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="p" data-group-id="4843773959-4">}</span><span class="w">
</span><span class="p" data-group-id="4843773959-5">{</span><span class="s">&quot;Frank&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Walrus&quot;</span><span class="p" data-group-id="4843773959-5">}</span></code></pre><p>The size can be a variable:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">name_size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="0967697284-1">&lt;&lt;</span><span class="n">name</span><span class="o">::</span><span class="n">binary</span><span class="o">-</span><span class="n">size</span><span class="p" data-group-id="0967697284-2">(</span><span class="n">name_size</span><span class="p" data-group-id="0967697284-2">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; the &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0967697284-1">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="0967697284-3">&lt;&lt;</span><span class="s">&quot;Frank the Walrus&quot;</span><span class="p" data-group-id="0967697284-3">&gt;&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="0967697284-4">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="p" data-group-id="0967697284-4">}</span><span class="w">
</span><span class="p" data-group-id="0967697284-5">{</span><span class="s">&quot;Frank&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Walrus&quot;</span><span class="p" data-group-id="0967697284-5">}</span></code></pre><p>And the variable can be defined in the match itself (prior to its use):</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="3833209989-1">&lt;&lt;</span><span class="n">name_size</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="3833209989-2">(</span><span class="mi">8</span><span class="p" data-group-id="3833209989-2">)</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="o">::</span><span class="n">binary</span><span class="o">-</span><span class="n">size</span><span class="p" data-group-id="3833209989-3">(</span><span class="n">name_size</span><span class="p" data-group-id="3833209989-3">)</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; the &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="3833209989-1">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3833209989-4">&lt;&lt;</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Frank the Walrus&quot;</span><span class="p" data-group-id="3833209989-4">&gt;&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="3833209989-5">{</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="p" data-group-id="3833209989-5">}</span><span class="w">
</span><span class="p" data-group-id="3833209989-6">{</span><span class="s">&quot;Frank&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Walrus&quot;</span><span class="p" data-group-id="3833209989-6">}</span></code></pre><p>However, the size cannot be defined in the match outside the binary/bitstring match:</p><pre><code class="makeup elixir"><span class="p" data-group-id="8661090306-1">{</span><span class="n">name_size</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8661090306-2">&lt;&lt;</span><span class="n">name</span><span class="o">::</span><span class="n">binary</span><span class="o">-</span><span class="n">size</span><span class="p" data-group-id="8661090306-3">(</span><span class="n">name_size</span><span class="p" data-group-id="8661090306-3">)</span><span class="p">,</span><span class="w"> </span><span class="c">_rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="8661090306-2">&gt;&gt;</span><span class="p" data-group-id="8661090306-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="8661090306-4">{</span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8661090306-5">&lt;&lt;</span><span class="s">&quot;Frank the Walrus&quot;</span><span class="p" data-group-id="8661090306-5">&gt;&gt;</span><span class="p" data-group-id="8661090306-4">}</span><span class="w">
</span><span class="gt">** (CompileError): undefined variable &quot;name_size&quot; in bitstring segment</span></code></pre><p>Failing to specify the size for the non-last causes compilation to fail:</p><pre><code class="makeup elixir"><span class="p" data-group-id="3171065520-1">&lt;&lt;</span><span class="n">name</span><span class="o">::</span><span class="n">binary</span><span class="p">,</span><span class="w"> </span><span class="s">&quot; the &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="3171065520-1">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3171065520-2">&lt;&lt;</span><span class="s">&quot;Frank the Walrus&quot;</span><span class="p" data-group-id="3171065520-2">&gt;&gt;</span><span class="w">
</span><span class="gt">** (CompileError): a binary field without size is only allowed at the end of a binary pattern</span></code></pre><h4>Shortcut Syntax</h4><p>Size and unit can also be specified using a syntax shortcut
when passing integer values:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8809698735-1">&lt;&lt;</span><span class="n">x</span><span class="o">::</span><span class="mi">8</span><span class="p" data-group-id="8809698735-1">&gt;&gt;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p" data-group-id="8809698735-2">&lt;&lt;</span><span class="n">x</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="8809698735-3">(</span><span class="mi">8</span><span class="p" data-group-id="8809698735-3">)</span><span class="p" data-group-id="8809698735-2">&gt;&gt;</span><span class="w">
</span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="8809698735-4">&lt;&lt;</span><span class="n">x</span><span class="o">::</span><span class="mi">8</span><span class="o">*</span><span class="mi">4</span><span class="p" data-group-id="8809698735-4">&gt;&gt;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="p" data-group-id="8809698735-5">&lt;&lt;</span><span class="n">x</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="8809698735-6">(</span><span class="mi">8</span><span class="p" data-group-id="8809698735-6">)</span><span class="o">-</span><span class="n">unit</span><span class="p" data-group-id="8809698735-7">(</span><span class="mi">4</span><span class="p" data-group-id="8809698735-7">)</span><span class="p" data-group-id="8809698735-5">&gt;&gt;</span><span class="w">
</span><span class="no">true</span></code></pre><p>This syntax reflects the fact the effective size is given by
multiplying the size by the unit.</p><h3 id="%3C%3C%3E%3E/1-modifiers" class="section-heading">
  <a href="#%3C%3C%3E%3E/1-modifiers" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Modifiers
</h3>
<p>Some types have associated modifiers to clear up ambiguity in byte
representation.</p><table><thead><tr><th style="text-align: left;">Modifier</th><th style="text-align: left;">Relevant Type(s)</th></tr></thead><tbody><tr><td style="text-align: left;"><code class="inline">signed</code></td><td style="text-align: left;"><code class="inline">integer</code></td></tr><tr><td style="text-align: left;"><code class="inline">unsigned</code> (default)</td><td style="text-align: left;"><code class="inline">integer</code></td></tr><tr><td style="text-align: left;"><code class="inline">little</code></td><td style="text-align: left;"><code class="inline">integer</code>, <code class="inline">float</code>, <code class="inline">utf16</code>, <code class="inline">utf32</code></td></tr><tr><td style="text-align: left;"><code class="inline">big</code> (default)</td><td style="text-align: left;"><code class="inline">integer</code>, <code class="inline">float</code>, <code class="inline">utf16</code>, <code class="inline">utf32</code></td></tr><tr><td style="text-align: left;"><code class="inline">native</code></td><td style="text-align: left;"><code class="inline">integer</code>, <code class="inline">utf16</code>, <code class="inline">utf32</code></td></tr></tbody></table><h3 id="%3C%3C%3E%3E/1-sign" class="section-heading">
  <a href="#%3C%3C%3E%3E/1-sign" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Sign
</h3>
<p>Integers can be <code class="inline">signed</code> or <code class="inline">unsigned</code>, defaulting to <code class="inline">unsigned</code>.</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4758101032-1">&lt;&lt;</span><span class="n">int</span><span class="o">::</span><span class="n">integer</span><span class="p" data-group-id="4758101032-1">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4758101032-2">&lt;&lt;</span><span class="o">-</span><span class="mi">100</span><span class="p" data-group-id="4758101032-2">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="4758101032-3">&lt;&lt;</span><span class="mi">156</span><span class="p" data-group-id="4758101032-3">&gt;&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">int</span><span class="w">
</span><span class="mi">156</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="4758101032-4">&lt;&lt;</span><span class="n">int</span><span class="o">::</span><span class="n">integer</span><span class="o">-</span><span class="n">signed</span><span class="p" data-group-id="4758101032-4">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4758101032-5">&lt;&lt;</span><span class="o">-</span><span class="mi">100</span><span class="p" data-group-id="4758101032-5">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="4758101032-6">&lt;&lt;</span><span class="mi">156</span><span class="p" data-group-id="4758101032-6">&gt;&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">int</span><span class="w">
</span><span class="o">-</span><span class="mi">100</span></code></pre><p><code class="inline">signed</code> and <code class="inline">unsigned</code> are only used for matching binaries (see below) and
are only used for integers.</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="5414737439-1">&lt;&lt;</span><span class="o">-</span><span class="mi">100</span><span class="o">::</span><span class="n">signed</span><span class="p">,</span><span class="w"> </span><span class="c">_rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="5414737439-1">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5414737439-2">&lt;&lt;</span><span class="o">-</span><span class="mi">100</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p" data-group-id="5414737439-2">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="5414737439-3">&lt;&lt;</span><span class="mi">156</span><span class="p">,</span><span class="w"> </span><span class="mi">102</span><span class="p">,</span><span class="w"> </span><span class="mi">111</span><span class="p">,</span><span class="w"> </span><span class="mi">111</span><span class="p" data-group-id="5414737439-3">&gt;&gt;</span></code></pre><h3 id="%3C%3C%3E%3E/1-endianness" class="section-heading">
  <a href="#%3C%3C%3E%3E/1-endianness" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Endianness
</h3>
<p>Elixir has three options for endianness: <code class="inline">big</code>, <code class="inline">little</code>, and <code class="inline">native</code>.
The default is <code class="inline">big</code>:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="2086379067-1">&lt;&lt;</span><span class="n">number</span><span class="o">::</span><span class="n">little</span><span class="o">-</span><span class="n">integer</span><span class="o">-</span><span class="n">size</span><span class="p" data-group-id="2086379067-2">(</span><span class="mi">16</span><span class="p" data-group-id="2086379067-2">)</span><span class="p" data-group-id="2086379067-1">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2086379067-3">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="2086379067-3">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="2086379067-4">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="2086379067-4">&gt;&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">number</span><span class="w">
</span><span class="mi">256</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="2086379067-5">&lt;&lt;</span><span class="n">number</span><span class="o">::</span><span class="n">big</span><span class="o">-</span><span class="n">integer</span><span class="o">-</span><span class="n">size</span><span class="p" data-group-id="2086379067-6">(</span><span class="mi">16</span><span class="p" data-group-id="2086379067-6">)</span><span class="p" data-group-id="2086379067-5">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="2086379067-7">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="2086379067-7">&gt;&gt;</span><span class="w">
</span><span class="p" data-group-id="2086379067-8">&lt;&lt;</span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="2086379067-8">&gt;&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">number</span><span class="w">
</span><span class="mi">1</span></code></pre><p><code class="inline">native</code> is determined by the VM at startup and will depend on the
host operating system.</p><h2 id="%3C%3C%3E%3E/1-binary-bitstring-matching" class="section-heading">
  <a href="#%3C%3C%3E%3E/1-binary-bitstring-matching" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Binary/Bitstring Matching
</h2>
<p>Binary matching is a powerful feature in Elixir that is useful for extracting
information from binaries as well as pattern matching.</p><p>Binary matching can be used by itself to extract information from binaries:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="5036881895-1">&lt;&lt;</span><span class="s">&quot;Hello, &quot;</span><span class="p">,</span><span class="w"> </span><span class="n">place</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="5036881895-1">&gt;&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Hello, World&quot;</span><span class="w">
</span><span class="s">&quot;Hello, World&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">place</span><span class="w">
</span><span class="s">&quot;World&quot;</span></code></pre><p>Or as a part of function definitions to pattern match:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">ImageTyper</span><span class="w"> </span><span class="k" data-group-id="0345843263-1">do</span><span class="w">
  </span><span class="na">@png_signature</span><span class="w"> </span><span class="p" data-group-id="0345843263-2">&lt;&lt;</span><span class="mi">137</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-3">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-3">)</span><span class="p">,</span><span class="w"> </span><span class="mi">80</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-4">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-4">)</span><span class="p">,</span><span class="w"> </span><span class="mi">78</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-5">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-5">)</span><span class="p">,</span><span class="w"> </span><span class="mi">71</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-6">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-6">)</span><span class="p">,</span><span class="w">
                   </span><span class="mi">13</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-7">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-7">)</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-8">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-8">)</span><span class="p">,</span><span class="w"> </span><span class="mi">26</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-9">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-9">)</span><span class="p">,</span><span class="w"> </span><span class="mi">10</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-10">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-10">)</span><span class="p" data-group-id="0345843263-2">&gt;&gt;</span><span class="w">
  </span><span class="na">@jpg_signature</span><span class="w"> </span><span class="p" data-group-id="0345843263-11">&lt;&lt;</span><span class="mi">255</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-12">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-12">)</span><span class="p">,</span><span class="w"> </span><span class="mi">216</span><span class="o">::</span><span class="n">size</span><span class="p" data-group-id="0345843263-13">(</span><span class="mi">8</span><span class="p" data-group-id="0345843263-13">)</span><span class="p" data-group-id="0345843263-11">&gt;&gt;</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">type</span><span class="p" data-group-id="0345843263-14">(</span><span class="p" data-group-id="0345843263-15">&lt;&lt;</span><span class="na">@png_signature</span><span class="p">,</span><span class="w"> </span><span class="c">_rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0345843263-15">&gt;&gt;</span><span class="p" data-group-id="0345843263-14">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ss">:png</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">type</span><span class="p" data-group-id="0345843263-16">(</span><span class="p" data-group-id="0345843263-17">&lt;&lt;</span><span class="na">@jpg_signature</span><span class="p">,</span><span class="w"> </span><span class="c">_rest</span><span class="o">::</span><span class="n">binary</span><span class="p" data-group-id="0345843263-17">&gt;&gt;</span><span class="p" data-group-id="0345843263-16">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ss">:jpg</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">type</span><span class="p" data-group-id="0345843263-18">(</span><span class="bp">_</span><span class="p" data-group-id="0345843263-18">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ss">:unknown</span><span class="w">
</span><span class="k" data-group-id="0345843263-1">end</span></code></pre><h3 id="%3C%3C%3E%3E/1-performance-optimizations" class="section-heading">
  <a href="#%3C%3C%3E%3E/1-performance-optimizations" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Performance &amp; Optimizations
</h3>
<p>The Erlang compiler can provide a number of optimizations on binary creation
and matching. To see optimization output, set the <code class="inline">bin_opt_info</code> compiler
option:</p><pre><code class="makeup elixir"><span class="nc">ERL_COMPILER_OPTIONS</span><span class="o">=</span><span class="n">bin_opt_info</span><span class="w"> </span><span class="n">mix</span><span class="w"> </span><span class="n">compile</span></code></pre><p>To learn more about specific optimizations and performance considerations,
check out the
<a href="https://erlang.org/doc/efficiency_guide/binaryhandling.html">&quot;Constructing and matching binaries&quot; chapter of the Erlang's Efficiency Guide</a>.</p>
  </section>
</section>
<section class="detail" id="=/2">

  <div class="detail-header">
    <a href="#=/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">left = right</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L764" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Match operator. Matches the value on the right against the pattern on the left.</p>
  </section>
</section>
<section class="detail" id="%5E/1">

  <div class="detail-header">
    <a href="#%5E/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">^var</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L759" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Pin operator. Accesses an already bound variable in match clauses.</p><h2 id="%5E/1-examples" class="section-heading">
  <a href="#%5E/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<p>Elixir allows variables to be rebound via static single assignment:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">x</span><span class="w">
</span><span class="mi">2</span></code></pre><p>However, in some situations, it is useful to match against an existing
value, instead of rebinding. This can be done with the <code class="inline">^</code> special form,
colloquially known as the pin operator:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="o">^</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">first</span><span class="p" data-group-id="5999125770-1">(</span><span class="p" data-group-id="5999125770-2">[</span><span class="mi">1</span><span class="p" data-group-id="5999125770-2">]</span><span class="p" data-group-id="5999125770-1">)</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="o">^</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">List</span><span class="o">.</span><span class="n">first</span><span class="p" data-group-id="5999125770-3">(</span><span class="p" data-group-id="5999125770-4">[</span><span class="mi">2</span><span class="p" data-group-id="5999125770-4">]</span><span class="p" data-group-id="5999125770-3">)</span><span class="w">
</span><span class="gt">** (MatchError) no match of right hand side value: 2</span></code></pre><p>Note that <code class="inline">^x</code> always refers to the value of <code class="inline">x</code> prior to the match. The
following example will match:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="p" data-group-id="6476563276-1">{</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">^</span><span class="n">x</span><span class="p" data-group-id="6476563276-1">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6476563276-2">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="6476563276-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">x</span><span class="w">
</span><span class="mi">1</span></code></pre>
  </section>
</section>
<section class="detail" id="__CALLER__/0">

  <div class="detail-header">
    <a href="#__CALLER__/0" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">__CALLER__</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L715" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Returns the current calling environment as a <a href="Macro.Env.html"><code class="inline">Macro.Env</code></a> struct.</p><p>In the environment you can access the filename, line numbers,
set up aliases, the function and others.</p>
  </section>
</section>
<section class="detail" id="__DIR__/0">

  <div class="detail-header">
    <a href="#__DIR__/0" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">__DIR__</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L707" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Returns the absolute path of the directory of the current file as a binary.</p><p>Although the directory can be accessed as <code class="inline">Path.dirname(__ENV__.file)</code>,
this macro is a convenient shortcut.</p>
  </section>
</section>
<section class="detail" id="__ENV__/0">

  <div class="detail-header">
    <a href="#__ENV__/0" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">__ENV__</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L691" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Returns the current environment information as a <a href="Macro.Env.html"><code class="inline">Macro.Env</code></a> struct.</p><p>In the environment you can access the current filename,
line numbers, set up aliases, the current function and others.</p>
  </section>
</section>
<section class="detail" id="__MODULE__/0">

  <div class="detail-header">
    <a href="#__MODULE__/0" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">__MODULE__</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L699" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Returns the current module name as an atom or <code class="inline">nil</code> otherwise.</p><p>Although the module can be accessed in the <a href="#__ENV__/0"><code class="inline">__ENV__/0</code></a>, this macro
is a convenient shortcut.</p>
  </section>
</section>
<section class="detail" id="__STACKTRACE__/0">

  <div class="detail-header">
    <a href="#__STACKTRACE__/0" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">__STACKTRACE__</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L727" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

      <span class="note">(since 1.7.0)</span>

  </div>

  <section class="docstring">

<p>Returns the stacktrace for the currently handled exception.</p><p>It is available only in the <code class="inline">catch</code> and <code class="inline">rescue</code> clauses of <a href="#try/1"><code class="inline">try/1</code></a>
expressions.</p><p>To retrieve the stacktrace of the current process, use
<code class="inline">Process.info(self(), :current_stacktrace)</code> instead.</p>
  </section>
</section>
<section class="detail" id="__aliases__/1">

  <div class="detail-header">
    <a href="#__aliases__/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">__aliases__(args)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1719" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Internal special form to hold aliases information.</p><p>It is usually compiled to an atom:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="8591922153-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Foo.Bar</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="8591922153-1">end</span><span class="w">
</span><span class="p" data-group-id="8591922153-2">{</span><span class="ss">:__aliases__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8591922153-3">[</span><span class="ss">alias</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="8591922153-3">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8591922153-4">[</span><span class="ss">:Foo</span><span class="p">,</span><span class="w"> </span><span class="ss">:Bar</span><span class="p" data-group-id="8591922153-4">]</span><span class="p" data-group-id="8591922153-2">}</span></code></pre><p>Elixir represents <code class="inline">Foo.Bar</code> as <code class="inline">__aliases__</code> so calls can be
unambiguously identified by the operator <code class="inline">:.</code>. For example:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="4234423491-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">Foo</span><span class="o">.</span><span class="n">bar</span><span class="p" data-group-id="4234423491-2">(</span><span class="p" data-group-id="4234423491-2">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="4234423491-1">end</span><span class="w">
</span><span class="p" data-group-id="4234423491-3">{</span><span class="p" data-group-id="4234423491-4">{</span><span class="ss">:.</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4234423491-5">[</span><span class="p" data-group-id="4234423491-5">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4234423491-6">[</span><span class="p" data-group-id="4234423491-7">{</span><span class="ss">:__aliases__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4234423491-8">[</span><span class="ss">alias</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="p" data-group-id="4234423491-8">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4234423491-9">[</span><span class="ss">:Foo</span><span class="p" data-group-id="4234423491-9">]</span><span class="p" data-group-id="4234423491-7">}</span><span class="p">,</span><span class="w"> </span><span class="ss">:bar</span><span class="p" data-group-id="4234423491-6">]</span><span class="p" data-group-id="4234423491-4">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4234423491-10">[</span><span class="p" data-group-id="4234423491-10">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4234423491-11">[</span><span class="p" data-group-id="4234423491-11">]</span><span class="p" data-group-id="4234423491-3">}</span></code></pre><p>Whenever an expression iterator sees a <code class="inline">:.</code> as the tuple key,
it can be sure that it represents a call and the second argument
in the list is an atom.</p><p>On the other hand, aliases hold some properties:</p><ol><li><p>The head element of aliases can be any term that must expand to
an atom at compilation time.</p></li><li><p>The tail elements of aliases are guaranteed to always be atoms.</p></li><li><p>When the head element of aliases is the atom <code class="inline">:Elixir</code>, no expansion happens.</p></li></ol>
  </section>
</section>
<section class="detail" id="__block__/1">

  <div class="detail-header">
    <a href="#__block__/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">__block__(args)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1607" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Internal special form for block expressions.</p><p>This is the special form used whenever we have a block
of expressions in Elixir. This special form is private
and should not be invoked directly:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="8506745063-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="mi">1</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="mi">2</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="mi">3</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="8506745063-1">end</span><span class="w">
</span><span class="p" data-group-id="8506745063-2">{</span><span class="ss">:__block__</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8506745063-3">[</span><span class="p" data-group-id="8506745063-3">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8506745063-4">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="8506745063-4">]</span><span class="p" data-group-id="8506745063-2">}</span></code></pre>
  </section>
</section>
<section class="detail" id="%7B%7D/1">

  <div class="detail-header">
    <a href="#%7B%7D/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">{args}</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L62" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Creates a tuple.</p><p>More information about the tuple data type and about functions to manipulate
tuples can be found in the <a href="Tuple.html"><code class="inline">Tuple</code></a> module; some functions for working with
tuples are also available in <a href="Kernel.html"><code class="inline">Kernel</code></a> (such as <a href="Kernel.html#elem/2"><code class="inline">Kernel.elem/2</code></a> or
<a href="Kernel.html#tuple_size/1"><code class="inline">Kernel.tuple_size/1</code></a>).</p><h2 id="%7B%7D/1-ast-representation" class="section-heading">
  <a href="#%7B%7D/1-ast-representation" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  AST representation
</h2>
<p>Only two-element tuples are considered literals in Elixir and return themselves
when quoted. Therefore, all other tuples are represented in the AST as calls to
the <code class="inline">:{}</code> special form.</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="3416666502-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="3416666502-2">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="3416666502-2">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="3416666502-1">end</span><span class="w">
</span><span class="p" data-group-id="3416666502-3">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="3416666502-3">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="3416666502-4">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="3416666502-5">{</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="3416666502-5">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="3416666502-4">end</span><span class="w">
</span><span class="p" data-group-id="3416666502-6">{</span><span class="ss">:{}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3416666502-7">[</span><span class="p" data-group-id="3416666502-7">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3416666502-8">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="3416666502-8">]</span><span class="p" data-group-id="3416666502-6">}</span></code></pre>
  </section>
</section>
<section class="detail" id="alias/2">

  <div class="detail-header">
    <a href="#alias/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">alias(module, opts)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L554" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p><a href="#alias/2"><code class="inline">alias/2</code></a> is used to set up aliases, often useful with modules' names.</p><h2 id="alias/2-examples" class="section-heading">
  <a href="#alias/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<p><a href="#alias/2"><code class="inline">alias/2</code></a> can be used to set up an alias for any module:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Math</span><span class="w"> </span><span class="k" data-group-id="0324662672-1">do</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">MyKeyword</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="nc">Keyword</span><span class="w">
</span><span class="k" data-group-id="0324662672-1">end</span></code></pre><p>In the example above, we have set up <code class="inline">MyKeyword</code> to be aliased
as <a href="Keyword.html"><code class="inline">Keyword</code></a>. So now, any reference to <a href="Keyword.html"><code class="inline">Keyword</code></a> will be
automatically replaced by <code class="inline">MyKeyword</code>.</p><p>In case one wants to access the original <a href="Keyword.html"><code class="inline">Keyword</code></a>, it can be done
by accessing <code class="inline">Elixir</code>:</p><pre><code class="makeup elixir"><span class="nc">Keyword</span><span class="o">.</span><span class="n">values</span><span class="w"> </span><span class="c1">#=&gt; uses MyKeyword.values</span><span class="w">
</span><span class="nc">Elixir.Keyword</span><span class="o">.</span><span class="n">values</span><span class="w"> </span><span class="c1">#=&gt; uses Keyword.values</span></code></pre><p>Note that calling <code class="inline">alias</code> without the <code class="inline">:as</code> option automatically
sets an alias based on the last part of the module. For example:</p><pre><code class="makeup elixir"><span class="kn">alias</span><span class="w"> </span><span class="nc">Foo.Bar.Baz</span></code></pre><p>Is the same as:</p><pre><code class="makeup elixir"><span class="kn">alias</span><span class="w"> </span><span class="nc">Foo.Bar.Baz</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="nc">Baz</span></code></pre><p>We can also alias multiple modules in one line:</p><pre><code class="makeup elixir"><span class="kn">alias</span><span class="w"> </span><span class="nc">Foo</span><span class="o">.</span><span class="p" data-group-id="8939938225-1">{</span><span class="nc">Bar</span><span class="p">,</span><span class="w"> </span><span class="nc">Baz</span><span class="p">,</span><span class="w"> </span><span class="nc">Biz</span><span class="p" data-group-id="8939938225-1">}</span></code></pre><p>Is the same as:</p><pre><code class="makeup elixir"><span class="kn">alias</span><span class="w"> </span><span class="nc">Foo.Bar</span><span class="w">
</span><span class="kn">alias</span><span class="w"> </span><span class="nc">Foo.Baz</span><span class="w">
</span><span class="kn">alias</span><span class="w"> </span><span class="nc">Foo.Biz</span></code></pre><h2 id="alias/2-lexical-scope" class="section-heading">
  <a href="#alias/2-lexical-scope" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Lexical scope
</h2>
<p><a href="#import/2"><code class="inline">import/2</code></a>, <a href="#require/2"><code class="inline">require/2</code></a> and <a href="#alias/2"><code class="inline">alias/2</code></a> are called directives and all
have lexical scope. This means you can set up aliases inside
specific functions and it won't affect the overall scope.</p><h2 id="alias/2-warnings" class="section-heading">
  <a href="#alias/2-warnings" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Warnings
</h2>
<p>If you alias a module and you don't use the alias, Elixir is
going to issue a warning implying the alias is not being used.</p><p>In case the alias is generated automatically by a macro,
Elixir won't emit any warnings though, since the alias
was not explicitly defined.</p><p>Both warning behaviours could be changed by explicitly
setting the <code class="inline">:warn</code> option to <code class="inline">true</code> or <code class="inline">false</code>.</p>
  </section>
</section>
<section class="detail" id="case/2">

  <div class="detail-header">
    <a href="#case/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">case(condition, clauses)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1814" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Matches the given expression against the given clauses.</p><h2 id="case/2-examples" class="section-heading">
  <a href="#case/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="k">case</span><span class="w"> </span><span class="nc">File</span><span class="o">.</span><span class="n">read</span><span class="p" data-group-id="8602045272-1">(</span><span class="n">file</span><span class="p" data-group-id="8602045272-1">)</span><span class="w"> </span><span class="k" data-group-id="8602045272-2">do</span><span class="w">
  </span><span class="p" data-group-id="8602045272-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">contents</span><span class="p" data-group-id="8602045272-3">}</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_binary</span><span class="p" data-group-id="8602045272-4">(</span><span class="n">contents</span><span class="p" data-group-id="8602045272-4">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">String</span><span class="o">.</span><span class="n">split</span><span class="p" data-group-id="8602045272-5">(</span><span class="n">contents</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p" data-group-id="8602045272-5">)</span><span class="w">

  </span><span class="p" data-group-id="8602045272-6">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="c">_reason</span><span class="p" data-group-id="8602045272-6">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">Logger</span><span class="o">.</span><span class="n">warning</span><span class="w"> </span><span class="s">&quot;could not find </span><span class="si" data-group-id="8602045272-7">#{</span><span class="n">file</span><span class="si" data-group-id="8602045272-7">}</span><span class="s">, assuming empty...&quot;</span><span class="w">
    </span><span class="p" data-group-id="8602045272-8">[</span><span class="p" data-group-id="8602045272-8">]</span><span class="w">
</span><span class="k" data-group-id="8602045272-2">end</span></code></pre><p>In the example above, we match the result of <a href="File.html#read/1"><code class="inline">File.read/1</code></a>
against each clause &quot;head&quot; and execute the clause &quot;body&quot;
corresponding to the first clause that matches.</p><p>If no clause matches, an error is raised. For this reason,
it may be necessary to add a final catch-all clause (like <code class="inline">_</code>)
which will always match.</p><pre><code class="makeup elixir"><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">

</span><span class="k">case</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="k" data-group-id="4803630531-1">do</span><span class="w">
  </span><span class="mi">0</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="s">&quot;This clause won&#39;t match&quot;</span><span class="w">

  </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="s">&quot;This clause would match any value (x = </span><span class="si" data-group-id="4803630531-2">#{</span><span class="n">x</span><span class="si" data-group-id="4803630531-2">}</span><span class="s">)&quot;</span><span class="w">
</span><span class="k" data-group-id="4803630531-1">end</span><span class="w">
</span><span class="c1">#=&gt; &quot;This clause would match any value (x = 10)&quot;</span></code></pre><h2 id="case/2-variable-handling" class="section-heading">
  <a href="#case/2-variable-handling" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Variable handling
</h2>
<p>Note that variables bound in a clause do not leak to the outer context:</p><pre><code class="makeup elixir"><span class="k">case</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="k" data-group-id="5631090335-1">do</span><span class="w">
  </span><span class="p" data-group-id="5631090335-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="5631090335-2">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">value</span><span class="w">
  </span><span class="ss">:error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">nil</span><span class="w">
</span><span class="k" data-group-id="5631090335-1">end</span><span class="w">

</span><span class="n">value</span><span class="w">
</span><span class="c1">#=&gt; unbound variable value</span></code></pre><p>Variables in the outer context cannot be overridden either:</p><pre><code class="makeup elixir"><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">7</span><span class="w">

</span><span class="k">case</span><span class="w"> </span><span class="n">lucky?</span><span class="w"> </span><span class="k" data-group-id="3771054861-1">do</span><span class="w">
  </span><span class="no">false</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">13</span><span class="w">
  </span><span class="no">true</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="k" data-group-id="3771054861-1">end</span><span class="w">

</span><span class="n">value</span><span class="w">
</span><span class="c1">#=&gt; 7</span></code></pre><p>In the example above, <code class="inline">value</code> is going to be <code class="inline">7</code> regardless of the value of
<code class="inline">lucky?</code>. The variable <code class="inline">value</code> bound in the clause and the variable <code class="inline">value</code>
bound in the outer context are two entirely separate variables.</p><p>If you want to pattern match against an existing variable,
you need to use the <a href="#%5E/1"><code class="inline">^/1</code></a> operator:</p><pre><code class="makeup elixir"><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">

</span><span class="k">case</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="k" data-group-id="8819325381-1">do</span><span class="w">
  </span><span class="o">^</span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Won&#39;t match&quot;</span><span class="w">
  </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s">&quot;Will match&quot;</span><span class="w">
</span><span class="k" data-group-id="8819325381-1">end</span><span class="w">
</span><span class="c1">#=&gt; &quot;Will match&quot;</span></code></pre><h2 id="case/2-using-guards-to-match-against-multiple-values" class="section-heading">
  <a href="#case/2-using-guards-to-match-against-multiple-values" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Using guards to match against multiple values
</h2>
<p>While it is not possible to match against multiple patterns in a single
clause, it's possible to match against multiple values by using guards:</p><pre><code class="makeup elixir"><span class="k">case</span><span class="w"> </span><span class="n">data</span><span class="w"> </span><span class="k" data-group-id="0100400443-1">do</span><span class="w">
  </span><span class="n">value</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p" data-group-id="0100400443-2">[</span><span class="ss">:one</span><span class="p">,</span><span class="w"> </span><span class="ss">:two</span><span class="p" data-group-id="0100400443-2">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="s">&quot;</span><span class="si" data-group-id="0100400443-3">#{</span><span class="n">value</span><span class="si" data-group-id="0100400443-3">}</span><span class="s"> has been matched&quot;</span><span class="w">

  </span><span class="ss">:three</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="s">&quot;three has been matched&quot;</span><span class="w">
</span><span class="k" data-group-id="0100400443-1">end</span></code></pre>
  </section>
</section>
<section class="detail" id="cond/1">

  <div class="detail-header">
    <a href="#cond/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">cond(clauses)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1843" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Evaluates the expression corresponding to the first clause that
evaluates to a truthy value.</p><pre><code class="makeup elixir"><span class="k">cond</span><span class="w"> </span><span class="k" data-group-id="3468884453-1">do</span><span class="w">
  </span><span class="n">hd</span><span class="p" data-group-id="3468884453-2">(</span><span class="p" data-group-id="3468884453-3">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="3468884453-3">]</span><span class="p" data-group-id="3468884453-2">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="s">&quot;1 is considered as true&quot;</span><span class="w">
</span><span class="k" data-group-id="3468884453-1">end</span><span class="w">
</span><span class="c1">#=&gt; &quot;1 is considered as true&quot;</span></code></pre><p>Raises an error if all conditions evaluate to <code class="inline">nil</code> or <code class="inline">false</code>.
For this reason, it may be necessary to add a final always-truthy condition
(anything non-<code class="inline">false</code> and non-<code class="inline">nil</code>), which will always match.</p><h2 id="cond/1-examples" class="section-heading">
  <a href="#cond/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="k">cond</span><span class="w"> </span><span class="k" data-group-id="4659427723-1">do</span><span class="w">
  </span><span class="mi">1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="s">&quot;This will never match&quot;</span><span class="w">
  </span><span class="mi">2</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="s">&quot;Nor this&quot;</span><span class="w">
  </span><span class="no">true</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="s">&quot;This will&quot;</span><span class="w">
</span><span class="k" data-group-id="4659427723-1">end</span><span class="w">
</span><span class="c1">#=&gt; &quot;This will&quot;</span></code></pre>
  </section>
</section>
<section class="detail" id="fn/1">

  <div class="detail-header">
    <a href="#fn/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">fn</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1590" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Defines an anonymous function.</p><p>See <a href="Function.html"><code class="inline">Function</code></a> for more information.</p><h2 id="fn/1-examples" class="section-heading">
  <a href="#fn/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">add</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="4020404833-1">fn</span><span class="w"> </span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="k" data-group-id="4020404833-1">end</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">add</span><span class="o">.</span><span class="p" data-group-id="4020404833-2">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="4020404833-2">)</span><span class="w">
</span><span class="mi">3</span></code></pre><p>Anonymous functions can also have multiple clauses. All clauses
should expect the same number of arguments:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">negate</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="8706394133-1">fn</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="no">true</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">false</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="no">false</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">true</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="8706394133-1">end</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">negate</span><span class="o">.</span><span class="p" data-group-id="8706394133-2">(</span><span class="no">false</span><span class="p" data-group-id="8706394133-2">)</span><span class="w">
</span><span class="no">true</span></code></pre>
  </section>
</section>
<section class="detail" id="for/1">

  <div class="detail-header">
    <a href="#for/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">for(args)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1475" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Comprehensions allow you to quickly build a data structure from
an enumerable or a bitstring.</p><p>Let's start with an example:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p" data-group-id="3688405592-1">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="3688405592-1">]</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p" data-group-id="3688405592-2">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="3688405592-2">]</span></code></pre><p>A comprehension accepts many generators and filters. Enumerable
generators are defined using <code class="inline">&lt;-</code>:</p><pre><code class="makeup elixir"><span class="c1"># A list generator:</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p" data-group-id="6157029288-1">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="6157029288-1">]</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p" data-group-id="6157029288-2">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p">,</span><span class="w"> </span><span class="mi">8</span><span class="p" data-group-id="6157029288-2">]</span><span class="w">

</span><span class="c1"># A comprehension with two generators</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p" data-group-id="6157029288-3">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="6157029288-3">]</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p" data-group-id="6157029288-4">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="6157029288-4">]</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">y</span><span class="w">
</span><span class="p" data-group-id="6157029288-5">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p" data-group-id="6157029288-5">]</span></code></pre><p>Filters can also be given:</p><pre><code class="makeup elixir"><span class="c1"># A comprehension with a generator and a filter</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p" data-group-id="4285111156-1">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p" data-group-id="4285111156-1">]</span><span class="p">,</span><span class="w"> </span><span class="n">rem</span><span class="p" data-group-id="4285111156-2">(</span><span class="n">n</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="4285111156-2">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">n</span><span class="w">
</span><span class="p" data-group-id="4285111156-3">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p" data-group-id="4285111156-3">]</span></code></pre><p>Generators can also be used to filter as it removes any value
that doesn't match the pattern on the left side of <code class="inline">&lt;-</code>:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7927677357-1">[</span><span class="ss">user</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;john&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">admin</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;meg&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">guest</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;barbara&quot;</span><span class="p" data-group-id="7927677357-1">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="p" data-group-id="7927677357-2">{</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="7927677357-2">}</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">type</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="ss">:guest</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">users</span><span class="w"> </span><span class="k" data-group-id="7927677357-3">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="nc">String</span><span class="o">.</span><span class="n">upcase</span><span class="p" data-group-id="7927677357-4">(</span><span class="n">name</span><span class="p" data-group-id="7927677357-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="7927677357-3">end</span><span class="w">
</span><span class="p" data-group-id="7927677357-5">[</span><span class="s">&quot;JOHN&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;MEG&quot;</span><span class="p" data-group-id="7927677357-5">]</span></code></pre><p>Bitstring generators are also supported and are very useful when you
need to organize bitstring streams:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">pixels</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7255498794-1">&lt;&lt;</span><span class="mi">213</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="mi">132</span><span class="p">,</span><span class="w"> </span><span class="mi">64</span><span class="p">,</span><span class="w"> </span><span class="mi">76</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"> </span><span class="mi">76</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">234</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="7255498794-1">&gt;&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="p" data-group-id="7255498794-2">&lt;&lt;</span><span class="n">r</span><span class="o">::</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="o">::</span><span class="mi">8</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">::</span><span class="mi">8</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">pixels</span><span class="p" data-group-id="7255498794-2">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="7255498794-3">{</span><span class="n">r</span><span class="p">,</span><span class="w"> </span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="7255498794-3">}</span><span class="w">
</span><span class="p" data-group-id="7255498794-4">[</span><span class="p" data-group-id="7255498794-5">{</span><span class="mi">213</span><span class="p">,</span><span class="w"> </span><span class="mi">45</span><span class="p">,</span><span class="w"> </span><span class="mi">132</span><span class="p" data-group-id="7255498794-5">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7255498794-6">{</span><span class="mi">64</span><span class="p">,</span><span class="w"> </span><span class="mi">76</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p" data-group-id="7255498794-6">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7255498794-7">{</span><span class="mi">76</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p" data-group-id="7255498794-7">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7255498794-8">{</span><span class="mi">234</span><span class="p">,</span><span class="w"> </span><span class="mi">32</span><span class="p">,</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="7255498794-8">}</span><span class="p" data-group-id="7255498794-4">]</span></code></pre><p>Variable assignments inside the comprehension, be it in generators,
filters or inside the block, are not reflected outside of the
comprehension.</p><h2 id="for/1-the-into-and-uniq-options" class="section-heading">
  <a href="#for/1-the-into-and-uniq-options" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  The <code class="inline">:into</code> and <code class="inline">:uniq</code> options
</h2>
<p>In the examples above, the result returned by the comprehension was
always a list. The returned result can be configured by passing an
<code class="inline">:into</code> option, that accepts any structure as long as it implements
the <a href="Collectable.html"><code class="inline">Collectable</code></a> protocol.</p><p>For example, we can use bitstring generators with the <code class="inline">:into</code> option
to easily remove all spaces in a string:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="p" data-group-id="8113921039-1">&lt;&lt;</span><span class="n">c</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot; hello world &quot;</span><span class="p" data-group-id="8113921039-1">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="sc">?\s</span><span class="p">,</span><span class="w"> </span><span class="ss">into</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8113921039-2">&lt;&lt;</span><span class="n">c</span><span class="p" data-group-id="8113921039-2">&gt;&gt;</span><span class="w">
</span><span class="s">&quot;helloworld&quot;</span></code></pre><p>The <a href="IO.html"><code class="inline">IO</code></a> module provides streams, that are both <a href="Enumerable.html"><code class="inline">Enumerable</code></a> and
<a href="Collectable.html"><code class="inline">Collectable</code></a>, here is an upcase echo server using comprehensions:</p><pre><code class="makeup elixir"><span class="k">for</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">IO</span><span class="o">.</span><span class="n">stream</span><span class="p" data-group-id="1090766939-1">(</span><span class="ss">:stdio</span><span class="p">,</span><span class="w"> </span><span class="ss">:line</span><span class="p" data-group-id="1090766939-1">)</span><span class="p">,</span><span class="w"> </span><span class="ss">into</span><span class="p">:</span><span class="w"> </span><span class="nc">IO</span><span class="o">.</span><span class="n">stream</span><span class="p" data-group-id="1090766939-2">(</span><span class="ss">:stdio</span><span class="p">,</span><span class="w"> </span><span class="ss">:line</span><span class="p" data-group-id="1090766939-2">)</span><span class="w"> </span><span class="k" data-group-id="1090766939-3">do</span><span class="w">
  </span><span class="nc">String</span><span class="o">.</span><span class="n">upcase</span><span class="p" data-group-id="1090766939-4">(</span><span class="n">line</span><span class="p" data-group-id="1090766939-4">)</span><span class="w">
</span><span class="k" data-group-id="1090766939-3">end</span></code></pre><p>Similarly, <code class="inline">uniq: true</code> can also be given to comprehensions to guarantee
the results are only added to the collection if they were not returned
before. For example:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="p" data-group-id="9008691920-1">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="9008691920-1">]</span><span class="p">,</span><span class="w"> </span><span class="ss">uniq</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="p" data-group-id="9008691920-2">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">6</span><span class="p" data-group-id="9008691920-2">]</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="p" data-group-id="9008691920-3">&lt;&lt;</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;abcabc&quot;</span><span class="p" data-group-id="9008691920-3">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="ss">uniq</span><span class="p">:</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="ss">into</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9008691920-4">&lt;&lt;</span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="mi">32</span><span class="p" data-group-id="9008691920-4">&gt;&gt;</span><span class="w">
</span><span class="s">&quot;ABC&quot;</span></code></pre><h2 id="for/1-the-reduce-option" class="section-heading">
  <a href="#for/1-the-reduce-option" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  The <code class="inline">:reduce</code> option
</h2>
<p>While the <code class="inline">:into</code> option allows us to customize the comprehension behaviour
to a given data type, such as putting all of the values inside a map or inside
a binary, it is not always enough.</p><p>For example, imagine that you have a binary with letters where you want to
count how many times each lowercase letter happens, ignoring all uppercase
ones. For instance, for the string <code class="inline">&quot;AbCabCABc&quot;</code>, we want to return the map
<code class="inline">%{&quot;a&quot; =&gt; 1, &quot;b&quot; =&gt; 2, &quot;c&quot; =&gt; 1}</code>.</p><p>If we were to use <code class="inline">:into</code>, we would need a data type that computes the
frequency of each element it holds. While there is no such data type in
Elixir, you could implement one yourself.</p><p>A simpler option would be to use comprehensions for the mapping and
filtering of letters, and then we invoke <a href="Enum.html#reduce/3"><code class="inline">Enum.reduce/3</code></a> to build a map,
for example:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">letters</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">for</span><span class="w"> </span><span class="p" data-group-id="4765071545-1">&lt;&lt;</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;AbCabCABc&quot;</span><span class="p" data-group-id="4765071545-1">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="sc">?a</span><span class="o">.</span><span class="o">.</span><span class="sc">?z</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4765071545-2">&lt;&lt;</span><span class="n">x</span><span class="p" data-group-id="4765071545-2">&gt;&gt;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="nc">Enum</span><span class="o">.</span><span class="n">reduce</span><span class="p" data-group-id="4765071545-3">(</span><span class="n">letters</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4765071545-4">%{</span><span class="p" data-group-id="4765071545-4">}</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="4765071545-5">fn</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">acc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">update</span><span class="p" data-group-id="4765071545-6">(</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="4765071545-6">)</span><span class="w"> </span><span class="k" data-group-id="4765071545-5">end</span><span class="p" data-group-id="4765071545-3">)</span><span class="w">
</span><span class="p" data-group-id="4765071545-7">%{</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="4765071545-7">}</span></code></pre><p>While the above is straight-forward, it has the downside of traversing the
data at least twice. If you are expecting long strings as inputs, this can
be quite expensive.</p><p>Luckily, comprehensions also support the <code class="inline">:reduce</code> option, which would allow
us to fuse both steps above into a single step:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">for</span><span class="w"> </span><span class="p" data-group-id="5763455183-1">&lt;&lt;</span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s">&quot;AbCabCABc&quot;</span><span class="p" data-group-id="5763455183-1">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="sc">?a</span><span class="o">.</span><span class="o">.</span><span class="sc">?z</span><span class="p">,</span><span class="w"> </span><span class="ss">reduce</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="5763455183-2">%{</span><span class="p" data-group-id="5763455183-2">}</span><span class="w"> </span><span class="k" data-group-id="5763455183-3">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">acc</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">update</span><span class="p" data-group-id="5763455183-4">(</span><span class="n">acc</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5763455183-5">&lt;&lt;</span><span class="n">x</span><span class="p" data-group-id="5763455183-5">&gt;&gt;</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="ni">&amp;1</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="5763455183-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="5763455183-3">end</span><span class="w">
</span><span class="p" data-group-id="5763455183-6">%{</span><span class="s">&quot;a&quot;</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;b&quot;</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;c&quot;</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="5763455183-6">}</span></code></pre><p>When the <code class="inline">:reduce</code> key is given, its value is used as the initial accumulator
and the <code class="inline">do</code> block must be changed to use <code class="inline">-&gt;</code> clauses, where the left side
of <code class="inline">-&gt;</code> receives the accumulated value of the previous iteration and the
expression on the right side must return the new accumulator value. Once there are no more
elements, the final accumulated value is returned. If there are no elements
at all, then the initial accumulator value is returned.</p>
  </section>
</section>
<section class="detail" id="import/2">

  <div class="detail-header">
    <a href="#import/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">import(module, opts)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L683" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Imports functions and macros from other modules.</p><p><a href="#import/2"><code class="inline">import/2</code></a> allows one to easily access functions or macros from
other modules without using the qualified name.</p><h2 id="import/2-examples" class="section-heading">
  <a href="#import/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<p>If you are using several functions from a given module, you can
import those functions and reference them as local functions,
for example:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="kn">import</span><span class="w"> </span><span class="nc">List</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">flatten</span><span class="p" data-group-id="8368250092-1">(</span><span class="p" data-group-id="8368250092-2">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8368250092-3">[</span><span class="mi">2</span><span class="p" data-group-id="8368250092-3">]</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="8368250092-2">]</span><span class="p" data-group-id="8368250092-1">)</span><span class="w">
</span><span class="p" data-group-id="8368250092-4">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="8368250092-4">]</span></code></pre><h2 id="import/2-selector" class="section-heading">
  <a href="#import/2-selector" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Selector
</h2>
<p>By default, Elixir imports functions and macros from the given
module, except the ones starting with an underscore (which are
usually callbacks):</p><pre><code class="makeup elixir"><span class="kn">import</span><span class="w"> </span><span class="nc">List</span></code></pre><p>A developer can filter to import only macros or functions via
the only option:</p><pre><code class="makeup elixir"><span class="kn">import</span><span class="w"> </span><span class="nc">List</span><span class="p">,</span><span class="w"> </span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="ss">:functions</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">List</span><span class="p">,</span><span class="w"> </span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="ss">:macros</span></code></pre><p>Alternatively, Elixir allows a developer to pass pairs of
name/arities to <code class="inline">:only</code> or <code class="inline">:except</code> as a fine grained control
on what to import (or not):</p><pre><code class="makeup elixir"><span class="kn">import</span><span class="w"> </span><span class="nc">List</span><span class="p">,</span><span class="w"> </span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1869643919-1">[</span><span class="ss">flatten</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="1869643919-1">]</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">String</span><span class="p">,</span><span class="w"> </span><span class="ss">except</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="1869643919-2">[</span><span class="ss">split</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1869643919-2">]</span></code></pre><p>Importing the same module again will erase the previous imports,
except when the <code class="inline">except</code> option is used, which is always exclusive
on a previously declared <a href="#import/2"><code class="inline">import/2</code></a>. If there is no previous import,
then it applies to all functions and macros in the module. For
example:</p><pre><code class="makeup elixir"><span class="kn">import</span><span class="w"> </span><span class="nc">List</span><span class="p">,</span><span class="w"> </span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3866289311-1">[</span><span class="ss">flatten</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">keyfind</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="3866289311-1">]</span><span class="w">
</span><span class="kn">import</span><span class="w"> </span><span class="nc">List</span><span class="p">,</span><span class="w"> </span><span class="ss">except</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3866289311-2">[</span><span class="ss">flatten</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="3866289311-2">]</span></code></pre><p>After the two import calls above, only <a href="List.html#keyfind/4"><code class="inline">List.keyfind/4</code></a> will be
imported.</p><h2 id="import/2-underscore-functions" class="section-heading">
  <a href="#import/2-underscore-functions" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Underscore functions
</h2>
<p>By default functions starting with <code class="inline">_</code> are not imported. If you really want
to import a function starting with <code class="inline">_</code> you must explicitly include it in the
<code class="inline">:only</code> selector.</p><pre><code class="makeup elixir"><span class="kn">import</span><span class="w"> </span><span class="nc">File.Stream</span><span class="p">,</span><span class="w"> </span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4113684535-1">[</span><span class="ss">__build__</span><span class="p">:</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="4113684535-1">]</span></code></pre><h2 id="import/2-lexical-scope" class="section-heading">
  <a href="#import/2-lexical-scope" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Lexical scope
</h2>
<p>It is important to note that <a href="#import/2"><code class="inline">import/2</code></a> is lexical. This means you
can import specific macros inside specific functions:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Math</span><span class="w"> </span><span class="k" data-group-id="4859097126-1">do</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="nf">some_function</span><span class="w"> </span><span class="k" data-group-id="4859097126-2">do</span><span class="w">
    </span><span class="c1"># 1) Disable &quot;if/2&quot; from Kernel</span><span class="w">
    </span><span class="kn">import</span><span class="w"> </span><span class="nc">Kernel</span><span class="p">,</span><span class="w"> </span><span class="ss">except</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4859097126-3">[</span><span class="ss">if</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="4859097126-3">]</span><span class="w">

    </span><span class="c1"># 2) Require the new &quot;if/2&quot; macro from MyMacros</span><span class="w">
    </span><span class="kn">import</span><span class="w"> </span><span class="nc">MyMacros</span><span class="w">

    </span><span class="c1"># 3) Use the new macro</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="n">do_something</span><span class="p">,</span><span class="w"> </span><span class="n">it_works</span><span class="w">
  </span><span class="k" data-group-id="4859097126-2">end</span><span class="w">
</span><span class="k" data-group-id="4859097126-1">end</span></code></pre><p>In the example above, we imported macros from <code class="inline">MyMacros</code>,
replacing the original <a href="Kernel.html#if/2"><code class="inline">if/2</code></a> implementation by our own
within that specific function. All other functions in that
module will still be able to use the original one.</p><h2 id="import/2-warnings" class="section-heading">
  <a href="#import/2-warnings" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Warnings
</h2>
<p>If you import a module and you don't use any of the imported
functions or macros from this module, Elixir is going to issue
a warning implying the import is not being used.</p><p>In case the import is generated automatically by a macro,
Elixir won't emit any warnings though, since the import
was not explicitly defined.</p><p>Both warning behaviours could be changed by explicitly
setting the <code class="inline">:warn</code> option to <code class="inline">true</code> or <code class="inline">false</code>.</p><h2 id="import/2-ambiguous-function-macro-names" class="section-heading">
  <a href="#import/2-ambiguous-function-macro-names" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Ambiguous function/macro names
</h2>
<p>If two modules <code class="inline">A</code> and <code class="inline">B</code> are imported and they both contain
a <code class="inline">foo</code> function with an arity of <code class="inline">1</code>, an error is only emitted
if an ambiguous call to <code class="inline">foo/1</code> is actually made; that is, the
errors are emitted lazily, not eagerly.</p>
  </section>
</section>
<section class="detail" id="quote/2">

  <div class="detail-header">
    <a href="#quote/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">quote(opts, block)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1287" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Gets the representation of any expression.</p><h2 id="quote/2-examples" class="section-heading">
  <a href="#quote/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="3984363541-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">sum</span><span class="p" data-group-id="3984363541-2">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="3984363541-2">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="3984363541-1">end</span><span class="w">
</span><span class="p" data-group-id="3984363541-3">{</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3984363541-4">[</span><span class="p" data-group-id="3984363541-4">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3984363541-5">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="3984363541-5">]</span><span class="p" data-group-id="3984363541-3">}</span></code></pre><h2 id="quote/2-elixir-s-ast-abstract-syntax-tree" class="section-heading">
  <a href="#quote/2-elixir-s-ast-abstract-syntax-tree" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Elixir's AST (Abstract Syntax Tree)
</h2>
<p>Any Elixir code can be represented using Elixir data structures.
The building block of Elixir macros is a tuple with three elements,
for example:</p><pre><code class="makeup elixir"><span class="p" data-group-id="1726041302-1">{</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1726041302-2">[</span><span class="p" data-group-id="1726041302-2">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1726041302-3">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="1726041302-3">]</span><span class="p" data-group-id="1726041302-1">}</span></code></pre><p>The tuple above represents a function call to <code class="inline">sum</code> passing 1, 2 and
3 as arguments. The tuple elements are:</p><ul><li><p>The first element of the tuple is always an atom or
another tuple in the same representation.</p></li><li><p>The second element of the tuple represents <a href="Macro.html#t:metadata/0">metadata</a>.</p></li><li><p>The third element of the tuple are the arguments for the
function call. The third argument may be an atom, which is
usually a variable (or a local call).</p></li></ul><p>Besides the tuple described above, Elixir has a few literals that
are also part of its AST. Those literals return themselves when
quoted. They are:</p><pre><code class="makeup elixir"><span class="ss">:sum</span><span class="w">         </span><span class="c1">#=&gt; Atoms</span><span class="w">
</span><span class="mi">1</span><span class="w">            </span><span class="c1">#=&gt; Integers</span><span class="w">
</span><span class="mf">2.0</span><span class="w">          </span><span class="c1">#=&gt; Floats</span><span class="w">
</span><span class="p" data-group-id="1024909806-1">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="1024909806-1">]</span><span class="w">       </span><span class="c1">#=&gt; Lists</span><span class="w">
</span><span class="s">&quot;strings&quot;</span><span class="w">    </span><span class="c1">#=&gt; Strings</span><span class="w">
</span><span class="p" data-group-id="1024909806-2">{</span><span class="n">key</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="1024909806-2">}</span><span class="w"> </span><span class="c1">#=&gt; Tuples with two elements</span></code></pre><p>Any other value, such as a map or a four-element tuple, must be escaped
(<a href="Macro.html#escape/1"><code class="inline">Macro.escape/1</code></a>) before being introduced into an AST.</p><h2 id="quote/2-options" class="section-heading">
  <a href="#quote/2-options" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Options
</h2>
<ul><li><p><code class="inline">:bind_quoted</code> - passes a binding to the macro. Whenever a binding is
given, <a href="#unquote/1"><code class="inline">unquote/1</code></a> is automatically disabled.</p></li><li><p><code class="inline">:context</code> - sets the resolution context.</p></li><li><p><code class="inline">:generated</code> - marks the given chunk as generated so it does not emit warnings.
Currently it only works on special forms (for example, you can annotate a <code class="inline">case</code>
but not an <code class="inline">if</code>).</p></li><li><p><code class="inline">:file</code> - sets the quoted expressions to have the given file.</p></li><li><p><code class="inline">:line</code> - sets the quoted expressions to have the given line.</p></li><li><p><code class="inline">:location</code> - when set to <code class="inline">:keep</code>, keeps the current line and file from
quote. Read the &quot;Stacktrace information&quot; section below for more information.</p></li><li><p><code class="inline">:unquote</code> - when <code class="inline">false</code>, disables unquoting. This means any <code class="inline">unquote</code>
call will be kept as is in the AST, instead of replaced by the <code class="inline">unquote</code>
arguments. For example:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="0913117133-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="k">unquote</span><span class="p" data-group-id="0913117133-2">(</span><span class="s">&quot;hello&quot;</span><span class="p" data-group-id="0913117133-2">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="0913117133-1">end</span><span class="w">
</span><span class="s">&quot;hello&quot;</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="ss">unquote</span><span class="p">:</span><span class="w"> </span><span class="no">false</span><span class="w"> </span><span class="k" data-group-id="0913117133-3">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="k">unquote</span><span class="p" data-group-id="0913117133-4">(</span><span class="s">&quot;hello&quot;</span><span class="p" data-group-id="0913117133-4">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="0913117133-3">end</span><span class="w">
</span><span class="p" data-group-id="0913117133-5">{</span><span class="ss">:unquote</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0913117133-6">[</span><span class="p" data-group-id="0913117133-6">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0913117133-7">[</span><span class="s">&quot;hello&quot;</span><span class="p" data-group-id="0913117133-7">]</span><span class="p" data-group-id="0913117133-5">}</span></code></pre></li></ul><h2 id="quote/2-quote-and-macros" class="section-heading">
  <a href="#quote/2-quote-and-macros" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Quote and macros
</h2>
<p><a href="#quote/2"><code class="inline">quote/2</code></a> is commonly used with macros for code generation. As an exercise,
let's define a macro that multiplies a number by itself (squared). In practice,
there is no reason to define such a macro (and it would actually be
seen as a bad practice), but it is simple enough that it allows us to focus
on the important aspects of quotes and macros:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Math</span><span class="w"> </span><span class="k" data-group-id="2262353162-1">do</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">squared</span><span class="p" data-group-id="2262353162-2">(</span><span class="n">x</span><span class="p" data-group-id="2262353162-2">)</span><span class="w"> </span><span class="k" data-group-id="2262353162-3">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="2262353162-4">do</span><span class="w">
      </span><span class="k">unquote</span><span class="p" data-group-id="2262353162-5">(</span><span class="n">x</span><span class="p" data-group-id="2262353162-5">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="2262353162-6">(</span><span class="n">x</span><span class="p" data-group-id="2262353162-6">)</span><span class="w">
    </span><span class="k" data-group-id="2262353162-4">end</span><span class="w">
  </span><span class="k" data-group-id="2262353162-3">end</span><span class="w">
</span><span class="k" data-group-id="2262353162-1">end</span></code></pre><p>We can invoke it as:</p><pre><code class="makeup elixir"><span class="kn">import</span><span class="w"> </span><span class="nc">Math</span><span class="w">
</span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="3926767630-1">(</span><span class="s">&quot;Got </span><span class="si" data-group-id="3926767630-2">#{</span><span class="n">squared</span><span class="p" data-group-id="3926767630-3">(</span><span class="mi">5</span><span class="p" data-group-id="3926767630-3">)</span><span class="si" data-group-id="3926767630-2">}</span><span class="s">&quot;</span><span class="p" data-group-id="3926767630-1">)</span></code></pre><p>At first, there is nothing in this example that actually reveals it is a
macro. But what is happening is that, at compilation time, <code class="inline">squared(5)</code>
becomes <code class="inline">5 * 5</code>. The argument <code class="inline">5</code> is duplicated in the produced code, we
can see this behaviour in practice though because our macro actually has
a bug:</p><pre><code class="makeup elixir"><span class="kn">import</span><span class="w"> </span><span class="nc">Math</span><span class="w">
</span><span class="n">my_number</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k" data-group-id="8549878204-1">fn</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="8549878204-2">(</span><span class="s">&quot;Returning 5&quot;</span><span class="p" data-group-id="8549878204-2">)</span><span class="w">
  </span><span class="mi">5</span><span class="w">
</span><span class="k" data-group-id="8549878204-1">end</span><span class="w">
</span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="8549878204-3">(</span><span class="s">&quot;Got </span><span class="si" data-group-id="8549878204-4">#{</span><span class="n">squared</span><span class="p" data-group-id="8549878204-5">(</span><span class="n">my_number</span><span class="o">.</span><span class="p" data-group-id="8549878204-6">(</span><span class="p" data-group-id="8549878204-6">)</span><span class="p" data-group-id="8549878204-5">)</span><span class="si" data-group-id="8549878204-4">}</span><span class="s">&quot;</span><span class="p" data-group-id="8549878204-3">)</span></code></pre><p>The example above will print:</p><pre><code class="makeup elixir"><span class="nc">Returning</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="nc">Returning</span><span class="w"> </span><span class="mi">5</span><span class="w">
</span><span class="nc">Got</span><span class="w"> </span><span class="mi">25</span></code></pre><p>Notice how &quot;Returning 5&quot; was printed twice, instead of just once. This is
because a macro receives an expression and not a value (which is what we
would expect in a regular function). This means that:</p><pre><code class="makeup elixir"><span class="n">squared</span><span class="p" data-group-id="3771436534-1">(</span><span class="n">my_number</span><span class="o">.</span><span class="p" data-group-id="3771436534-2">(</span><span class="p" data-group-id="3771436534-2">)</span><span class="p" data-group-id="3771436534-1">)</span></code></pre><p>Actually expands to:</p><pre><code class="makeup elixir"><span class="n">my_number</span><span class="o">.</span><span class="p" data-group-id="3445965620-1">(</span><span class="p" data-group-id="3445965620-1">)</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">my_number</span><span class="o">.</span><span class="p" data-group-id="3445965620-2">(</span><span class="p" data-group-id="3445965620-2">)</span></code></pre><p>Which invokes the function twice, explaining why we get the printed value
twice! In the majority of the cases, this is actually unexpected behaviour,
and that's why one of the first things you need to keep in mind when it
comes to macros is to <strong>not unquote the same value more than once</strong>.</p><p>Let's fix our macro:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Math</span><span class="w"> </span><span class="k" data-group-id="8019188862-1">do</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">squared</span><span class="p" data-group-id="8019188862-2">(</span><span class="n">x</span><span class="p" data-group-id="8019188862-2">)</span><span class="w"> </span><span class="k" data-group-id="8019188862-3">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="8019188862-4">do</span><span class="w">
      </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="8019188862-5">(</span><span class="n">x</span><span class="p" data-group-id="8019188862-5">)</span><span class="w">
      </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="w">
    </span><span class="k" data-group-id="8019188862-4">end</span><span class="w">
  </span><span class="k" data-group-id="8019188862-3">end</span><span class="w">
</span><span class="k" data-group-id="8019188862-1">end</span></code></pre><p>Now invoking <code class="inline">squared(my_number.())</code> as before will print the value just
once.</p><p>In fact, this pattern is so common that most of the times you will want
to use the <code class="inline">bind_quoted</code> option with <a href="#quote/2"><code class="inline">quote/2</code></a>:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Math</span><span class="w"> </span><span class="k" data-group-id="3312974750-1">do</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">squared</span><span class="p" data-group-id="3312974750-2">(</span><span class="n">x</span><span class="p" data-group-id="3312974750-2">)</span><span class="w"> </span><span class="k" data-group-id="3312974750-3">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="ss">bind_quoted</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3312974750-4">[</span><span class="ss">x</span><span class="p">:</span><span class="w"> </span><span class="n">x</span><span class="p" data-group-id="3312974750-4">]</span><span class="w"> </span><span class="k" data-group-id="3312974750-5">do</span><span class="w">
      </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="w">
    </span><span class="k" data-group-id="3312974750-5">end</span><span class="w">
  </span><span class="k" data-group-id="3312974750-3">end</span><span class="w">
</span><span class="k" data-group-id="3312974750-1">end</span></code></pre><p><code class="inline">:bind_quoted</code> will translate to the same code as the example above.
<code class="inline">:bind_quoted</code> can be used in many cases and is seen as good practice,
not only because it helps prevent us from running into common mistakes, but also
because it allows us to leverage other tools exposed by macros, such as
unquote fragments discussed in some sections below.</p><p>Before we finish this brief introduction, you will notice that, even though
we defined a variable <code class="inline">x</code> inside our quote:</p><pre><code class="makeup elixir"><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="0152381448-1">do</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="0152381448-2">(</span><span class="n">x</span><span class="p" data-group-id="0152381448-2">)</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">x</span><span class="w">
</span><span class="k" data-group-id="0152381448-1">end</span></code></pre><p>When we call:</p><pre><code class="makeup elixir"><span class="kn">import</span><span class="w"> </span><span class="nc">Math</span><span class="w">
</span><span class="n">squared</span><span class="p" data-group-id="5963894613-1">(</span><span class="mi">5</span><span class="p" data-group-id="5963894613-1">)</span><span class="w">
</span><span class="n">x</span><span class="w">
</span><span class="gt">** (CompileError) undefined variable x or undefined function x/0</span></code></pre><p>We can see that <code class="inline">x</code> did not leak to the user context. This happens
because Elixir macros are hygienic, a topic we will discuss at length
in the next sections as well.</p><h2 id="quote/2-hygiene-in-variables" class="section-heading">
  <a href="#quote/2-hygiene-in-variables" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Hygiene in variables
</h2>
<p>Consider the following example:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w"> </span><span class="k" data-group-id="6040749106-1">do</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">no_interference</span><span class="w"> </span><span class="k" data-group-id="6040749106-2">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="6040749106-3">do</span><span class="w">
      </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k" data-group-id="6040749106-3">end</span><span class="w">
  </span><span class="k" data-group-id="6040749106-2">end</span><span class="w">
</span><span class="k" data-group-id="6040749106-1">end</span><span class="w">

</span><span class="kn">require</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w">

</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="nc">Hygiene</span><span class="o">.</span><span class="n">no_interference</span><span class="p" data-group-id="6040749106-4">(</span><span class="p" data-group-id="6040749106-4">)</span><span class="w">
</span><span class="n">a</span><span class="w">
</span><span class="c1">#=&gt; 10</span></code></pre><p>In the example above, <code class="inline">a</code> returns 10 even if the macro
is apparently setting it to 1 because variables defined
in the macro do not affect the context the macro is executed in.
If you want to set or get a variable in the caller's context, you
can do it with the help of the <code class="inline">var!</code> macro:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">NoHygiene</span><span class="w"> </span><span class="k" data-group-id="3785411445-1">do</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">interference</span><span class="w"> </span><span class="k" data-group-id="3785411445-2">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="3785411445-3">do</span><span class="w">
      </span><span class="n">var!</span><span class="p" data-group-id="3785411445-4">(</span><span class="n">a</span><span class="p" data-group-id="3785411445-4">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k" data-group-id="3785411445-3">end</span><span class="w">
  </span><span class="k" data-group-id="3785411445-2">end</span><span class="w">
</span><span class="k" data-group-id="3785411445-1">end</span><span class="w">

</span><span class="kn">require</span><span class="w"> </span><span class="nc">NoHygiene</span><span class="w">

</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span><span class="w">
</span><span class="nc">NoHygiene</span><span class="o">.</span><span class="n">interference</span><span class="p" data-group-id="3785411445-5">(</span><span class="p" data-group-id="3785411445-5">)</span><span class="w">
</span><span class="n">a</span><span class="w">
</span><span class="c1">#=&gt; 1</span></code></pre><p>You cannot even access variables defined in the same module unless
you explicitly give it a context:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w"> </span><span class="k" data-group-id="9438027393-1">do</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">write</span><span class="w"> </span><span class="k" data-group-id="9438027393-2">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="9438027393-3">do</span><span class="w">
      </span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k" data-group-id="9438027393-3">end</span><span class="w">
  </span><span class="k" data-group-id="9438027393-2">end</span><span class="w">

  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">read</span><span class="w"> </span><span class="k" data-group-id="9438027393-4">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="9438027393-5">do</span><span class="w">
      </span><span class="n">a</span><span class="w">
    </span><span class="k" data-group-id="9438027393-5">end</span><span class="w">
  </span><span class="k" data-group-id="9438027393-4">end</span><span class="w">
</span><span class="k" data-group-id="9438027393-1">end</span><span class="w">

</span><span class="nc">Hygiene</span><span class="o">.</span><span class="n">write</span><span class="p" data-group-id="9438027393-6">(</span><span class="p" data-group-id="9438027393-6">)</span><span class="w">
</span><span class="nc">Hygiene</span><span class="o">.</span><span class="n">read</span><span class="p" data-group-id="9438027393-7">(</span><span class="p" data-group-id="9438027393-7">)</span><span class="w">
</span><span class="gt">** (RuntimeError) undefined variable a or undefined function a/0</span></code></pre><p>For such, you can explicitly pass the current module scope as
argument:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">ContextHygiene</span><span class="w"> </span><span class="k" data-group-id="9537258220-1">do</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">write</span><span class="w"> </span><span class="k" data-group-id="9537258220-2">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="9537258220-3">do</span><span class="w">
      </span><span class="n">var!</span><span class="p" data-group-id="9537258220-4">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="nc">ContextHygiene</span><span class="p" data-group-id="9537258220-4">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="k" data-group-id="9537258220-3">end</span><span class="w">
  </span><span class="k" data-group-id="9537258220-2">end</span><span class="w">

  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">read</span><span class="w"> </span><span class="k" data-group-id="9537258220-5">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="9537258220-6">do</span><span class="w">
      </span><span class="n">var!</span><span class="p" data-group-id="9537258220-7">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="nc">ContextHygiene</span><span class="p" data-group-id="9537258220-7">)</span><span class="w">
    </span><span class="k" data-group-id="9537258220-6">end</span><span class="w">
  </span><span class="k" data-group-id="9537258220-5">end</span><span class="w">
</span><span class="k" data-group-id="9537258220-1">end</span><span class="w">

</span><span class="nc">ContextHygiene</span><span class="o">.</span><span class="n">write</span><span class="p" data-group-id="9537258220-8">(</span><span class="p" data-group-id="9537258220-8">)</span><span class="w">
</span><span class="nc">ContextHygiene</span><span class="o">.</span><span class="n">read</span><span class="p" data-group-id="9537258220-9">(</span><span class="p" data-group-id="9537258220-9">)</span><span class="w">
</span><span class="c1">#=&gt; 1</span></code></pre><h2 id="quote/2-hygiene-in-aliases" class="section-heading">
  <a href="#quote/2-hygiene-in-aliases" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Hygiene in aliases
</h2>
<p>Aliases inside quote are hygienic by default.
Consider the following example:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w"> </span><span class="k" data-group-id="6517341740-1">do</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Map</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="nc">M</span><span class="w">

  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">no_interference</span><span class="w"> </span><span class="k" data-group-id="6517341740-2">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="6517341740-3">do</span><span class="w">
      </span><span class="nc">M</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="6517341740-4">(</span><span class="p" data-group-id="6517341740-4">)</span><span class="w">
    </span><span class="k" data-group-id="6517341740-3">end</span><span class="w">
  </span><span class="k" data-group-id="6517341740-2">end</span><span class="w">
</span><span class="k" data-group-id="6517341740-1">end</span><span class="w">

</span><span class="kn">require</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w">
</span><span class="nc">Hygiene</span><span class="o">.</span><span class="n">no_interference</span><span class="p" data-group-id="6517341740-5">(</span><span class="p" data-group-id="6517341740-5">)</span><span class="w">
</span><span class="c1">#=&gt; %{}</span></code></pre><p>Note that, even though the alias <code class="inline">M</code> is not available
in the context the macro is expanded, the code above works
because <code class="inline">M</code> still expands to <a href="Map.html"><code class="inline">Map</code></a>.</p><p>Similarly, even if we defined an alias with the same name
before invoking a macro, it won't affect the macro's result:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w"> </span><span class="k" data-group-id="5853071764-1">do</span><span class="w">
  </span><span class="kn">alias</span><span class="w"> </span><span class="nc">Map</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="nc">M</span><span class="w">

  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">no_interference</span><span class="w"> </span><span class="k" data-group-id="5853071764-2">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="5853071764-3">do</span><span class="w">
      </span><span class="nc">M</span><span class="o">.</span><span class="n">new</span><span class="p" data-group-id="5853071764-4">(</span><span class="p" data-group-id="5853071764-4">)</span><span class="w">
    </span><span class="k" data-group-id="5853071764-3">end</span><span class="w">
  </span><span class="k" data-group-id="5853071764-2">end</span><span class="w">
</span><span class="k" data-group-id="5853071764-1">end</span><span class="w">

</span><span class="kn">require</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w">
</span><span class="kn">alias</span><span class="w"> </span><span class="nc">SomethingElse</span><span class="p">,</span><span class="w"> </span><span class="ss">as</span><span class="p">:</span><span class="w"> </span><span class="nc">M</span><span class="w">
</span><span class="nc">Hygiene</span><span class="o">.</span><span class="n">no_interference</span><span class="p" data-group-id="5853071764-5">(</span><span class="p" data-group-id="5853071764-5">)</span><span class="w">
</span><span class="c1">#=&gt; %{}</span></code></pre><p>In some cases, you want to access an alias or a module defined
in the caller. For such, you can use the <code class="inline">alias!</code> macro:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w"> </span><span class="k" data-group-id="2648704222-1">do</span><span class="w">
  </span><span class="c1"># This will expand to Elixir.Nested.hello()</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">no_interference</span><span class="w"> </span><span class="k" data-group-id="2648704222-2">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="2648704222-3">do</span><span class="w">
      </span><span class="nc">Nested</span><span class="o">.</span><span class="n">hello</span><span class="p" data-group-id="2648704222-4">(</span><span class="p" data-group-id="2648704222-4">)</span><span class="w">
    </span><span class="k" data-group-id="2648704222-3">end</span><span class="w">
  </span><span class="k" data-group-id="2648704222-2">end</span><span class="w">

  </span><span class="c1"># This will expand to Nested.hello() for</span><span class="w">
  </span><span class="c1"># whatever is Nested in the caller</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">interference</span><span class="w"> </span><span class="k" data-group-id="2648704222-5">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="2648704222-6">do</span><span class="w">
      </span><span class="n">alias!</span><span class="p" data-group-id="2648704222-7">(</span><span class="nc">Nested</span><span class="p" data-group-id="2648704222-7">)</span><span class="o">.</span><span class="n">hello</span><span class="p" data-group-id="2648704222-8">(</span><span class="p" data-group-id="2648704222-8">)</span><span class="w">
    </span><span class="k" data-group-id="2648704222-6">end</span><span class="w">
  </span><span class="k" data-group-id="2648704222-5">end</span><span class="w">
</span><span class="k" data-group-id="2648704222-1">end</span><span class="w">

</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Parent</span><span class="w"> </span><span class="k" data-group-id="2648704222-9">do</span><span class="w">
  </span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Nested</span><span class="w"> </span><span class="k" data-group-id="2648704222-10">do</span><span class="w">
    </span><span class="kd">def</span><span class="w"> </span><span class="nf">hello</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;world&quot;</span><span class="w">
  </span><span class="k" data-group-id="2648704222-10">end</span><span class="w">

  </span><span class="kn">require</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w">
  </span><span class="nc">Hygiene</span><span class="o">.</span><span class="n">no_interference</span><span class="p" data-group-id="2648704222-11">(</span><span class="p" data-group-id="2648704222-11">)</span><span class="w">
  </span><span class="gt">** (UndefinedFunctionError) ...</span><span class="w">

  </span><span class="nc">Hygiene</span><span class="o">.</span><span class="n">interference</span><span class="p" data-group-id="2648704222-12">(</span><span class="p" data-group-id="2648704222-12">)</span><span class="w">
  </span><span class="c1">#=&gt; &quot;world&quot;</span><span class="w">
</span><span class="k" data-group-id="2648704222-9">end</span></code></pre><h2 id="quote/2-hygiene-in-imports" class="section-heading">
  <a href="#quote/2-hygiene-in-imports" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Hygiene in imports
</h2>
<p>Similar to aliases, imports in Elixir are hygienic. Consider the
following code:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Hygiene</span><span class="w"> </span><span class="k" data-group-id="4642524164-1">do</span><span class="w">
  </span><span class="kd">defmacrop</span><span class="w"> </span><span class="nf">get_length</span><span class="w"> </span><span class="k" data-group-id="4642524164-2">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="4642524164-3">do</span><span class="w">
      </span><span class="n">length</span><span class="p" data-group-id="4642524164-4">(</span><span class="p" data-group-id="4642524164-5">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="4642524164-5">]</span><span class="p" data-group-id="4642524164-4">)</span><span class="w">
    </span><span class="k" data-group-id="4642524164-3">end</span><span class="w">
  </span><span class="k" data-group-id="4642524164-2">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">return_length</span><span class="w"> </span><span class="k" data-group-id="4642524164-6">do</span><span class="w">
    </span><span class="kn">import</span><span class="w"> </span><span class="nc">Kernel</span><span class="p">,</span><span class="w"> </span><span class="ss">except</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4642524164-7">[</span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="4642524164-7">]</span><span class="w">
    </span><span class="n">get_length</span><span class="w">
  </span><span class="k" data-group-id="4642524164-6">end</span><span class="w">
</span><span class="k" data-group-id="4642524164-1">end</span><span class="w">

</span><span class="nc">Hygiene</span><span class="o">.</span><span class="n">return_length</span><span class="p" data-group-id="4642524164-8">(</span><span class="p" data-group-id="4642524164-8">)</span><span class="w">
</span><span class="c1">#=&gt; 3</span></code></pre><p>Notice how <code class="inline">Hygiene.return_length/0</code> returns <code class="inline">3</code> even though the <a href="Kernel.html#length/1"><code class="inline">Kernel.length/1</code></a>
function is not imported. In fact, even if <code class="inline">return_length/0</code>
imported a function with the same name and arity from another
module, it wouldn't affect the function result:</p><pre><code class="makeup elixir"><span class="kd">def</span><span class="w"> </span><span class="nf">return_length</span><span class="w"> </span><span class="k" data-group-id="4833385715-1">do</span><span class="w">
  </span><span class="kn">import</span><span class="w"> </span><span class="nc">String</span><span class="p">,</span><span class="w"> </span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="4833385715-2">[</span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="4833385715-2">]</span><span class="w">
  </span><span class="n">get_length</span><span class="w">
</span><span class="k" data-group-id="4833385715-1">end</span></code></pre><p>Calling this new <code class="inline">return_length/0</code> will still return <code class="inline">3</code> as result.</p><p>Elixir is smart enough to delay the resolution to the latest
possible moment. So, if you call <code class="inline">length([1, 2, 3])</code> inside quote,
but no <a href="Kernel.html#length/1"><code class="inline">length/1</code></a> function is available, it is then expanded in
the caller:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Lazy</span><span class="w"> </span><span class="k" data-group-id="8483446850-1">do</span><span class="w">
  </span><span class="kd">defmacrop</span><span class="w"> </span><span class="nf">get_length</span><span class="w"> </span><span class="k" data-group-id="8483446850-2">do</span><span class="w">
    </span><span class="kn">import</span><span class="w"> </span><span class="nc">Kernel</span><span class="p">,</span><span class="w"> </span><span class="ss">except</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8483446850-3">[</span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="8483446850-3">]</span><span class="w">

    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="8483446850-4">do</span><span class="w">
      </span><span class="n">length</span><span class="p" data-group-id="8483446850-5">(</span><span class="s">&quot;hello&quot;</span><span class="p" data-group-id="8483446850-5">)</span><span class="w">
    </span><span class="k" data-group-id="8483446850-4">end</span><span class="w">
  </span><span class="k" data-group-id="8483446850-2">end</span><span class="w">

  </span><span class="kd">def</span><span class="w"> </span><span class="nf">return_length</span><span class="w"> </span><span class="k" data-group-id="8483446850-6">do</span><span class="w">
    </span><span class="kn">import</span><span class="w"> </span><span class="nc">Kernel</span><span class="p">,</span><span class="w"> </span><span class="ss">except</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8483446850-7">[</span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="8483446850-7">]</span><span class="w">
    </span><span class="kn">import</span><span class="w"> </span><span class="nc">String</span><span class="p">,</span><span class="w"> </span><span class="ss">only</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="8483446850-8">[</span><span class="ss">length</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="8483446850-8">]</span><span class="w">
    </span><span class="n">get_length</span><span class="w">
  </span><span class="k" data-group-id="8483446850-6">end</span><span class="w">
</span><span class="k" data-group-id="8483446850-1">end</span><span class="w">

</span><span class="nc">Lazy</span><span class="o">.</span><span class="n">return_length</span><span class="p" data-group-id="8483446850-9">(</span><span class="p" data-group-id="8483446850-9">)</span><span class="w">
</span><span class="c1">#=&gt; 5</span></code></pre><h2 id="quote/2-stacktrace-information" class="section-heading">
  <a href="#quote/2-stacktrace-information" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Stacktrace information
</h2>
<p>When defining functions via macros, developers have the option of
choosing if runtime errors will be reported from the caller or from
inside the quote. Let's see an example:</p><pre><code class="makeup elixir"><span class="c1"># adder.ex</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Adder</span><span class="w"> </span><span class="k" data-group-id="6182129154-1">do</span><span class="w">
  </span><span class="na">@doc</span><span class="w"> </span><span class="s">&quot;Defines a function that adds two numbers&quot;</span><span class="w">
  </span><span class="kd">defmacro</span><span class="w"> </span><span class="nf">defadd</span><span class="w"> </span><span class="k" data-group-id="6182129154-2">do</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="ss">location</span><span class="p">:</span><span class="w"> </span><span class="ss">:keep</span><span class="w"> </span><span class="k" data-group-id="6182129154-3">do</span><span class="w">
      </span><span class="kd">def</span><span class="w"> </span><span class="nf">add</span><span class="p" data-group-id="6182129154-4">(</span><span class="n">a</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="p" data-group-id="6182129154-4">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span><span class="w">
    </span><span class="k" data-group-id="6182129154-3">end</span><span class="w">
  </span><span class="k" data-group-id="6182129154-2">end</span><span class="w">
</span><span class="k" data-group-id="6182129154-1">end</span><span class="w">

</span><span class="c1"># sample.ex</span><span class="w">
</span><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Sample</span><span class="w"> </span><span class="k" data-group-id="6182129154-5">do</span><span class="w">
  </span><span class="kn">import</span><span class="w"> </span><span class="nc">Adder</span><span class="w">
  </span><span class="n">defadd</span><span class="w">
</span><span class="k" data-group-id="6182129154-5">end</span><span class="w">

</span><span class="kn">require</span><span class="w"> </span><span class="nc">Sample</span><span class="w">
</span><span class="nc">Sample</span><span class="o">.</span><span class="n">add</span><span class="p" data-group-id="6182129154-6">(</span><span class="ss">:one</span><span class="p">,</span><span class="w"> </span><span class="ss">:two</span><span class="p" data-group-id="6182129154-6">)</span><span class="w">
</span><span class="gt">** (ArithmeticError) bad argument in arithmetic expression
    adder.ex:5: Sample.add/2</span></code></pre><p>When using <code class="inline">location: :keep</code> and invalid arguments are given to
<code class="inline">Sample.add/2</code>, the stacktrace information will point to the file
and line inside the quote. Without <code class="inline">location: :keep</code>, the error is
reported to where <code class="inline">defadd</code> was invoked. <code class="inline">location: :keep</code> affects
only definitions inside the quote.</p><h2 id="quote/2-binding-and-unquote-fragments" class="section-heading">
  <a href="#quote/2-binding-and-unquote-fragments" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Binding and unquote fragments
</h2>
<p>Elixir quote/unquote mechanisms provide a functionality called
unquote fragments. Unquote fragments provide an easy way to generate
functions on the fly. Consider this example:</p><pre><code class="makeup elixir"><span class="n">kv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9368839402-1">[</span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="9368839402-1">]</span><span class="w">
</span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="9368839402-2">(</span><span class="n">kv</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9368839402-3">fn</span><span class="w"> </span><span class="p" data-group-id="9368839402-4">{</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p" data-group-id="9368839402-4">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
  </span><span class="kd">def</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="9368839402-5">(</span><span class="n">k</span><span class="p" data-group-id="9368839402-5">)</span><span class="p" data-group-id="9368839402-6">(</span><span class="p" data-group-id="9368839402-6">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="9368839402-7">(</span><span class="n">v</span><span class="p" data-group-id="9368839402-7">)</span><span class="w">
</span><span class="k" data-group-id="9368839402-3">end</span><span class="p" data-group-id="9368839402-2">)</span></code></pre><p>In the example above, we have generated the functions <code class="inline">foo/0</code> and
<code class="inline">bar/0</code> dynamically. Now, imagine that we want to convert this
functionality into a macro:</p><pre><code class="makeup elixir"><span class="kd">defmacro</span><span class="w"> </span><span class="nf">defkv</span><span class="p" data-group-id="2936446975-1">(</span><span class="n">kv</span><span class="p" data-group-id="2936446975-1">)</span><span class="w"> </span><span class="k" data-group-id="2936446975-2">do</span><span class="w">
  </span><span class="nc">Enum</span><span class="o">.</span><span class="n">map</span><span class="p" data-group-id="2936446975-3">(</span><span class="n">kv</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="2936446975-4">fn</span><span class="w"> </span><span class="p" data-group-id="2936446975-5">{</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p" data-group-id="2936446975-5">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="2936446975-6">do</span><span class="w">
      </span><span class="kd">def</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="2936446975-7">(</span><span class="n">k</span><span class="p" data-group-id="2936446975-7">)</span><span class="p" data-group-id="2936446975-8">(</span><span class="p" data-group-id="2936446975-8">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="2936446975-9">(</span><span class="n">v</span><span class="p" data-group-id="2936446975-9">)</span><span class="w">
    </span><span class="k" data-group-id="2936446975-6">end</span><span class="w">
  </span><span class="k" data-group-id="2936446975-4">end</span><span class="p" data-group-id="2936446975-3">)</span><span class="w">
</span><span class="k" data-group-id="2936446975-2">end</span></code></pre><p>We can invoke this macro as:</p><pre><code class="makeup elixir"><span class="n">defkv</span><span class="w"> </span><span class="p" data-group-id="9019986464-1">[</span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="9019986464-1">]</span></code></pre><p>However, we can't invoke it as follows:</p><pre><code class="makeup elixir"><span class="n">kv</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5349377979-1">[</span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">bar</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="p" data-group-id="5349377979-1">]</span><span class="w">
</span><span class="n">defkv</span><span class="w"> </span><span class="n">kv</span></code></pre><p>This is because the macro is expecting its arguments to be a
keyword list at <strong>compilation</strong> time. Since in the example above
we are passing the representation of the variable <code class="inline">kv</code>, our
code fails.</p><p>This is actually a common pitfall when developing macros. We are
assuming a particular shape in the macro. We can work around it
by unquoting the variable inside the quoted expression:</p><pre><code class="makeup elixir"><span class="kd">defmacro</span><span class="w"> </span><span class="nf">defkv</span><span class="p" data-group-id="9969058866-1">(</span><span class="n">kv</span><span class="p" data-group-id="9969058866-1">)</span><span class="w"> </span><span class="k" data-group-id="9969058866-2">do</span><span class="w">
  </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="9969058866-3">do</span><span class="w">
    </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="9969058866-4">(</span><span class="k">unquote</span><span class="p" data-group-id="9969058866-5">(</span><span class="n">kv</span><span class="p" data-group-id="9969058866-5">)</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9969058866-6">fn</span><span class="w"> </span><span class="p" data-group-id="9969058866-7">{</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p" data-group-id="9969058866-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="kd">def</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="9969058866-8">(</span><span class="n">k</span><span class="p" data-group-id="9969058866-8">)</span><span class="p" data-group-id="9969058866-9">(</span><span class="p" data-group-id="9969058866-9">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="9969058866-10">(</span><span class="n">v</span><span class="p" data-group-id="9969058866-10">)</span><span class="w">
    </span><span class="k" data-group-id="9969058866-6">end</span><span class="p" data-group-id="9969058866-4">)</span><span class="w">
  </span><span class="k" data-group-id="9969058866-3">end</span><span class="w">
</span><span class="k" data-group-id="9969058866-2">end</span></code></pre><p>If you try to run our new macro, you will notice it won't
even compile, complaining that the variables <code class="inline">k</code> and <code class="inline">v</code>
do not exist. This is because of the ambiguity: <code class="inline">unquote(k)</code>
can either be an unquote fragment, as previously, or a regular
unquote as in <code class="inline">unquote(kv)</code>.</p><p>One solution to this problem is to disable unquoting in the
macro, however, doing that would make it impossible to inject the
<code class="inline">kv</code> representation into the tree. That's when the <code class="inline">:bind_quoted</code>
option comes to the rescue (again!). By using <code class="inline">:bind_quoted</code>, we
can automatically disable unquoting while still injecting the
desired variables into the tree:</p><pre><code class="makeup elixir"><span class="kd">defmacro</span><span class="w"> </span><span class="nf">defkv</span><span class="p" data-group-id="9188212139-1">(</span><span class="n">kv</span><span class="p" data-group-id="9188212139-1">)</span><span class="w"> </span><span class="k" data-group-id="9188212139-2">do</span><span class="w">
  </span><span class="k">quote</span><span class="w"> </span><span class="ss">bind_quoted</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="9188212139-3">[</span><span class="ss">kv</span><span class="p">:</span><span class="w"> </span><span class="n">kv</span><span class="p" data-group-id="9188212139-3">]</span><span class="w"> </span><span class="k" data-group-id="9188212139-4">do</span><span class="w">
    </span><span class="nc">Enum</span><span class="o">.</span><span class="n">each</span><span class="p" data-group-id="9188212139-5">(</span><span class="n">kv</span><span class="p">,</span><span class="w"> </span><span class="k" data-group-id="9188212139-6">fn</span><span class="w"> </span><span class="p" data-group-id="9188212139-7">{</span><span class="n">k</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="p" data-group-id="9188212139-7">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="kd">def</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="9188212139-8">(</span><span class="n">k</span><span class="p" data-group-id="9188212139-8">)</span><span class="p" data-group-id="9188212139-9">(</span><span class="p" data-group-id="9188212139-9">)</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="9188212139-10">(</span><span class="n">v</span><span class="p" data-group-id="9188212139-10">)</span><span class="w">
    </span><span class="k" data-group-id="9188212139-6">end</span><span class="p" data-group-id="9188212139-5">)</span><span class="w">
  </span><span class="k" data-group-id="9188212139-4">end</span><span class="w">
</span><span class="k" data-group-id="9188212139-2">end</span></code></pre><p>In fact, the <code class="inline">:bind_quoted</code> option is recommended every time
one desires to inject a value into the quote.</p>
  </section>
</section>
<section class="detail" id="receive/1">

  <div class="detail-header">
    <a href="#receive/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">receive(args)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L2187" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Checks if there is a message matching the given clauses
in the current process mailbox.</p><p>In case there is no such message, the current process hangs
until a message arrives or waits until a given timeout value.</p><h2 id="receive/1-examples" class="section-heading">
  <a href="#receive/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="k">receive</span><span class="w"> </span><span class="k" data-group-id="0972715143-1">do</span><span class="w">
  </span><span class="p" data-group-id="0972715143-2">{</span><span class="ss">:selector</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="0972715143-2">}</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_integer</span><span class="p" data-group-id="0972715143-3">(</span><span class="n">number</span><span class="p" data-group-id="0972715143-3">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="n">name</span><span class="w">
  </span><span class="n">name</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_atom</span><span class="p" data-group-id="0972715143-4">(</span><span class="n">name</span><span class="p" data-group-id="0972715143-4">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="n">name</span><span class="w">
  </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="0972715143-5">(</span><span class="ss">:stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Unexpected message received&quot;</span><span class="p" data-group-id="0972715143-5">)</span><span class="w">
</span><span class="k" data-group-id="0972715143-1">end</span></code></pre><p>An optional <code class="inline">after</code> clause can be given in case the message was not
received after the given timeout period, specified in milliseconds:</p><pre><code class="makeup elixir"><span class="k">receive</span><span class="w"> </span><span class="k" data-group-id="9085709732-1">do</span><span class="w">
  </span><span class="p" data-group-id="9085709732-2">{</span><span class="ss">:selector</span><span class="p">,</span><span class="w"> </span><span class="n">number</span><span class="p">,</span><span class="w"> </span><span class="n">name</span><span class="p" data-group-id="9085709732-2">}</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_integer</span><span class="p" data-group-id="9085709732-3">(</span><span class="n">number</span><span class="p" data-group-id="9085709732-3">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="n">name</span><span class="w">
  </span><span class="n">name</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">is_atom</span><span class="p" data-group-id="9085709732-4">(</span><span class="n">name</span><span class="p" data-group-id="9085709732-4">)</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="n">name</span><span class="w">
  </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="9085709732-5">(</span><span class="ss">:stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Unexpected message received&quot;</span><span class="p" data-group-id="9085709732-5">)</span><span class="w">
</span><span class="k" data-group-id="9085709732-1">after</span><span class="w">
  </span><span class="mi">5000</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="9085709732-6">(</span><span class="ss">:stderr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;No message in 5 seconds&quot;</span><span class="p" data-group-id="9085709732-6">)</span><span class="w">
</span><span class="k" data-group-id="9085709732-1">end</span></code></pre><p>The <code class="inline">after</code> clause can be specified even if there are no match clauses.
The timeout value given to <code class="inline">after</code> can be any expression evaluating to
one of the allowed values:</p><ul><li><p><code class="inline">:infinity</code> - the process should wait indefinitely for a matching
message, this is the same as not using the after clause</p></li><li><p><code class="inline">0</code> - if there is no matching message in the mailbox, the timeout
will occur immediately</p></li><li><p>positive integer smaller than or equal to <code class="inline">4_294_967_295</code> (<code class="inline">0xFFFFFFFF</code>
in hexadecimal notation) - it should be possible to represent the timeout
value as an unsigned 32-bit integer.</p></li></ul><h2 id="receive/1-variable-handling" class="section-heading">
  <a href="#receive/1-variable-handling" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Variable handling
</h2>
<p>The <a href="#receive/1"><code class="inline">receive/1</code></a> special form handles variables exactly as the <a href="#case/2"><code class="inline">case/2</code></a>
special macro. For more information, check the docs for <a href="#case/2"><code class="inline">case/2</code></a>.</p>
  </section>
</section>
<section class="detail" id="require/2">

  <div class="detail-header">
    <a href="#require/2" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">require(module, opts)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L581" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Requires a module in order to use its macros.</p><h2 id="require/2-examples" class="section-heading">
  <a href="#require/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<p>Public functions in modules are globally available, but in order to use
macros, you need to opt-in by requiring the module they are defined in.</p><p>Let's suppose you created your own <a href="Kernel.html#if/2"><code class="inline">if/2</code></a> implementation in the module
<code class="inline">MyMacros</code>. If you want to invoke it, you need to first explicitly
require the <code class="inline">MyMacros</code>:</p><pre><code class="makeup elixir"><span class="kd">defmodule</span><span class="w"> </span><span class="nc">Math</span><span class="w"> </span><span class="k" data-group-id="9913928165-1">do</span><span class="w">
  </span><span class="kn">require</span><span class="w"> </span><span class="nc">MyMacros</span><span class="w">
  </span><span class="nc">MyMacros</span><span class="o">.</span><span class="k">if</span><span class="w"> </span><span class="n">do_something</span><span class="p">,</span><span class="w"> </span><span class="n">it_works</span><span class="w">
</span><span class="k" data-group-id="9913928165-1">end</span></code></pre><p>An attempt to call a macro that was not loaded will raise an error.</p><h2 id="require/2-alias-shortcut" class="section-heading">
  <a href="#require/2-alias-shortcut" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Alias shortcut
</h2>
<p><a href="#require/2"><code class="inline">require/2</code></a> also accepts <code class="inline">:as</code> as an option so it automatically sets
up an alias. Please check <a href="#alias/2"><code class="inline">alias/2</code></a> for more information.</p>
  </section>
</section>
<section class="detail" id="super/1">

  <div class="detail-header">
    <a href="#super/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">super(args)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1726" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Calls the overridden function when overriding it with <a href="Kernel.html#defoverridable/1"><code class="inline">Kernel.defoverridable/1</code></a>.</p><p>See <a href="Kernel.html#defoverridable/1"><code class="inline">Kernel.defoverridable/1</code></a> for more information and documentation.</p>
  </section>
</section>
<section class="detail" id="try/1">

  <div class="detail-header">
    <a href="#try/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">try(args)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L2133" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Evaluates the given expressions and handles any error, exit,
or throw that may have happened.</p><h2 id="try/1-examples" class="section-heading">
  <a href="#try/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="5871478770-1">do</span><span class="w">
  </span><span class="n">do_something_that_may_fail</span><span class="p" data-group-id="5871478770-2">(</span><span class="n">some_arg</span><span class="p" data-group-id="5871478770-2">)</span><span class="w">
</span><span class="k" data-group-id="5871478770-1">rescue</span><span class="w">
  </span><span class="nc">ArgumentError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="5871478770-3">(</span><span class="s">&quot;Invalid argument given&quot;</span><span class="p" data-group-id="5871478770-3">)</span><span class="w">
</span><span class="k" data-group-id="5871478770-1">catch</span><span class="w">
  </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="5871478770-4">(</span><span class="s">&quot;Caught </span><span class="si" data-group-id="5871478770-5">#{</span><span class="n">inspect</span><span class="p" data-group-id="5871478770-6">(</span><span class="n">value</span><span class="p" data-group-id="5871478770-6">)</span><span class="si" data-group-id="5871478770-5">}</span><span class="s">&quot;</span><span class="p" data-group-id="5871478770-4">)</span><span class="w">
</span><span class="k" data-group-id="5871478770-1">else</span><span class="w">
  </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="5871478770-7">(</span><span class="s">&quot;Success! The result was </span><span class="si" data-group-id="5871478770-8">#{</span><span class="n">inspect</span><span class="p" data-group-id="5871478770-9">(</span><span class="n">value</span><span class="p" data-group-id="5871478770-9">)</span><span class="si" data-group-id="5871478770-8">}</span><span class="s">&quot;</span><span class="p" data-group-id="5871478770-7">)</span><span class="w">
</span><span class="k" data-group-id="5871478770-1">after</span><span class="w">
  </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="5871478770-10">(</span><span class="s">&quot;This is printed regardless if it failed or succeeded&quot;</span><span class="p" data-group-id="5871478770-10">)</span><span class="w">
</span><span class="k" data-group-id="5871478770-1">end</span></code></pre><p>The <code class="inline">rescue</code> clause is used to handle exceptions while the <code class="inline">catch</code>
clause can be used to catch thrown values and exits.
The <code class="inline">else</code> clause can be used to control flow based on the result of
the expression. <code class="inline">catch</code>, <code class="inline">rescue</code>, and <code class="inline">else</code> clauses work based on
pattern matching (similar to the <code class="inline">case</code> special form).</p><p>Calls inside <a href="#try/1"><code class="inline">try/1</code></a> are not tail recursive since the VM needs to keep
the stacktrace in case an exception happens. To retrieve the stacktrace,
access <a href="#__STACKTRACE__/0"><code class="inline">__STACKTRACE__/0</code></a> inside the <code class="inline">rescue</code> or <code class="inline">catch</code> clause.</p><h2 id="try/1-rescue-clauses" class="section-heading">
  <a href="#try/1-rescue-clauses" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  <code class="inline">rescue</code> clauses
</h2>
<p>Besides relying on pattern matching, <code class="inline">rescue</code> clauses provide some
conveniences around exceptions that allow one to rescue an
exception by its name. All the following formats are valid patterns
in <code class="inline">rescue</code> clauses:</p><pre><code class="makeup elixir"><span class="c1"># Rescue a single exception without binding the exception</span><span class="w">
</span><span class="c1"># to a variable</span><span class="w">
</span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="3544798693-1">do</span><span class="w">
  </span><span class="nc">UndefinedModule</span><span class="o">.</span><span class="n">undefined_function</span><span class="w">
</span><span class="k" data-group-id="3544798693-1">rescue</span><span class="w">
  </span><span class="nc">UndefinedFunctionError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">nil</span><span class="w">
</span><span class="k" data-group-id="3544798693-1">end</span><span class="w">

</span><span class="c1"># Rescue any of the given exception without binding</span><span class="w">
</span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="3544798693-2">do</span><span class="w">
  </span><span class="nc">UndefinedModule</span><span class="o">.</span><span class="n">undefined_function</span><span class="w">
</span><span class="k" data-group-id="3544798693-2">rescue</span><span class="w">
  </span><span class="p" data-group-id="3544798693-3">[</span><span class="nc">UndefinedFunctionError</span><span class="p">,</span><span class="w"> </span><span class="nc">ArgumentError</span><span class="p" data-group-id="3544798693-3">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">nil</span><span class="w">
</span><span class="k" data-group-id="3544798693-2">end</span><span class="w">

</span><span class="c1"># Rescue and bind the exception to the variable &quot;x&quot;</span><span class="w">
</span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="3544798693-4">do</span><span class="w">
  </span><span class="nc">UndefinedModule</span><span class="o">.</span><span class="n">undefined_function</span><span class="w">
</span><span class="k" data-group-id="3544798693-4">rescue</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p" data-group-id="3544798693-5">[</span><span class="nc">UndefinedFunctionError</span><span class="p" data-group-id="3544798693-5">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">nil</span><span class="w">
</span><span class="k" data-group-id="3544798693-4">end</span><span class="w">

</span><span class="c1"># Rescue all kinds of exceptions and bind the rescued exception</span><span class="w">
</span><span class="c1"># to the variable &quot;x&quot;</span><span class="w">
</span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="3544798693-6">do</span><span class="w">
  </span><span class="nc">UndefinedModule</span><span class="o">.</span><span class="n">undefined_function</span><span class="w">
</span><span class="k" data-group-id="3544798693-6">rescue</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="no">nil</span><span class="w">
</span><span class="k" data-group-id="3544798693-6">end</span></code></pre><h3 id="try/1-erlang-errors" class="section-heading">
  <a href="#try/1-erlang-errors" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Erlang errors
</h3>
<p>Erlang errors are transformed into Elixir ones when rescuing:</p><pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="1266632532-1">do</span><span class="w">
  </span><span class="ss">:erlang</span><span class="o">.</span><span class="n">error</span><span class="p" data-group-id="1266632532-2">(</span><span class="ss">:badarg</span><span class="p" data-group-id="1266632532-2">)</span><span class="w">
</span><span class="k" data-group-id="1266632532-1">rescue</span><span class="w">
  </span><span class="nc">ArgumentError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ss">:ok</span><span class="w">
</span><span class="k" data-group-id="1266632532-1">end</span><span class="w">
</span><span class="c1">#=&gt; :ok</span></code></pre><p>The most common Erlang errors will be transformed into their
Elixir counterpart. Those which are not will be transformed
into the more generic <a href="ErlangError.html"><code class="inline">ErlangError</code></a>:</p><pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="5742192126-1">do</span><span class="w">
  </span><span class="ss">:erlang</span><span class="o">.</span><span class="n">error</span><span class="p" data-group-id="5742192126-2">(</span><span class="ss">:unknown</span><span class="p" data-group-id="5742192126-2">)</span><span class="w">
</span><span class="k" data-group-id="5742192126-1">rescue</span><span class="w">
  </span><span class="nc">ErlangError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ss">:ok</span><span class="w">
</span><span class="k" data-group-id="5742192126-1">end</span><span class="w">
</span><span class="c1">#=&gt; :ok</span></code></pre><p>In fact, <a href="ErlangError.html"><code class="inline">ErlangError</code></a> can be used to rescue any error that is
not a proper Elixir error. For example, it can be used to rescue
the earlier <code class="inline">:badarg</code> error too, prior to transformation:</p><pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="0536786238-1">do</span><span class="w">
  </span><span class="ss">:erlang</span><span class="o">.</span><span class="n">error</span><span class="p" data-group-id="0536786238-2">(</span><span class="ss">:badarg</span><span class="p" data-group-id="0536786238-2">)</span><span class="w">
</span><span class="k" data-group-id="0536786238-1">rescue</span><span class="w">
  </span><span class="nc">ErlangError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ss">:ok</span><span class="w">
</span><span class="k" data-group-id="0536786238-1">end</span><span class="w">
</span><span class="c1">#=&gt; :ok</span></code></pre><h2 id="try/1-catch-clauses" class="section-heading">
  <a href="#try/1-catch-clauses" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  <code class="inline">catch</code> clauses
</h2>
<p>The <code class="inline">catch</code> clause can be used to catch thrown values, exits, and errors.</p><h3 id="try/1-catching-thrown-values" class="section-heading">
  <a href="#try/1-catching-thrown-values" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Catching thrown values
</h3>
<p><code class="inline">catch</code> can be used to catch values thrown by <a href="Kernel.html#throw/1"><code class="inline">Kernel.throw/1</code></a>:</p><pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="5375089152-1">do</span><span class="w">
  </span><span class="k">throw</span><span class="p" data-group-id="5375089152-2">(</span><span class="ss">:some_value</span><span class="p" data-group-id="5375089152-2">)</span><span class="w">
</span><span class="k" data-group-id="5375089152-1">catch</span><span class="w">
  </span><span class="n">thrown_value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="5375089152-3">(</span><span class="s">&quot;A value was thrown: </span><span class="si" data-group-id="5375089152-4">#{</span><span class="n">inspect</span><span class="p" data-group-id="5375089152-5">(</span><span class="n">thrown_value</span><span class="p" data-group-id="5375089152-5">)</span><span class="si" data-group-id="5375089152-4">}</span><span class="s">&quot;</span><span class="p" data-group-id="5375089152-3">)</span><span class="w">
</span><span class="k" data-group-id="5375089152-1">end</span></code></pre><h3 id="try/1-catching-values-of-any-kind" class="section-heading">
  <a href="#try/1-catching-values-of-any-kind" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Catching values of any kind
</h3>
<p>The <code class="inline">catch</code> clause also supports catching exits and errors. To do that, it
allows matching on both the <em>kind</em> of the caught value as well as the value
itself:</p><pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="2643464561-1">do</span><span class="w">
  </span><span class="n">exit</span><span class="p" data-group-id="2643464561-2">(</span><span class="ss">:shutdown</span><span class="p" data-group-id="2643464561-2">)</span><span class="w">
</span><span class="k" data-group-id="2643464561-1">catch</span><span class="w">
  </span><span class="ss">:exit</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="2643464561-3">(</span><span class="s">&quot;Exited with value </span><span class="si" data-group-id="2643464561-4">#{</span><span class="n">inspect</span><span class="p" data-group-id="2643464561-5">(</span><span class="n">value</span><span class="p" data-group-id="2643464561-5">)</span><span class="si" data-group-id="2643464561-4">}</span><span class="s">&quot;</span><span class="p" data-group-id="2643464561-3">)</span><span class="w">
</span><span class="k" data-group-id="2643464561-1">end</span><span class="w">

</span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="2643464561-6">do</span><span class="w">
  </span><span class="n">exit</span><span class="p" data-group-id="2643464561-7">(</span><span class="ss">:shutdown</span><span class="p" data-group-id="2643464561-7">)</span><span class="w">
</span><span class="k" data-group-id="2643464561-6">catch</span><span class="w">
  </span><span class="n">kind</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">kind</span><span class="w"> </span><span class="ow">in</span><span class="w"> </span><span class="p" data-group-id="2643464561-8">[</span><span class="ss">:exit</span><span class="p">,</span><span class="w"> </span><span class="ss">:throw</span><span class="p" data-group-id="2643464561-8">]</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="nc">IO</span><span class="o">.</span><span class="n">puts</span><span class="p" data-group-id="2643464561-9">(</span><span class="s">&quot;Caught exit or throw with value </span><span class="si" data-group-id="2643464561-10">#{</span><span class="n">inspect</span><span class="p" data-group-id="2643464561-11">(</span><span class="n">value</span><span class="p" data-group-id="2643464561-11">)</span><span class="si" data-group-id="2643464561-10">}</span><span class="s">&quot;</span><span class="p" data-group-id="2643464561-9">)</span><span class="w">
</span><span class="k" data-group-id="2643464561-6">end</span></code></pre><p>The <code class="inline">catch</code> clause also supports <code class="inline">:error</code> alongside <code class="inline">:exit</code> and <code class="inline">:throw</code> as
in Erlang, although this is commonly avoided in favor of <code class="inline">raise</code>/<code class="inline">rescue</code> control
mechanisms. One reason for this is that when catching <code class="inline">:error</code>, the error is
not automatically transformed into an Elixir error:</p><pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="9633299040-1">do</span><span class="w">
  </span><span class="ss">:erlang</span><span class="o">.</span><span class="n">error</span><span class="p" data-group-id="9633299040-2">(</span><span class="ss">:badarg</span><span class="p" data-group-id="9633299040-2">)</span><span class="w">
</span><span class="k" data-group-id="9633299040-1">catch</span><span class="w">
  </span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:badarg</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ss">:ok</span><span class="w">
</span><span class="k" data-group-id="9633299040-1">end</span><span class="w">
</span><span class="c1">#=&gt; :ok</span></code></pre><h2 id="try/1-after-clauses" class="section-heading">
  <a href="#try/1-after-clauses" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  <code class="inline">after</code> clauses
</h2>
<p>An <code class="inline">after</code> clause allows you to define cleanup logic that will be invoked both
when the block of code passed to <a href="#try/1"><code class="inline">try/1</code></a> succeeds and also when an error is raised. Note
that the process will exit as usual when receiving an exit signal that causes
it to exit abruptly and so the <code class="inline">after</code> clause is not guaranteed to be executed.
Luckily, most resources in Elixir (such as open files, ETS tables, ports, sockets,
and so on) are linked to or monitor the owning process and will automatically clean
themselves up if that process exits.</p><pre><code class="makeup elixir"><span class="nc">File</span><span class="o">.</span><span class="n">write!</span><span class="p" data-group-id="0927615022-1">(</span><span class="s">&quot;tmp/story.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Hello, World&quot;</span><span class="p" data-group-id="0927615022-1">)</span><span class="w">
</span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="0927615022-2">do</span><span class="w">
  </span><span class="n">do_something_with</span><span class="p" data-group-id="0927615022-3">(</span><span class="s">&quot;tmp/story.txt&quot;</span><span class="p" data-group-id="0927615022-3">)</span><span class="w">
</span><span class="k" data-group-id="0927615022-2">after</span><span class="w">
  </span><span class="nc">File</span><span class="o">.</span><span class="n">rm</span><span class="p" data-group-id="0927615022-4">(</span><span class="s">&quot;tmp/story.txt&quot;</span><span class="p" data-group-id="0927615022-4">)</span><span class="w">
</span><span class="k" data-group-id="0927615022-2">end</span></code></pre><h2 id="try/1-else-clauses" class="section-heading">
  <a href="#try/1-else-clauses" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  <code class="inline">else</code> clauses
</h2>
<p><code class="inline">else</code> clauses allow the result of the body passed to <a href="#try/1"><code class="inline">try/1</code></a> to be pattern
matched on:</p><pre><code class="makeup elixir"><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="w">
</span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="5200211081-1">do</span><span class="w">
  </span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">x</span><span class="w">
</span><span class="k" data-group-id="5200211081-1">rescue</span><span class="w">
  </span><span class="nc">ArithmeticError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="ss">:infinity</span><span class="w">
</span><span class="k" data-group-id="5200211081-1">else</span><span class="w">
  </span><span class="n">y</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="ow">and</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="ss">:small</span><span class="w">
  </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="ss">:large</span><span class="w">
</span><span class="k" data-group-id="5200211081-1">end</span></code></pre><p>If an <code class="inline">else</code> clause is not present and no exceptions are raised,
the result of the expression will be returned:</p><pre><code class="makeup elixir"><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="o">^</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="1745996602-1">do</span><span class="w">
    </span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">x</span><span class="w">
  </span><span class="k" data-group-id="1745996602-1">rescue</span><span class="w">
    </span><span class="nc">ArithmeticError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="ss">:infinity</span><span class="w">
  </span><span class="k" data-group-id="1745996602-1">end</span></code></pre><p>However, when an <code class="inline">else</code> clause is present but the result of the expression
does not match any of the patterns then an exception will be raised. This
exception will not be caught by a <code class="inline">catch</code> or <code class="inline">rescue</code> in the same <code class="inline">try</code>:</p><pre><code class="makeup elixir"><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
</span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="5984099248-1">do</span><span class="w">
  </span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="5984099248-2">do</span><span class="w">
    </span><span class="mi">1</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="n">x</span><span class="w">
  </span><span class="k" data-group-id="5984099248-2">rescue</span><span class="w">
    </span><span class="c1"># The TryClauseError cannot be rescued here:</span><span class="w">
    </span><span class="nc">TryClauseError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="ss">:error_a</span><span class="w">
  </span><span class="k" data-group-id="5984099248-2">else</span><span class="w">
    </span><span class="mi">0</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="ss">:small</span><span class="w">
  </span><span class="k" data-group-id="5984099248-2">end</span><span class="w">
</span><span class="k" data-group-id="5984099248-1">rescue</span><span class="w">
  </span><span class="c1"># The TryClauseError is rescued here:</span><span class="w">
  </span><span class="nc">TryClauseError</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="ss">:error_b</span><span class="w">
</span><span class="k" data-group-id="5984099248-1">end</span></code></pre><p>Similarly, an exception inside an <code class="inline">else</code> clause is not caught or rescued
inside the same <code class="inline">try</code>:</p><pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="7274210302-1">do</span><span class="w">
  </span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="7274210302-2">do</span><span class="w">
    </span><span class="no">nil</span><span class="w">
  </span><span class="k" data-group-id="7274210302-2">catch</span><span class="w">
    </span><span class="c1"># The exit(1) call below can not be caught here:</span><span class="w">
    </span><span class="ss">:exit</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="ss">:exit_a</span><span class="w">
  </span><span class="k" data-group-id="7274210302-2">else</span><span class="w">
    </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
      </span><span class="n">exit</span><span class="p" data-group-id="7274210302-3">(</span><span class="mi">1</span><span class="p" data-group-id="7274210302-3">)</span><span class="w">
  </span><span class="k" data-group-id="7274210302-2">end</span><span class="w">
</span><span class="k" data-group-id="7274210302-1">catch</span><span class="w">
  </span><span class="c1"># The exit is caught here:</span><span class="w">
  </span><span class="ss">:exit</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="ss">:exit_b</span><span class="w">
</span><span class="k" data-group-id="7274210302-1">end</span></code></pre><p>This means the VM no longer needs to keep the stacktrace once inside
an <code class="inline">else</code> clause and so tail recursion is possible when using a <code class="inline">try</code>
with a tail call as the final call inside an <code class="inline">else</code> clause. The same
is true for <code class="inline">rescue</code> and <code class="inline">catch</code> clauses.</p><p>Only the result of the tried expression falls down to the <code class="inline">else</code> clause.
If the <code class="inline">try</code> ends up in the <code class="inline">rescue</code> or <code class="inline">catch</code> clauses, their result
will not fall down to <code class="inline">else</code>:</p><pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="2643954556-1">do</span><span class="w">
  </span><span class="k">throw</span><span class="p" data-group-id="2643954556-2">(</span><span class="ss">:catch_this</span><span class="p" data-group-id="2643954556-2">)</span><span class="w">
</span><span class="k" data-group-id="2643954556-1">catch</span><span class="w">
  </span><span class="ss">:throw</span><span class="p">,</span><span class="w"> </span><span class="ss">:catch_this</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="ss">:it_was_caught</span><span class="w">
</span><span class="k" data-group-id="2643954556-1">else</span><span class="w">
  </span><span class="c1"># :it_was_caught will not fall down to this &quot;else&quot; clause.</span><span class="w">
  </span><span class="n">other</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="2643954556-3">{</span><span class="ss">:else</span><span class="p">,</span><span class="w"> </span><span class="n">other</span><span class="p" data-group-id="2643954556-3">}</span><span class="w">
</span><span class="k" data-group-id="2643954556-1">end</span></code></pre><h2 id="try/1-variable-handling" class="section-heading">
  <a href="#try/1-variable-handling" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Variable handling
</h2>
<p>Since an expression inside <code class="inline">try</code> may not have been evaluated
due to an exception, any variable created inside <code class="inline">try</code> cannot
be accessed externally. For instance:</p><pre><code class="makeup elixir"><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="3455505311-1">do</span><span class="w">
  </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
  </span><span class="n">do_something_that_may_fail</span><span class="p" data-group-id="3455505311-2">(</span><span class="n">same_arg</span><span class="p" data-group-id="3455505311-2">)</span><span class="w">
  </span><span class="ss">:ok</span><span class="w">
</span><span class="k" data-group-id="3455505311-1">catch</span><span class="w">
  </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ss">:failed</span><span class="w">
</span><span class="k" data-group-id="3455505311-1">end</span><span class="w">

</span><span class="n">x</span><span class="w">
</span><span class="c1">#=&gt; unbound variable &quot;x&quot;</span></code></pre><p>In the example above, <code class="inline">x</code> cannot be accessed since it was defined
inside the <code class="inline">try</code> clause. A common practice to address this issue
is to return the variables defined inside <code class="inline">try</code>:</p><pre><code class="makeup elixir"><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="k">try</span><span class="w"> </span><span class="k" data-group-id="6680037767-1">do</span><span class="w">
    </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="w">
    </span><span class="n">do_something_that_may_fail</span><span class="p" data-group-id="6680037767-2">(</span><span class="n">same_arg</span><span class="p" data-group-id="6680037767-2">)</span><span class="w">
    </span><span class="n">x</span><span class="w">
  </span><span class="k" data-group-id="6680037767-1">catch</span><span class="w">
    </span><span class="bp">_</span><span class="p">,</span><span class="w"> </span><span class="bp">_</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="ss">:failed</span><span class="w">
  </span><span class="k" data-group-id="6680037767-1">end</span></code></pre>
  </section>
</section>
<section class="detail" id="unquote/1">

  <div class="detail-header">
    <a href="#unquote/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">unquote(expr)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1339" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Unquotes the given expression inside a quoted expression.</p><p>This function expects a valid Elixir AST, also known as
quoted expression, as argument. If you would like to <code class="inline">unquote</code>
any value, such as a map or a four-element tuple, you should
call <a href="Macro.html#escape/1"><code class="inline">Macro.escape/1</code></a> before unquoting.</p><h2 id="unquote/1-examples" class="section-heading">
  <a href="#unquote/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<p>Imagine the situation you have a quoted expression and
you want to inject it inside some quote. The first attempt
would be:</p><pre><code class="makeup elixir"><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w">
  </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="3633525078-1">do</span><span class="w">
    </span><span class="mi">13</span><span class="w">
  </span><span class="k" data-group-id="3633525078-1">end</span><span class="w">

</span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="3633525078-2">do</span><span class="w">
  </span><span class="n">sum</span><span class="p" data-group-id="3633525078-3">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="3633525078-3">)</span><span class="w">
</span><span class="k" data-group-id="3633525078-2">end</span></code></pre><p>Which would then return:</p><pre><code class="makeup elixir"><span class="p" data-group-id="7687003369-1">{</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7687003369-2">[</span><span class="p" data-group-id="7687003369-2">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7687003369-3">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7687003369-4">{</span><span class="ss">:value</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7687003369-5">[</span><span class="p" data-group-id="7687003369-5">]</span><span class="p">,</span><span class="w"> </span><span class="nc">Elixir</span><span class="p" data-group-id="7687003369-4">}</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="7687003369-3">]</span><span class="p" data-group-id="7687003369-1">}</span></code></pre><p>Which is not the expected result. For this, we use <code class="inline">unquote</code>:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="0449104759-1">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="mi">13</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="k" data-group-id="0449104759-1">end</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="0449104759-2">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">sum</span><span class="p" data-group-id="0449104759-3">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k">unquote</span><span class="p" data-group-id="0449104759-4">(</span><span class="n">value</span><span class="p" data-group-id="0449104759-4">)</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="0449104759-3">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="0449104759-2">end</span><span class="w">
</span><span class="p" data-group-id="0449104759-5">{</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0449104759-6">[</span><span class="p" data-group-id="0449104759-6">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0449104759-7">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">13</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p" data-group-id="0449104759-7">]</span><span class="p" data-group-id="0449104759-5">}</span></code></pre><p>If you want to unquote a value that is not a quoted expression,
such as a map, you need to call <a href="Macro.html#escape/1"><code class="inline">Macro.escape/1</code></a> before:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="1134416750-1">%{</span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="ss">:bar</span><span class="p" data-group-id="1134416750-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="1134416750-2">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">process_map</span><span class="p" data-group-id="1134416750-3">(</span><span class="k">unquote</span><span class="p" data-group-id="1134416750-4">(</span><span class="nc">Macro</span><span class="o">.</span><span class="n">escape</span><span class="p" data-group-id="1134416750-5">(</span><span class="n">value</span><span class="p" data-group-id="1134416750-5">)</span><span class="p" data-group-id="1134416750-4">)</span><span class="p" data-group-id="1134416750-3">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="1134416750-2">end</span><span class="w">
</span><span class="p" data-group-id="1134416750-6">{</span><span class="ss">:process_map</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1134416750-7">[</span><span class="p" data-group-id="1134416750-7">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1134416750-8">[</span><span class="p" data-group-id="1134416750-9">{</span><span class="ss">:%{}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1134416750-10">[</span><span class="p" data-group-id="1134416750-10">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1134416750-11">[</span><span class="ss">foo</span><span class="p">:</span><span class="w"> </span><span class="ss">:bar</span><span class="p" data-group-id="1134416750-11">]</span><span class="p" data-group-id="1134416750-9">}</span><span class="p" data-group-id="1134416750-8">]</span><span class="p" data-group-id="1134416750-6">}</span></code></pre><p>If you forget to escape it, Elixir will raise an error
when compiling the code.</p>
  </section>
</section>
<section class="detail" id="unquote_splicing/1">

  <div class="detail-header">
    <a href="#unquote_splicing/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">unquote_splicing(expr)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1355" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Unquotes the given list expanding its arguments.</p><p>Similar to <a href="#unquote/1"><code class="inline">unquote/1</code></a>.</p><h2 id="unquote_splicing/1-examples" class="section-heading">
  <a href="#unquote_splicing/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">values</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9749245803-1">[</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p" data-group-id="9749245803-1">]</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">quote</span><span class="w"> </span><span class="k" data-group-id="9749245803-2">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="n">sum</span><span class="p" data-group-id="9749245803-3">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="k">unquote_splicing</span><span class="p" data-group-id="9749245803-4">(</span><span class="n">values</span><span class="p" data-group-id="9749245803-4">)</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="9749245803-3">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="9749245803-2">end</span><span class="w">
</span><span class="p" data-group-id="9749245803-5">{</span><span class="ss">:sum</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9749245803-6">[</span><span class="p" data-group-id="9749245803-6">]</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9749245803-7">[</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="p">,</span><span class="w"> </span><span class="mi">4</span><span class="p">,</span><span class="w"> </span><span class="mi">5</span><span class="p" data-group-id="9749245803-7">]</span><span class="p" data-group-id="9749245803-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="with/1">

  <div class="detail-header">
    <a href="#with/1" class="detail-link" title="Link to this macro">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this macro</span>
    </a>
    <h1 class="signature">with(args)</h1>

      <a href="https://github.com/elixir-lang/elixir/blob/fb151383ab866230694712690fe9a583dc32a9db/lib/elixir/lib/kernel/special_forms.ex#L1566" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


      <span class="note">(macro)</span>

  </div>

  <section class="docstring">

<p>Used to combine matching clauses.</p><p>Let's start with an example:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="7957673536-1">%{</span><span class="ss">width</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">height</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="7957673536-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">with</span><span class="w"> </span><span class="p" data-group-id="7957673536-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p" data-group-id="7957673536-2">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="7957673536-3">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:width</span><span class="p" data-group-id="7957673536-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">     </span><span class="p" data-group-id="7957673536-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="7957673536-4">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="7957673536-5">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:height</span><span class="p" data-group-id="7957673536-5">)</span><span class="w"> </span><span class="k" data-group-id="7957673536-6">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="7957673536-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="7957673536-7">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="7957673536-6">end</span><span class="w">
</span><span class="p" data-group-id="7957673536-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p" data-group-id="7957673536-8">}</span></code></pre><p>If all clauses match, the <code class="inline">do</code> block is executed, returning its result.
Otherwise the chain is aborted and the non-matched value is returned:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="4528249481-1">%{</span><span class="ss">width</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="4528249481-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">with</span><span class="w"> </span><span class="p" data-group-id="4528249481-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p" data-group-id="4528249481-2">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="4528249481-3">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:width</span><span class="p" data-group-id="4528249481-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">     </span><span class="p" data-group-id="4528249481-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="4528249481-4">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="4528249481-5">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:height</span><span class="p" data-group-id="4528249481-5">)</span><span class="w"> </span><span class="k" data-group-id="4528249481-6">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="4528249481-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="4528249481-7">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="4528249481-6">end</span><span class="w">
</span><span class="ss">:error</span></code></pre><p>Guards can be used in patterns as well:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">users</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="9144433054-1">%{</span><span class="s">&quot;melany&quot;</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="s">&quot;guest&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bob&quot;</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="ss">:admin</span><span class="p" data-group-id="9144433054-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">with</span><span class="w"> </span><span class="p" data-group-id="9144433054-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">role</span><span class="p" data-group-id="9144433054-2">}</span><span class="w"> </span><span class="ow">when</span><span class="w"> </span><span class="ow">not</span><span class="w"> </span><span class="n">is_binary</span><span class="p" data-group-id="9144433054-3">(</span><span class="n">role</span><span class="p" data-group-id="9144433054-3">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="9144433054-4">(</span><span class="n">users</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;bob&quot;</span><span class="p" data-group-id="9144433054-4">)</span><span class="w"> </span><span class="k" data-group-id="9144433054-5">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="9144433054-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">to_string</span><span class="p" data-group-id="9144433054-7">(</span><span class="n">role</span><span class="p" data-group-id="9144433054-7">)</span><span class="p" data-group-id="9144433054-6">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="9144433054-5">end</span><span class="w">
</span><span class="p" data-group-id="9144433054-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;admin&quot;</span><span class="p" data-group-id="9144433054-8">}</span></code></pre><p>As in <a href="#for/1"><code class="inline">for/1</code></a>, variables bound inside <a href="#with/1"><code class="inline">with/1</code></a> won't leak.
Expressions without <code class="inline">&lt;-</code> may also be used in clauses. For instance,
you can perform regular matches with the <code class="inline">=</code> operator:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="no">nil</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="6641814575-1">%{</span><span class="ss">width</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">height</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="6641814575-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">with</span><span class="w"> </span><span class="p" data-group-id="6641814575-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p" data-group-id="6641814575-2">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="6641814575-3">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:width</span><span class="p" data-group-id="6641814575-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">     </span><span class="n">double_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">     </span><span class="p" data-group-id="6641814575-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="6641814575-4">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="6641814575-5">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:height</span><span class="p" data-group-id="6641814575-5">)</span><span class="w"> </span><span class="k" data-group-id="6641814575-6">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="6641814575-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">double_width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="6641814575-7">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="6641814575-6">end</span><span class="w">
</span><span class="p" data-group-id="6641814575-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">300</span><span class="p" data-group-id="6641814575-8">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">width</span><span class="w">
</span><span class="no">nil</span></code></pre><p>The behaviour of any expression in a clause is the same as outside.
For example, <code class="inline">=</code> will raise a <a href="MatchError.html"><code class="inline">MatchError</code></a> instead of returning the
non-matched value:</p><pre><code class="makeup elixir"><span class="k">with</span><span class="w"> </span><span class="ss">:foo</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="ss">:bar</span><span class="p">,</span><span class="w"> </span><span class="ss">do</span><span class="p">:</span><span class="w"> </span><span class="ss">:ok</span><span class="w">
</span><span class="gt">** (MatchError) no match of right hand side value: :bar</span></code></pre><p>As with any other function or macro call in Elixir, explicit parens can
also be used around the arguments before the <code class="inline">do</code>/<code class="inline">end</code> block:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="5676176015-1">%{</span><span class="ss">width</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p">,</span><span class="w"> </span><span class="ss">height</span><span class="p">:</span><span class="w"> </span><span class="mi">15</span><span class="p" data-group-id="5676176015-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">with</span><span class="p" data-group-id="5676176015-2">(</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="5676176015-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p" data-group-id="5676176015-3">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="5676176015-4">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:width</span><span class="p" data-group-id="5676176015-4">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="5676176015-5">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="5676176015-5">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="5676176015-6">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:height</span><span class="p" data-group-id="5676176015-6">)</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="p" data-group-id="5676176015-2">)</span><span class="w"> </span><span class="k" data-group-id="5676176015-7">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="5676176015-8">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="5676176015-8">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="5676176015-7">end</span><span class="w">
</span><span class="p" data-group-id="5676176015-9">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="mi">150</span><span class="p" data-group-id="5676176015-9">}</span></code></pre><p>The choice between parens and no parens is a matter of preference.</p><p>An <code class="inline">else</code> option can be given to modify what is being returned from
<code class="inline">with</code> in the case of a failed match:</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">opts</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p" data-group-id="3153096308-1">%{</span><span class="ss">width</span><span class="p">:</span><span class="w"> </span><span class="mi">10</span><span class="p" data-group-id="3153096308-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="k">with</span><span class="w"> </span><span class="p" data-group-id="3153096308-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p" data-group-id="3153096308-2">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="3153096308-3">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:width</span><span class="p" data-group-id="3153096308-3">)</span><span class="p">,</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">     </span><span class="p" data-group-id="3153096308-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="3153096308-4">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nc">Map</span><span class="o">.</span><span class="n">fetch</span><span class="p" data-group-id="3153096308-5">(</span><span class="n">opts</span><span class="p">,</span><span class="w"> </span><span class="ss">:height</span><span class="p" data-group-id="3153096308-5">)</span><span class="w"> </span><span class="k" data-group-id="3153096308-6">do</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="p" data-group-id="3153096308-7">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">height</span><span class="p" data-group-id="3153096308-7">}</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="3153096308-6">else</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="ss">:error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="p" data-group-id="3153096308-8">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:wrong_data</span><span class="p" data-group-id="3153096308-8">}</span><span class="w">
</span><span class="gp unselectable">...&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">  </span><span class="c">_other_error</span><span class="w"> </span><span class="o">-&gt;</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="w">    </span><span class="ss">:unexpected_error</span><span class="w">
</span><span class="gp unselectable">...&gt; </span><span class="k" data-group-id="3153096308-6">end</span><span class="w">
</span><span class="p" data-group-id="3153096308-9">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="ss">:wrong_data</span><span class="p" data-group-id="3153096308-9">}</span></code></pre><p>The <code class="inline">else</code> block works like a <code class="inline">case</code> clause: it can have multiple clauses,
and the first match will be used. Variables bound inside <code class="inline">with</code> (such as
<code class="inline">width</code> in this example) are not available in the <code class="inline">else</code> block.</p><p>If an <code class="inline">else</code> block is used and there are no matching clauses, a <a href="WithClauseError.html"><code class="inline">WithClauseError</code></a>
exception is raised.</p>
  </section>
</section>

          </div>
        </section>

      <footer class="footer">
        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.24.1) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
