<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.30.9">
    <meta name="project" content="xmerl v1.3.33">


    <title>xmerl — xmerl v1.3.33</title>
    <link rel="stylesheet" href="dist/html-erlang-QW5RMTQD.css" />


    <script src="dist/handlebars.runtime-NWIB6V2M.js"></script>
    <script src="dist/handlebars.templates-43PMFBC7.js"></script>
    <script src="dist/sidebar_items-4ED40A24.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/html-LRUIU55G.js"></script>

<style>.dark img { background-color: white; }</style>
  </head>
  <body data-type="extras" class="page-extra">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar" aria-controls="sidebar">
  <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
</button>

<nav id="sidebar" class="sidebar">

  <div class="sidebar-header">
    <div class="sidebar-projectInfo">

        <a href="api-reference.html" class="sidebar-projectImage">
          <img src="assets/logo.png" alt="xmerl" />
        </a>

      <div>
        <a href="api-reference.html" class="sidebar-projectName" translate="no">
xmerl
        </a>
        <div class="sidebar-projectVersion" translate="no">
          v1.3.33
        </div>
      </div>
    </div>
    <ul id="sidebar-listNav" class="sidebar-listNav" role="tablist">
      <li>
        <button id="extras-list-tab-button" role="tab" data-type="extras" aria-controls="extras-tab-panel" aria-selected="true" tabindex="0">
Pages
        </button>
      </li>

        <li>
          <button id="modules-list-tab-button" role="tab" data-type="modules" aria-controls="modules-tab-panel" aria-selected="false" tabindex="-1">
            Modules
          </button>
        </li>


    </ul>
  </div>

  <div id="extras-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="extras-list-tab-button">
    <ul id="extras-full-list" class="full-list"></ul>
  </div>

    <div id="modules-tab-panel" class="sidebar-tabpanel" role="tabpanel" aria-labelledby="modules-list-tab-button" hidden>
      <ul id="modules-full-list" class="full-list"></ul>
    </div>


</nav>

<main class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">
      <div class="top-search">
        <div class="search-settings">
          <form class="search-bar" action="search.html">
            <label class="search-label">
              <span class="sr-only">Search documentation of xmerl</span>
              <input name="q" type="text" class="search-input" placeholder="Search Documentation (press /)" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" />
            </label>
            <button type="submit" class="search-button" aria-label="Submit Search">
              <i class="ri-search-2-line ri-lg" aria-hidden="true" title="Submit search"></i>
            </button>
            <button type="button" tabindex="-1" class="search-close-button" aria-hidden="true">
              <i class="ri-close-line ri-lg" title="Cancel search"></i>
            </button>
          </form>
          <button class="icon-settings display-settings">
            <i class="ri-settings-3-line"></i>
            <span class="sr-only">Settings</span>
          </button>
        </div>
      </div>
      <div class="autocomplete">
        <div class="autocomplete-results">
        </div>
      </div>

<h1>

    <a href="https://github.com/erlang/otp/blob/master/lib/xmerl/doc/guides/xmerl_ug.md#L1" title="View Source" class="icon-action" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>


  <span>xmerl</span>
</h1>

<h2 id="introduction" class="section-heading">
  <a href="#introduction" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Introduction</span>
</h2>
<h3 id="features" class="section-heading">
  <a href="#features" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Features</span>
</h3>
<p>The <em>xmerl</em> XML parser is able to parse XML documents according to the XML 1.0
standard. As default it performs well-formed parsing, (syntax checks and checks
of well-formed constraints). Optionally one can also use xmerl as a validating
parser, (validate according to referenced DTD and validating constraints). By
means of for example the xmerl_xs module it is possible to transform the parsed
result to other formats, e.g. text, HTML, XML etc.</p><h3 id="overview" class="section-heading">
  <a href="#overview" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Overview</span>
</h3>
<p>This document does not give an introduction to XML. There are a lot of books
available that describe XML from different views. At the
<a href="http://www.w3.org">www.W3.org</a> site you will find the
<a href="http://www.w3.org/TR/REC-xml/">XML 1.0 specification</a> and other related specs.
One site were you can find tutorials on XML and related specs is
<a href="http://www.zvon.org">ZVON.org</a>.</p><p>However, here you will find some examples of how to use and to what you can use
xmerl. A detailed description of the user interface can be found in the
reference manual.</p><p>There are two known shortcomings in xmerl:</p><ul><li>It cannot retrieve external entities on the Internet by a URL reference, only
resources in the local file system.</li><li>xmerl can parse Unicode encoded data. But, it fails on tag names, attribute
names and other mark-up names that are encoded Unicode characters not mapping
on ASCII.</li></ul><p>By parsing an XML document you will get a record, displaying the structure of
the document, as return value. The record also holds the data of the document.
xmerl is convenient to use in for instance the following scenarios:</p><p>You need to retrieve data from XML documents. Your Erlang software can handle
information from the XML document by extracting data from the data structure
received by parsing.</p><p>It is also possible to do further processing of parsed XML with xmerl. If you
want to change format of the XML document to for instance HTML, text or other
XML format you can transform it. There is support for such transformations in
xmerl.</p><p>One may also convert arbitrary data to XML. So it for instance is easy to make
it readable by humans. In this case you first create xmerl data structures out
of your data, then transform it to XML.</p><p>You can find examples of these three examples of usage below.</p><h2 id="xmerl-user-interface-data-structure" class="section-heading">
  <a href="#xmerl-user-interface-data-structure" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">xmerl User Interface Data Structure</span>
</h2>
<p>The following records used by xmerl to save the parsed data are defined in
<code class="inline">xmerl.hrl</code></p><p>The result of a successful parsing is a tuple <code class="inline">{DataStructure,M}</code>. <code class="inline">M</code> is the
XML production Misc, which is the mark-up that comes after the element of the
document. It is returned &quot;as is&quot;. <code class="inline">DataStructure</code> is an <code class="inline">xmlElement</code> record,
that among others have the fields <code class="inline">name</code>, <code class="inline">parents</code>, <code class="inline">attributes</code> and <code class="inline">content</code>
like:</p><pre><code class="text">#xmlElement{name=Name,
            ...
            parents=Parents,
            ...
            attributes=Attrs,
            content=Content,
            ...}</code></pre><p>The name of the element is found in the <code class="inline">name</code> field. In the <code class="inline">parents</code> field is
the names of the parent elements saved. Parents is a list of tuples where the
first element in each tuple is the name of the parent element. The list is in
reverse order.</p><p>The record <code class="inline">xmlAttribute</code> holds the name and value of an attribute in the fields
<code class="inline">name</code> and <code class="inline">value</code>. All attributes of an element is a list of xmlAttribute in
the field <code class="inline">attributes</code> of the xmlElement record.</p><p>The <code class="inline">content</code> field of the top element is a list of records that shows the
structure and data of the document. If it is a simple document like:</p><pre><code class="text">&lt;?xml version=&quot;1.0&quot;?&gt;
&lt;dog&gt;
Grand Danois
&lt;/dog&gt;</code></pre><p>The parse result will be:</p><pre><code class="text">#xmlElement{name = dog,
            ...
            parents = [],
            ...
            attributes = [],
            content = [{xmlText,[{dog,1}],1,[],&quot;\
Grand Danois\
&quot;,text}],
            ...
            }</code></pre><p>Where the content of the top element is:
<code class="inline">[{xmlText,[{dog,1}],1,[],&quot;\ Grand Danois\ &quot;,text}]</code>. Text will be returned in
<code class="inline">xmlText</code> records. Though, usually documents are more complex, and the content
of the top element will in that case be a nested structure with xmlElement
records that in turn may have complex content. All of this reflects the
structure of the XML document.</p><p>Space characters between mark-up as <code class="inline">space</code>, <code class="inline">tab</code> and <code class="inline">line feed</code> are
normalized and returned as xmlText records.</p><h3 id="errors" class="section-heading">
  <a href="#errors" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Errors</span>
</h3>
<p>An unsuccessful parse results in an error, which may be a tuple <code class="inline">{error,Reason}</code>
or an exit: <code class="inline">{'EXIT',Reason}</code>. According to the XML 1.0 standard there are
<code class="inline">fatal error</code> and <code class="inline">error</code> situations. The fatal errors <em>must</em> be detected by a
conforming parser while an error <em>may</em> be detected. Both categories of errors
are reported as fatal errors by this version of xmerl, most often as an exit.</p><h2 id="getting-started" class="section-heading">
  <a href="#getting-started" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Getting Started</span>
</h2>
<p>In the following examples we use the XML file &quot;motorcycles.xml&quot; and the
corresponding DTD &quot;motorcycles.dtd&quot;. motorcycles.xml looks like:<a href="" id="motorcyclesxml"></a></p><pre><code class="text">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;!DOCTYPE motorcycles SYSTEM &quot;motorcycles.dtd&quot;&gt;
&lt;motorcycles&gt;
  &lt;bike year=&quot;2000&quot; color=&quot;black&quot;&gt;
    &lt;name&gt;
      &lt;manufacturer&gt;Suzuki&lt;/manufacturer&gt;
      &lt;brandName&gt;Suzuki VL 1500&lt;/brandName&gt;
      &lt;additionalName&gt;Intruder&lt;/additionalName&gt;
    &lt;/name&gt;
    &lt;engine&gt;V-engine, 2-cylinders, 1500 cc&lt;/engine&gt;
    &lt;kind&gt;custom&lt;/kind&gt;
    &lt;drive&gt;cardan&lt;/drive&gt;
    &lt;accessories&gt;Sissy bar, luggage carrier,V&amp;amp;H exhaust pipes&lt;/accessories&gt;
  &lt;/bike&gt;
  &lt;date&gt;2004.08.25&lt;/date&gt;
  &lt;bike year=&quot;1983&quot; color=&quot;read pearl&quot;&gt;
    &lt;name&gt;
      &lt;manufacturer&gt;Yamaha&lt;/manufacturer&gt;
      &lt;brandName&gt;XJ 400&lt;/brandName&gt;
    &lt;/name&gt;
    &lt;engine&gt;4 cylinder, 400 cc&lt;/engine&gt;
    &lt;kind&gt;alround&lt;/kind&gt;
    &lt;drive&gt;chain&lt;/drive&gt;
    &lt;comment&gt;Good shape!&lt;/comment&gt;
  &lt;/bike&gt;
&lt;/motorcycles&gt;</code></pre><p>and motorcycles.dtd looks like:</p><pre><code class="text">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;!ELEMENT motorcycles (bike,date?)+ &gt;
&lt;!ELEMENT bike        (name,engine,kind,drive, accessories?,comment?) &gt;
&lt;!ELEMENT name        (manufacturer,brandName,additionalName?) &gt;
&lt;!ELEMENT manufacturer       (#PCDATA)&gt;
&lt;!ELEMENT brandName         (#PCDATA)&gt;
&lt;!ELEMENT additionalName    (#PCDATA)&gt;
&lt;!ELEMENT engine             (#PCDATA)&gt;
&lt;!ELEMENT kind               (#PCDATA)&gt;
&lt;!ELEMENT drive              (#PCDATA)&gt;
&lt;!ELEMENT comment            (#PCDATA)&gt;
&lt;!ELEMENT accessories        (#PCDATA)&gt;

&lt;!-- Date of the format yyyy.mm.dd --&gt;
&lt;!ELEMENT date              (#PCDATA)&gt;
&lt;!ATTLIST  bike year NMTOKEN #REQUIRED
                color NMTOKENS #REQUIRED
                condition (useless | bad | serviceable | moderate | good |
                           excellent | new | outstanding) &quot;excellent&quot; &gt;</code></pre><p>If you want to parse the XML file motorcycles.xml you run it in the Erlang shell
like:</p><pre><code class="text">3&gt; {ParsResult,Misc}=xmerl_scan:file(&quot;motorcycles.xml&quot;).
{{xmlElement,motorcycles,
             motorcycles,
             [],
             {xmlNamespace,[],[]},
             [],
             1,
             [],
             [{xmlText,[{motorcycles,1}],1,[],&quot;\
  &quot;,text},
              {xmlElement,bike,
                          bike,
                          [],
                          {xmlNamespace,[],[]},
                          [{motorcycles,1}],
                          2,
                          [{xmlAttribute,year,[],[],[],[]|...},
                           {xmlAttribute,color,[],[],[]|...}],
                          [{xmlText,[{bike,2},{motorcycles|...}],
                                    1,
                                    []|...},
                           {xmlElement,name,name,[]|...},
                           {xmlText,[{...}|...],3|...},
                           {xmlElement,engine|...},
                           {xmlText|...},
                           {...}|...],
                          [],
                          &quot;.&quot;,
                          undeclared},
              ...
              ],
             [],
             &quot;.&quot;,
             undeclared},
 []}
4&gt;</code></pre><p>If you instead receives the XML doc as a string you can parse it by
<a href="xmerl_scan.html#string/1"><code class="inline">xmerl_scan:string/1</code></a>. Both file/2 and string/2 exists where the second argument
is a list of options to the parser, see the <a href="xmerl_scan.html">reference manual</a>.</p><h2 id="example-extracting-data-from-xml-content" class="section-heading">
  <a href="#example-extracting-data-from-xml-content" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Example: Extracting Data From XML Content</span>
</h2>
<p>In this example consider the situation where you want to examine a particular
data in the XML file. For instance, you want to check for how long each
motorcycle have been recorded.</p><p>Take a look at the DTD and observe that the structure of an XML document that is
conformant to this DTD must have one motorcycles element (the root element). The
motorcycles element must have at least one bike element. After each bike element
it may be a date element. The content of the date element is #PCDATA (Parsed
Character DATA), i.e. raw text. Observe that if #PCDATA must have a <code class="inline">&quot;&lt;&quot;</code> or a
<code class="inline">&quot;&amp;&quot;</code> character it must be written as <code class="inline">&quot;&amp;lt;&quot;</code> and <code class="inline">&quot;&amp;amp;&quot;</code> respectively. Also
other character entities exists similar to the ones in HTML and SGML.</p><p>If you successfully parse the XML file with the validation on as in:
<code class="inline">xmerl_scan:file('motorcycles.xml',[{validation,true}])</code> you know that the XML
document is valid and has the structure according to the DTD.</p><p>Thus, knowing the allowed structure it is easy to write a program that traverses
the data structure and picks the information in the xmlElements records with
name date.</p><p>Observe that white space: each space, tab or line feed, between mark-up results
in an xmlText record.</p><h2 id="example-create-xml-out-of-arbitrary-data" class="section-heading">
  <a href="#example-create-xml-out-of-arbitrary-data" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Example: Create XML Out Of Arbitrary Data</span>
</h2>
<p>For this task there are more than one way to go. The &quot;brute force&quot; method is to
create the records you need and feed your data in the content and attribute
fields of the appropriate element.</p><p>There is support for this in xmerl by the &quot;simple-form&quot; format. You can put your
data in a simple-form data structure and feed it into
<code class="inline">xmerl:export_simple(Content,Callback,RootAttributes)</code>. Content may be a mixture
of simple-form and xmerl records as xmlElement and xmlText.</p><p>The Types are:</p><ul><li>Content = [Element]</li><li>Callback = atom()</li><li>RootAttributes = [Attributes]</li></ul><p>Element is any of:</p><ul><li>{Tag, Attributes, Content}</li><li>{Tag, Content}</li><li>Tag</li><li>IOString</li><li>#xmlText{}</li><li>#xmlElement{}</li><li>#xmlPI{}</li><li>#xmlComment{}</li><li>#xmlDecl{}</li></ul><p>The simple-form structure is any of <code class="inline">{Tag, Attributes, Content}</code>,
<code class="inline">{Tag, Content}</code> or <code class="inline">Tag</code> where:</p><ul><li>Tag = atom()</li><li>Attributes = [{Name, Value}| #xmlAttribute{}]</li><li>Name = atom()</li><li><p>Value = IOString | atom() | integer()</p></li></ul><p>See also reference manual for <a href="xmerl.html#export_simple-3">xmerl</a></p><p>If you want to add the information about a black Harley Davidsson 1200 cc
Sportster motorcycle from 2003 that is in shape as new in the motorcycles.xml
document you can put the data in a simple-form data structure like:</p><pre><code class="text">Data =
  {bike,
     [{year,&quot;2003&quot;},{color,&quot;black&quot;},{condition,&quot;new&quot;}],
     [{name,
         [{manufacturer,[&quot;Harley Davidsson&quot;]},
          {brandName,[&quot;XL1200C&quot;]},
          {additionalName,[&quot;Sportster&quot;]}]},
      {engine,
         [&quot;V-engine, 2-cylinders, 1200 cc&quot;]},
      {kind,[&quot;custom&quot;]},
      {drive,[&quot;belt&quot;]}]}</code></pre><p>In order to append this data to the end of the motorcycles.xml document you have
to parse the file and add Data to the end of the root element content.</p><pre><code class="text">    {RootEl,Misc}=xmerl_scan:file('motorcycles.xml'),
    #xmlElement{content=Content} = RootEl,
    NewContent=Content++lists:flatten([Data]),
    NewRootEl=RootEl#xmlElement{content=NewContent},</code></pre><p>Then you can run it through the export_simple/2 function:</p><pre><code class="text">    {ok,IOF}=file:open('new_motorcycles.xml',[write]),
    Export=xmerl:export_simple([NewRootEl],xmerl_xml),
    io:format(IOF,&quot;~s~n&quot;,[lists:flatten(Export)]),</code></pre><p><a href="" id="new_motorcyclesxml"></a> The result would be:</p><pre><code class="text">
&lt;?xml version=&quot;1.0&quot;?&gt;&lt;motorcycles&gt;
  &lt;bike year=&quot;2000&quot; color=&quot;black&quot;&gt;
    &lt;name&gt;
      &lt;manufacturer&gt;Suzuki&lt;/manufacturer&gt;
      &lt;brandName&gt;Suzuki VL 1500&lt;/brandName&gt;
      &lt;additionalName&gt;Intruder&lt;/additionalName&gt;
    &lt;/name&gt;
    &lt;engine&gt;V-engine, 2-cylinders, 1500 cc&lt;/engine&gt;
    &lt;kind&gt;custom&lt;/kind&gt;
    &lt;drive&gt;cardan&lt;/drive&gt;
    &lt;accessories&gt;Sissy bar, luggage carrier,V&amp;amp;H exhaust pipes&lt;/accessories&gt;
  &lt;/bike&gt;
  &lt;date&gt;2004.08.25&lt;/date&gt;
  &lt;bike year=&quot;1983&quot; color=&quot;read pearl&quot;&gt;
    &lt;name&gt;
      &lt;manufacturer&gt;Yamaha&lt;/manufacturer&gt;
      &lt;brandName&gt;XJ 400&lt;/brandName&gt;
    &lt;/name&gt;
    &lt;engine&gt;4 cylinder, 400 cc&lt;/engine&gt;
    &lt;kind&gt;alround&lt;/kind&gt;
    &lt;drive&gt;chain&lt;/drive&gt;
    &lt;comment&gt;Good shape!&lt;/comment&gt;
  &lt;/bike&gt;
&lt;bike year=&quot;2003&quot; color=&quot;black&quot; condition=&quot;new&quot;&gt;&lt;name&gt;&lt;manufacturer&gt;Harley Davidsson&lt;/manufacturer&gt;&lt;brandName&gt;XL1200C&lt;/brandName&gt;&lt;additionalName&gt;Sportster&lt;/additionalName&gt;&lt;/name&gt;&lt;engine&gt;V-engine, 2-cylinders, 1200 cc&lt;/engine&gt;&lt;kind&gt;custom&lt;/kind&gt;&lt;drive&gt;belt&lt;/drive&gt;&lt;/bike&gt;&lt;/motorcycles&gt;</code></pre><p>If it is important to get similar indentation and newlines as in the original
document you have to add #xmlText{} records with space and newline values in
appropriate places. It may also be necessary to keep the original prolog where
the DTD is referenced. If so, it is possible to pass a RootAttribute
<code class="inline">{prolog,Value}</code> to <code class="inline">export_simple/3</code>. The following example code fixes those
changes in the previous example:</p><pre><code class="text">    Data =
      [#xmlText{value=&quot;  &quot;},
       {bike,[{year,&quot;2003&quot;},{color,&quot;black&quot;},{condition,&quot;new&quot;}],
             [#xmlText{value=&quot;\
    &quot;},
              {name,[#xmlText{value=&quot;\
      &quot;},
                     {manufacturer,[&quot;Harley Davidsson&quot;]},
                     #xmlText{value=&quot;\
      &quot;},
                     {brandName,[&quot;XL1200C&quot;]},
                     #xmlText{value=&quot;\
      &quot;},
                     {additionalName,[&quot;Sportster&quot;]},
                     #xmlText{value=&quot;\
    &quot;}]},
              {engine,[&quot;V-engine, 2-cylinders, 1200 cc&quot;]},
              #xmlText{value=&quot;\
    &quot;},
              {kind,[&quot;custom&quot;]},
              #xmlText{value=&quot;\
    &quot;},
              {drive,[&quot;belt&quot;]},
              #xmlText{value=&quot;\
  &quot;}]},
       #xmlText{value=&quot;\
&quot;}],
    ...
    NewContent=Content++lists:flatten([Data]),
    NewRootEl=RootEl#xmlElement{content=NewContent},
    ...
    Prolog = [&quot;&lt;?xml version=\\&quot;1.0\\&quot; encoding=\\&quot;utf-8\\&quot; ?&gt;
&lt;!DOCTYPE motorcycles SYSTEM \\&quot;motorcycles.dtd\\&quot;&gt;\
&quot;],
    Export=xmerl:export_simple([NewRootEl],xmerl_xml,[{prolog,Prolog}]),
    ...</code></pre><p>The result will be:</p><pre><code class="text">
&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot; ?&gt;
&lt;!DOCTYPE motorcycles SYSTEM &quot;motorcycles.dtd&quot;&gt;
&lt;motorcycles&gt;
  &lt;bike year=&quot;2000&quot; color=&quot;black&quot;&gt;
    &lt;name&gt;
      &lt;manufacturer&gt;Suzuki&lt;/manufacturer&gt;
      &lt;brandName&gt;Suzuki VL 1500&lt;/brandName&gt;
      &lt;additionalName&gt;Intruder&lt;/additionalName&gt;
    &lt;/name&gt;
    &lt;engine&gt;V-engine, 2-cylinders, 1500 cc&lt;/engine&gt;
    &lt;kind&gt;custom&lt;/kind&gt;
    &lt;drive&gt;cardan&lt;/drive&gt;
    &lt;accessories&gt;Sissy bar, luggage carrier,V&amp;amp;H exhaust pipes&lt;/accessories&gt;
  &lt;/bike&gt;
  &lt;date&gt;2004.08.25&lt;/date&gt;
  &lt;bike year=&quot;1983&quot; color=&quot;read pearl&quot;&gt;
    &lt;name&gt;
      &lt;manufacturer&gt;Yamaha&lt;/manufacturer&gt;
      &lt;brandName&gt;XJ 400&lt;/brandName&gt;
    &lt;/name&gt;
    &lt;engine&gt;4 cylinder, 400 cc&lt;/engine&gt;
    &lt;kind&gt;alround&lt;/kind&gt;
    &lt;drive&gt;chain&lt;/drive&gt;
    &lt;comment&gt;Good shape!&lt;/comment&gt;
  &lt;/bike&gt;
  &lt;bike year=&quot;2003&quot; color=&quot;black&quot; condition=&quot;new&quot;&gt;
    &lt;name&gt;
      &lt;manufacturer&gt;Harley Davidsson&lt;/manufacturer&gt;
      &lt;brandName&gt;XL1200C&lt;/brandName&gt;
      &lt;additionalName&gt;Sportster&lt;/additionalName&gt;
    &lt;/name&gt;&lt;engine&gt;V-engine, 2-cylinders, 1200 cc&lt;/engine&gt;
    &lt;kind&gt;custom&lt;/kind&gt;
    &lt;drive&gt;belt&lt;/drive&gt;
  &lt;/bike&gt;
&lt;/motorcycles&gt;</code></pre><h2 id="example-transforming-xml-to-html" class="section-heading">
  <a href="#example-transforming-xml-to-html" class="hover-link">
    <i class="ri-link-m" aria-hidden="true"></i>
  </a>
  <span class="text">Example: Transforming XML To HTML</span>
</h2>
<p>Assume that you want to transform the
<a href="xmerl_ug.html#motorcyclesxml">motorcycles.xml</a> document to HTML. If you want the
same structure and tags of the resulting HTML document as of the XML document
then you can use the <a href="xmerl.html#export/2"><code class="inline">xmerl:export/2</code></a> function. The following:</p><pre><code class="text">2&gt; {Doc,Misc}=xmerl_scan:file('motorcycles.xml').
{{xmlElement,motorcycles,
             motorcycles,
             [],
             {xmlNamespace,[],[]},
             [],
             1,
             [],
             [{xmlText,[{motorcycles,1}],1,[],&quot;\
  &quot;,text},
              {xmlElement,bike,
...
3&gt; DocHtml=xmerl:export([Doc],xmerl_html).
[&quot;&lt;!DOCTYPE HTML PUBLIC \\&quot;&quot;,
 &quot;-//W3C//DTD HTML 4.01 Transitional//EN&quot;,
 &quot;\\&quot;&quot;,
 [],
 &quot;&gt;\
&quot;,
 [[[&quot;&lt;&quot;,&quot;motorcycles&quot;,&quot;&gt;&quot;],
   [&quot;\
  &quot;,
    [[&quot;&lt;&quot;,
      &quot;bike&quot;,
      [[&quot; &quot;,&quot;year&quot;,&quot;=\\&quot;&quot;,&quot;2000&quot;,&quot;\\&quot;&quot;],[&quot; &quot;,&quot;color&quot;,&quot;=\\&quot;&quot;,&quot;black&quot;,&quot;\\&quot;&quot;]],
      &quot;&gt;&quot;],
...</code></pre><p>Will give the result <a href="result_export.html">result_export.html</a></p><p>Perhaps you want to do something more arranged for human reading. Suppose that
you want to list all different brands in the beginning with links to each group
of motorcycles. You also want all motorcycles sorted by brand, then some flashy
colors on top of it. Thus you rearrange the order of the elements and put in
arbitrary HTML tags. This is possible to do by means of the
<a href="http://www.w3.org/Style/XSL/">XSL Transformation (XSLT)</a> like functionality in
xmerl.</p><p>Even though the following example shows one way to transform data from XML to
HTML it also applies to transformations to other formats.</p><p><code class="inline">xmerl_xs</code> does not implement the entire XSLT specification but the basic
functionality. For all details see the <a href="xmerl_xs.html">reference manual</a></p><p>First, some words about the xmerl_xs functionality:</p><p>You need to write template functions to be able to control what kind of output
you want. Thus if you want to encapsulate a <code class="inline">bike</code> element in &lt;p&gt; tags you
simply write a function:</p><pre><code class="text">template(E = #xmlElement{name='bike'}) -&gt;
    [&quot;&lt;p&gt;&quot;,xslapply(fun template/1,E),&quot;&lt;/p&gt;&quot;];</code></pre><p>With <code class="inline">xslapply</code> you tell the XSLT processor in which order it should traverse
the XML structure. By default it goes in preorder traversal, but with the
following we make a deliberate choice to break that order:</p><pre><code class="text">template(E = #xmlElement{name='bike'}) -&gt;
    [&quot;&lt;p&gt;&quot;,xslapply(fun template/1,select(&quot;bike/name/manufacturer&quot;)),&quot;&lt;/p&gt;&quot;];</code></pre><p>If you want to output the content of an XML element or an attribute you will get
the value as a string by the <code class="inline">value_of</code> function:</p><pre><code class="text">template(E = #xmlElement{name='motorcycles'}) -&gt;
    [&quot;&lt;p&gt;&quot;,value_of(select(&quot;bike/name/manufacturer&quot;,E),&quot;&lt;/p&gt;&quot;];</code></pre><p>In the xmerl_xs functions you can provide a select(String) call, which is an
<a href="http://www.w3.org/TR/xpath">XPath</a> functionality. For more details see the
xmerl_xs <a href="xmerl_xs_examples.html">tutorial</a>.</p><p>Now, back to the example where we wanted to make the output more arranged. With
the template:</p><pre><code class="text">template(E = #xmlElement{name='motorcycles'}) -&gt;
    [    &quot;&lt;head&gt;\
&lt;title&gt;motorcycles&lt;/title&gt;\
&lt;/head&gt;\
&quot;,
         &quot;&lt;body&gt;\
&quot;,
\011 &quot;&lt;h1&gt;Used Motorcycles&lt;/h1&gt;\
&quot;,
\011 &quot;&lt;ul&gt;\
&quot;,
\011 remove_duplicates(value_of(select(&quot;bike/name/manufacturer&quot;,E))),
\011 &quot;\
&lt;/ul&gt;\
&quot;,
\011 sort_by_manufacturer(xslapply(fun template/1, E)),
         &quot;&lt;/body&gt;\
&quot;,
\011 &quot;&lt;/html&gt;\
&quot;];</code></pre><p>We match on the top element and embed the inner parts in an HTML body. Then we
extract the string values of all motorcycle brands, sort them and removes
duplicates by
<code class="inline">remove_duplicates(value_of(select(&quot;bike/name/manufacturer&quot;, E)))</code>. We also
process the substructure of the top element and pass it to a function that sorts
all motorcycle information by brand according to the task formulation in the
beginning of this example.</p><p>The next template matches on the <code class="inline">bike</code> element:</p><pre><code class="text">template(E = #xmlElement{name='bike'}) -&gt;
    {value_of(select(&quot;name/manufacturer&quot;,E)),[&quot;&lt;dt&gt;&quot;,xslapply(fun template/1,select(&quot;name&quot;,E)),&quot;&lt;/dt&gt;&quot;,
    &quot;&lt;dd&gt;&lt;ul&gt;\
&quot;,
    &quot;&lt;li style=&quot;color:green&quot;&gt;Manufacturing year: &quot;,xslapply(fun template/1,select(&quot;@year&quot;,E)),&quot;&lt;/li&gt;\
&quot;,
    &quot;&lt;li style=&quot;color:red&quot;&gt;Color: &quot;,xslapply(fun template/1,select(&quot;@color&quot;,E)),&quot;&lt;/li&gt;\
&quot;,
    &quot;&lt;li style=&quot;color:blue&quot;&gt;Shape : &quot;,xslapply(fun template/1,select(&quot;@condition&quot;,E)),&quot;&lt;/li&gt;\
&quot;,
    &quot;&lt;/ul&gt;&lt;/dd&gt;\
&quot;]};</code></pre><p>This creates a tuple with the brand of the motorcycle and the output format. We
use the brand name only for sorting purpose. We have to end the template
function with the &quot;built in clause&quot;
<code class="inline">template(E) -&gt; built_in_rules(fun template/1, E).</code></p><p>The entire program is motorcycles2html.erl:</p><pre><code class="makeup erlang" translate="no"><span class="w">
</span><span class="c1">%%%-------------------------------------------------------------------</span><span class="w">
</span><span class="c1">%%% File    : motorcycles2html.erl</span><span class="w">
</span><span class="c1">%%% Author  : Bertil Karlsson &lt;bertil@localhost.localdomain&gt;</span><span class="w">
</span><span class="c1">%%% Description :</span><span class="w">
</span><span class="c1">%%%</span><span class="w">
</span><span class="c1">%%% Created :  2 Sep 2004 by Bertil Karlsson &lt;bertil@localhost.localdomain&gt;</span><span class="w">
</span><span class="c1">%%%-------------------------------------------------------------------</span><span class="w">
</span><span class="p">-</span><span class="na">module</span><span class="p" data-group-id="4170800316-1">(</span><span class="ss">motorcycles2html</span><span class="p" data-group-id="4170800316-1">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">include_lib</span><span class="p" data-group-id="4170800316-2">(</span><span class="s">&quot;xmerl/include/xmerl.hrl&quot;</span><span class="p" data-group-id="4170800316-2">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">import</span><span class="p" data-group-id="4170800316-3">(</span><span class="ss">xmerl_xs</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="p" data-group-id="4170800316-4">[</span><span class="w"> </span><span class="ss">xslapply</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">value_of</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="ss">select</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="ss">built_in_rules</span><span class="p">/</span><span class="mi">2</span><span class="w"> </span><span class="p" data-group-id="4170800316-4">]</span><span class="p" data-group-id="4170800316-3">)</span><span class="p">.</span><span class="w">
</span><span class="w">
</span><span class="p">-</span><span class="na">export</span><span class="p" data-group-id="4170800316-5">(</span><span class="p" data-group-id="4170800316-6">[</span><span class="ss">process_xml</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="ss">process_to_file</span><span class="p">/</span><span class="mi">2</span><span class="p">,</span><span class="ss">process_to_file</span><span class="p">/</span><span class="mi">1</span><span class="p" data-group-id="4170800316-6">]</span><span class="p" data-group-id="4170800316-5">)</span><span class="p">.</span><span class="w">

</span><span class="nf">process_xml</span><span class="p" data-group-id="4170800316-7">(</span><span class="n">Doc</span><span class="p" data-group-id="4170800316-7">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">template</span><span class="p" data-group-id="4170800316-8">(</span><span class="n">Doc</span><span class="p" data-group-id="4170800316-8">)</span><span class="p">.</span><span class="w">

</span><span class="nf">process_to_file</span><span class="p" data-group-id="4170800316-9">(</span><span class="n">FileName</span><span class="p" data-group-id="4170800316-9">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">process_to_file</span><span class="p" data-group-id="4170800316-10">(</span><span class="n">FileName</span><span class="p">,</span><span class="ss">&#39;motorcycles.xml&#39;</span><span class="p" data-group-id="4170800316-10">)</span><span class="p">.</span><span class="w">

</span><span class="nf">process_to_file</span><span class="p" data-group-id="4170800316-11">(</span><span class="n">FileName</span><span class="p">,</span><span class="n">XMLDoc</span><span class="p" data-group-id="4170800316-11">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nc">file</span><span class="p">:</span><span class="nf">open</span><span class="p" data-group-id="4170800316-12">(</span><span class="n">FileName</span><span class="p">,</span><span class="p" data-group-id="4170800316-13">[</span><span class="ss">write</span><span class="p" data-group-id="4170800316-13">]</span><span class="p" data-group-id="4170800316-12">)</span><span class="w"> </span><span class="k">of</span><span class="w">
</span><span class="err">	</span><span class="p" data-group-id="4170800316-14">{</span><span class="ss">ok</span><span class="p">,</span><span class="n">IOF</span><span class="p" data-group-id="4170800316-14">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
</span><span class="err">	</span><span class="w">    </span><span class="p" data-group-id="4170800316-15">{</span><span class="n">XMLContent</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="4170800316-15">}</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">xmerl_scan</span><span class="p">:</span><span class="nf">file</span><span class="p" data-group-id="4170800316-16">(</span><span class="n">XMLDoc</span><span class="p" data-group-id="4170800316-16">)</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="w">    </span><span class="n">TransformedXML</span><span class="o">=</span><span class="nf">process_xml</span><span class="p" data-group-id="4170800316-17">(</span><span class="n">XMLContent</span><span class="p" data-group-id="4170800316-17">)</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="w">    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="4170800316-18">(</span><span class="n">IOF</span><span class="p">,</span><span class="s">&quot;</span><span class="si">~s</span><span class="s">&quot;</span><span class="p">,</span><span class="p" data-group-id="4170800316-19">[</span><span class="n">TransformedXML</span><span class="p" data-group-id="4170800316-19">]</span><span class="p" data-group-id="4170800316-18">)</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="w">    </span><span class="nc">file</span><span class="p">:</span><span class="nf">close</span><span class="p" data-group-id="4170800316-20">(</span><span class="n">IOF</span><span class="p" data-group-id="4170800316-20">)</span><span class="p">;</span><span class="w">
</span><span class="err">	</span><span class="p" data-group-id="4170800316-21">{</span><span class="ss">error</span><span class="p">,</span><span class="n">Reason</span><span class="p" data-group-id="4170800316-21">}</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
</span><span class="err">	</span><span class="w">    </span><span class="nc">io</span><span class="p">:</span><span class="nf">format</span><span class="p" data-group-id="4170800316-22">(</span><span class="s">&quot;could not open file due to </span><span class="si">~p</span><span class="s">.</span><span class="si">~n</span><span class="s">&quot;</span><span class="p">,</span><span class="p" data-group-id="4170800316-23">[</span><span class="n">Reason</span><span class="p" data-group-id="4170800316-23">]</span><span class="p" data-group-id="4170800316-22">)</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span><span class="w">

</span><span class="c1">%%% templates</span><span class="w">
</span><span class="nf">template</span><span class="p" data-group-id="4170800316-24">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="4170800316-25">{</span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;motorcycles&#39;</span><span class="p" data-group-id="4170800316-25">}</span><span class="p" data-group-id="4170800316-24">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="4170800316-26">[</span><span class="w">    </span><span class="s">&quot;&lt;head&gt;\n&lt;title&gt;motorcycles&lt;/title&gt;\n&lt;/head&gt;\n&quot;</span><span class="p">,</span><span class="w">
         </span><span class="s">&quot;&lt;body&gt;\n&quot;</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="w"> </span><span class="s">&quot;&lt;h1&gt;Used Motorcycles&lt;/h1&gt;\n&quot;</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="w"> </span><span class="s">&quot;&lt;ul&gt;\n&quot;</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="w"> </span><span class="nf">remove_duplicates</span><span class="p" data-group-id="4170800316-27">(</span><span class="nf">value_of</span><span class="p" data-group-id="4170800316-28">(</span><span class="nf">select</span><span class="p" data-group-id="4170800316-29">(</span><span class="s">&quot;bike/name/manufacturer&quot;</span><span class="p">,</span><span class="n">E</span><span class="p" data-group-id="4170800316-29">)</span><span class="p" data-group-id="4170800316-28">)</span><span class="p" data-group-id="4170800316-27">)</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="w"> </span><span class="s">&quot;\n&lt;/ul&gt;\n&quot;</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="w"> </span><span class="nf">sort_by_manufacturer</span><span class="p" data-group-id="4170800316-30">(</span><span class="nf">xslapply</span><span class="p" data-group-id="4170800316-31">(</span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="4170800316-31">)</span><span class="p" data-group-id="4170800316-30">)</span><span class="p">,</span><span class="w">
         </span><span class="s">&quot;&lt;/body&gt;\n&quot;</span><span class="p">,</span><span class="w">
</span><span class="err">	</span><span class="w"> </span><span class="s">&quot;&lt;/html&gt;\n&quot;</span><span class="p" data-group-id="4170800316-26">]</span><span class="p">;</span><span class="w">
</span><span class="nf">template</span><span class="p" data-group-id="4170800316-32">(</span><span class="n">E</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">#</span><span class="ss">xmlElement</span><span class="p" data-group-id="4170800316-33">{</span><span class="ss">name</span><span class="o">=</span><span class="ss">&#39;bike&#39;</span><span class="p" data-group-id="4170800316-33">}</span><span class="p" data-group-id="4170800316-32">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="4170800316-34">{</span><span class="nf">value_of</span><span class="p" data-group-id="4170800316-35">(</span><span class="nf">select</span><span class="p" data-group-id="4170800316-36">(</span><span class="s">&quot;name/manufacturer&quot;</span><span class="p">,</span><span class="n">E</span><span class="p" data-group-id="4170800316-36">)</span><span class="p" data-group-id="4170800316-35">)</span><span class="p">,</span><span class="p" data-group-id="4170800316-37">[</span><span class="s">&quot;&lt;dt&gt;&quot;</span><span class="p">,</span><span class="nf">xslapply</span><span class="p" data-group-id="4170800316-38">(</span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="nf">select</span><span class="p" data-group-id="4170800316-39">(</span><span class="s">&quot;name&quot;</span><span class="p">,</span><span class="n">E</span><span class="p" data-group-id="4170800316-39">)</span><span class="p" data-group-id="4170800316-38">)</span><span class="p">,</span><span class="s">&quot;&lt;/dt&gt;&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;&lt;dd&gt;&lt;ul&gt;\n&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;&lt;li style=\&quot;color:green\&quot;&gt;Manufacturing year: &quot;</span><span class="p">,</span><span class="nf">xslapply</span><span class="p" data-group-id="4170800316-40">(</span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="nf">select</span><span class="p" data-group-id="4170800316-41">(</span><span class="s">&quot;@year&quot;</span><span class="p">,</span><span class="n">E</span><span class="p" data-group-id="4170800316-41">)</span><span class="p" data-group-id="4170800316-40">)</span><span class="p">,</span><span class="s">&quot;&lt;/li&gt;\n&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;&lt;li style=\&quot;color:red\&quot;&gt;Color: &quot;</span><span class="p">,</span><span class="nf">xslapply</span><span class="p" data-group-id="4170800316-42">(</span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="nf">select</span><span class="p" data-group-id="4170800316-43">(</span><span class="s">&quot;@color&quot;</span><span class="p">,</span><span class="n">E</span><span class="p" data-group-id="4170800316-43">)</span><span class="p" data-group-id="4170800316-42">)</span><span class="p">,</span><span class="s">&quot;&lt;/li&gt;\n&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;&lt;li style=\&quot;color:blue\&quot;&gt;Shape : &quot;</span><span class="p">,</span><span class="nf">xslapply</span><span class="p" data-group-id="4170800316-44">(</span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="nf">select</span><span class="p" data-group-id="4170800316-45">(</span><span class="s">&quot;@condition&quot;</span><span class="p">,</span><span class="n">E</span><span class="p" data-group-id="4170800316-45">)</span><span class="p" data-group-id="4170800316-44">)</span><span class="p">,</span><span class="s">&quot;&lt;/li&gt;\n&quot;</span><span class="p">,</span><span class="w">
    </span><span class="s">&quot;&lt;/ul&gt;&lt;/dd&gt;\n&quot;</span><span class="p" data-group-id="4170800316-37">]</span><span class="p" data-group-id="4170800316-34">}</span><span class="p">;</span><span class="w">
</span><span class="nf">template</span><span class="p" data-group-id="4170800316-46">(</span><span class="n">E</span><span class="p" data-group-id="4170800316-46">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="nf">built_in_rules</span><span class="p" data-group-id="4170800316-47">(</span><span class="k">fun</span><span class="w"> </span><span class="ss">template</span><span class="p">/</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="n">E</span><span class="p" data-group-id="4170800316-47">)</span><span class="p">.</span><span class="w">


</span><span class="c1">%%%%%%%%%%% helper routines</span><span class="w">

</span><span class="c1">%% sorts on the bike name element, unwraps the bike information and</span><span class="w">
</span><span class="c1">%% inserts a line feed and indentation on each bike element.</span><span class="w">
</span><span class="nf">sort_by_manufacturer</span><span class="p" data-group-id="4170800316-48">(</span><span class="n">L</span><span class="p" data-group-id="4170800316-48">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="n">Tuples</span><span class="o">=</span><span class="p" data-group-id="4170800316-49">[</span><span class="n">X1</span><span class="p">||</span><span class="n">X1</span><span class="o">=</span><span class="p" data-group-id="4170800316-50">{</span><span class="p">_</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="4170800316-50">}</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">L</span><span class="p" data-group-id="4170800316-49">]</span><span class="p">,</span><span class="w">
    </span><span class="n">SortedTS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">keysort</span><span class="p" data-group-id="4170800316-51">(</span><span class="mi">1</span><span class="p">,</span><span class="n">Tuples</span><span class="p" data-group-id="4170800316-51">)</span><span class="p">,</span><span class="w">
    </span><span class="n">InsertRefName_UnWrap</span><span class="o">=</span><span class="w">
</span><span class="err">	</span><span class="nf">fun</span><span class="p" data-group-id="4170800316-52">(</span><span class="p" data-group-id="4170800316-53">[</span><span class="p" data-group-id="4170800316-54">{</span><span class="p" data-group-id="4170800316-55">[</span><span class="n">Name</span><span class="p" data-group-id="4170800316-55">]</span><span class="p">,</span><span class="n">V</span><span class="p" data-group-id="4170800316-54">}</span><span class="p">|</span><span class="n">Rest</span><span class="p" data-group-id="4170800316-53">]</span><span class="p">,</span><span class="n">Name</span><span class="p">,</span><span class="n">F</span><span class="p" data-group-id="4170800316-52">)</span><span class="p">-&gt;</span><span class="w">
</span><span class="err">	</span><span class="err">	</span><span class="p" data-group-id="4170800316-56">[</span><span class="n">V</span><span class="p">|</span><span class="n">F</span><span class="p" data-group-id="4170800316-57">(</span><span class="n">Rest</span><span class="p">,</span><span class="n">Name</span><span class="p">,</span><span class="n">F</span><span class="p" data-group-id="4170800316-57">)</span><span class="p" data-group-id="4170800316-56">]</span><span class="p">;</span><span class="w">
</span><span class="err">	</span><span class="w">   </span><span class="p" data-group-id="4170800316-58">(</span><span class="p" data-group-id="4170800316-59">[</span><span class="p" data-group-id="4170800316-60">{</span><span class="p" data-group-id="4170800316-61">[</span><span class="n">Name</span><span class="p" data-group-id="4170800316-61">]</span><span class="p">,</span><span class="n">V</span><span class="p" data-group-id="4170800316-60">}</span><span class="p">|</span><span class="n">Rest</span><span class="p" data-group-id="4170800316-59">]</span><span class="p">,</span><span class="p">_</span><span class="n">PreviousName</span><span class="p">,</span><span class="n">F</span><span class="p" data-group-id="4170800316-58">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
</span><span class="err">	</span><span class="err">	</span><span class="p" data-group-id="4170800316-62">[</span><span class="p" data-group-id="4170800316-63">[</span><span class="s">&quot;&lt;a name=\&quot;&quot;</span><span class="p">,</span><span class="n">Name</span><span class="p">,</span><span class="s">&quot;\&quot;&gt;&lt;/&gt;&quot;</span><span class="p" data-group-id="4170800316-63">]</span><span class="p">,</span><span class="n">V</span><span class="p">|</span><span class="n">F</span><span class="p" data-group-id="4170800316-64">(</span><span class="n">Rest</span><span class="p">,</span><span class="n">Name</span><span class="p">,</span><span class="n">F</span><span class="p" data-group-id="4170800316-64">)</span><span class="p" data-group-id="4170800316-62">]</span><span class="p">;</span><span class="w">
</span><span class="err">	</span><span class="w">   </span><span class="p" data-group-id="4170800316-65">(</span><span class="p" data-group-id="4170800316-66">[</span><span class="p" data-group-id="4170800316-66">]</span><span class="p">,</span><span class="p">_</span><span class="p">,</span><span class="p">_</span><span class="p" data-group-id="4170800316-65">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="4170800316-67">[</span><span class="p" data-group-id="4170800316-67">]</span><span class="w">
</span><span class="err">	</span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="n">SortedRefed</span><span class="o">=</span><span class="n">InsertRefName_UnWrap</span><span class="p" data-group-id="4170800316-68">(</span><span class="n">SortedTS</span><span class="p">,</span><span class="ss">no_name</span><span class="p">,</span><span class="n">InsertRefName_UnWrap</span><span class="p" data-group-id="4170800316-68">)</span><span class="p">,</span><span class="w">
</span><span class="c1">%    SortedTs=[Y||{X,Y}&lt;-lists:keysort(1,Tuples)],</span><span class="w">
    </span><span class="n">WS</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;\n    &quot;</span><span class="p">,</span><span class="w">
    </span><span class="n">Fun</span><span class="o">=</span><span class="nf">fun</span><span class="p" data-group-id="4170800316-69">(</span><span class="p" data-group-id="4170800316-70">[</span><span class="n">H</span><span class="p">|</span><span class="n">T</span><span class="p" data-group-id="4170800316-70">]</span><span class="p">,</span><span class="n">Acc</span><span class="p">,</span><span class="n">F</span><span class="p" data-group-id="4170800316-69">)</span><span class="p">-&gt;</span><span class="w">
</span><span class="err">	</span><span class="err">	</span><span class="n">F</span><span class="p" data-group-id="4170800316-71">(</span><span class="n">T</span><span class="p">,</span><span class="p" data-group-id="4170800316-72">[</span><span class="n">H</span><span class="p">,</span><span class="n">WS</span><span class="p">|</span><span class="n">Acc</span><span class="p" data-group-id="4170800316-72">]</span><span class="p">,</span><span class="n">F</span><span class="p" data-group-id="4170800316-71">)</span><span class="p">;</span><span class="w">
</span><span class="err">	</span><span class="w">   </span><span class="p" data-group-id="4170800316-73">(</span><span class="p" data-group-id="4170800316-74">[</span><span class="p" data-group-id="4170800316-74">]</span><span class="p">,</span><span class="n">Acc</span><span class="p">,</span><span class="p">_</span><span class="n">F</span><span class="p" data-group-id="4170800316-73">)</span><span class="p">-&gt;</span><span class="w">
</span><span class="err">	</span><span class="err">	</span><span class="nc">lists</span><span class="p">:</span><span class="nf">reverse</span><span class="p" data-group-id="4170800316-75">(</span><span class="p" data-group-id="4170800316-76">[</span><span class="n">WS</span><span class="p">|</span><span class="n">Acc</span><span class="p" data-group-id="4170800316-76">]</span><span class="p" data-group-id="4170800316-75">)</span><span class="w">
</span><span class="err">	</span><span class="k">end</span><span class="p">,</span><span class="w">
    </span><span class="k">if</span><span class="w"> </span><span class="nf">length</span><span class="p" data-group-id="4170800316-77">(</span><span class="n">SortedRefed</span><span class="p" data-group-id="4170800316-77">)</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
</span><span class="err">	</span><span class="w">    </span><span class="n">Fun</span><span class="p" data-group-id="4170800316-78">(</span><span class="n">SortedRefed</span><span class="p">,</span><span class="p" data-group-id="4170800316-79">[</span><span class="p" data-group-id="4170800316-79">]</span><span class="p">,</span><span class="n">Fun</span><span class="p" data-group-id="4170800316-78">)</span><span class="p">;</span><span class="w">
       </span><span class="ss">true</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="4170800316-80">[</span><span class="p" data-group-id="4170800316-80">]</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span><span class="w">


</span><span class="c1">%% removes all but the first of an element in L and inserts a html</span><span class="w">
</span><span class="c1">%% reference for each list element.</span><span class="w">
</span><span class="nf">remove_duplicates</span><span class="p" data-group-id="4170800316-81">(</span><span class="n">L</span><span class="p" data-group-id="4170800316-81">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">remove_duplicates</span><span class="p" data-group-id="4170800316-82">(</span><span class="n">L</span><span class="p">,</span><span class="p" data-group-id="4170800316-83">[</span><span class="p" data-group-id="4170800316-83">]</span><span class="p" data-group-id="4170800316-82">)</span><span class="p">.</span><span class="w">

</span><span class="nf">remove_duplicates</span><span class="p" data-group-id="4170800316-84">(</span><span class="p" data-group-id="4170800316-85">[</span><span class="p" data-group-id="4170800316-85">]</span><span class="p">,</span><span class="n">Acc</span><span class="p" data-group-id="4170800316-84">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="nf">make_ref</span><span class="p" data-group-id="4170800316-86">(</span><span class="nc">lists</span><span class="p">:</span><span class="nf">sort</span><span class="p" data-group-id="4170800316-87">(</span><span class="nc">lists</span><span class="p">:</span><span class="nf">reverse</span><span class="p" data-group-id="4170800316-88">(</span><span class="n">Acc</span><span class="p" data-group-id="4170800316-88">)</span><span class="p" data-group-id="4170800316-87">)</span><span class="p" data-group-id="4170800316-86">)</span><span class="p">;</span><span class="w">
</span><span class="nf">remove_duplicates</span><span class="p" data-group-id="4170800316-89">(</span><span class="p" data-group-id="4170800316-90">[</span><span class="n">A</span><span class="p">|</span><span class="n">L</span><span class="p" data-group-id="4170800316-90">]</span><span class="p">,</span><span class="n">Acc</span><span class="p" data-group-id="4170800316-89">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="k">case</span><span class="w"> </span><span class="nc">lists</span><span class="p">:</span><span class="nf">delete</span><span class="p" data-group-id="4170800316-91">(</span><span class="n">A</span><span class="p">,</span><span class="n">L</span><span class="p" data-group-id="4170800316-91">)</span><span class="w"> </span><span class="k">of</span><span class="w">
</span><span class="err">	</span><span class="n">L</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
</span><span class="err">	</span><span class="w">    </span><span class="nf">remove_duplicates</span><span class="p" data-group-id="4170800316-92">(</span><span class="n">L</span><span class="p">,</span><span class="p" data-group-id="4170800316-93">[</span><span class="n">A</span><span class="p">|</span><span class="n">Acc</span><span class="p" data-group-id="4170800316-93">]</span><span class="p" data-group-id="4170800316-92">)</span><span class="p">;</span><span class="w">
</span><span class="err">	</span><span class="n">L1</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
</span><span class="err">	</span><span class="w">    </span><span class="nf">remove_duplicates</span><span class="p" data-group-id="4170800316-94">(</span><span class="p" data-group-id="4170800316-95">[</span><span class="n">A</span><span class="p">|</span><span class="n">L1</span><span class="p" data-group-id="4170800316-95">]</span><span class="p">,</span><span class="p" data-group-id="4170800316-96">[</span><span class="n">Acc</span><span class="p" data-group-id="4170800316-96">]</span><span class="p" data-group-id="4170800316-94">)</span><span class="w">
    </span><span class="k">end</span><span class="p">.</span><span class="w">

</span><span class="nf">make_ref</span><span class="p" data-group-id="4170800316-97">(</span><span class="p" data-group-id="4170800316-98">[</span><span class="p" data-group-id="4170800316-98">]</span><span class="p" data-group-id="4170800316-97">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w"> </span><span class="p" data-group-id="4170800316-99">[</span><span class="p" data-group-id="4170800316-99">]</span><span class="p">;</span><span class="w">
</span><span class="nf">make_ref</span><span class="p" data-group-id="4170800316-100">(</span><span class="p" data-group-id="4170800316-101">[</span><span class="n">H</span><span class="p" data-group-id="4170800316-101">]</span><span class="p" data-group-id="4170800316-100">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nf">is_atom</span><span class="p" data-group-id="4170800316-102">(</span><span class="n">H</span><span class="p" data-group-id="4170800316-102">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="s">&quot;&lt;ul&gt;&lt;a href=\&quot;#&quot;</span><span class="o">++</span><span class="nf">atom_to_list</span><span class="p" data-group-id="4170800316-103">(</span><span class="n">H</span><span class="p" data-group-id="4170800316-103">)</span><span class="o">++</span><span class="s">&quot;\&quot;&gt;&quot;</span><span class="o">++</span><span class="nf">atom_to_list</span><span class="p" data-group-id="4170800316-104">(</span><span class="n">H</span><span class="p" data-group-id="4170800316-104">)</span><span class="o">++</span><span class="s">&quot;&lt;/a&gt;&lt;/ul&gt;&quot;</span><span class="p">;</span><span class="w">
</span><span class="nf">make_ref</span><span class="p" data-group-id="4170800316-105">(</span><span class="p" data-group-id="4170800316-106">[</span><span class="n">H</span><span class="p" data-group-id="4170800316-106">]</span><span class="p" data-group-id="4170800316-105">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nf">is_list</span><span class="p" data-group-id="4170800316-107">(</span><span class="n">H</span><span class="p" data-group-id="4170800316-107">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="s">&quot;&lt;ul&gt;&lt;a href=\&quot;#&quot;</span><span class="o">++</span><span class="n">H</span><span class="o">++</span><span class="s">&quot;\&quot;&gt;\s&quot;</span><span class="o">++</span><span class="n">H</span><span class="o">++</span><span class="s">&quot;&lt;/a&gt;&lt;/ul&gt;&quot;</span><span class="p">;</span><span class="w">
</span><span class="nf">make_ref</span><span class="p" data-group-id="4170800316-108">(</span><span class="p" data-group-id="4170800316-109">[</span><span class="n">H</span><span class="p">|</span><span class="n">T</span><span class="p" data-group-id="4170800316-109">]</span><span class="p" data-group-id="4170800316-108">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nf">is_atom</span><span class="p" data-group-id="4170800316-110">(</span><span class="n">H</span><span class="p" data-group-id="4170800316-110">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="4170800316-111">[</span><span class="s">&quot;&lt;ul&gt;&lt;a href=\&quot;#&quot;</span><span class="o">++</span><span class="nf">atom_to_list</span><span class="p" data-group-id="4170800316-112">(</span><span class="n">H</span><span class="p" data-group-id="4170800316-112">)</span><span class="o">++</span><span class="s">&quot;\&quot;&gt;\s&quot;</span><span class="o">++</span><span class="nf">atom_to_list</span><span class="p" data-group-id="4170800316-113">(</span><span class="n">H</span><span class="p" data-group-id="4170800316-113">)</span><span class="o">++</span><span class="s">&quot;,\n&lt;/a&gt;&lt;/ul&gt;&quot;</span><span class="w">
     </span><span class="p">|</span><span class="nf">make_ref</span><span class="p" data-group-id="4170800316-114">(</span><span class="n">T</span><span class="p" data-group-id="4170800316-114">)</span><span class="p" data-group-id="4170800316-111">]</span><span class="p">;</span><span class="w">
</span><span class="nf">make_ref</span><span class="p" data-group-id="4170800316-115">(</span><span class="p" data-group-id="4170800316-116">[</span><span class="n">H</span><span class="p">|</span><span class="n">T</span><span class="p" data-group-id="4170800316-116">]</span><span class="p" data-group-id="4170800316-115">)</span><span class="w"> </span><span class="k">when</span><span class="w"> </span><span class="nf">is_list</span><span class="p" data-group-id="4170800316-117">(</span><span class="n">H</span><span class="p" data-group-id="4170800316-117">)</span><span class="w"> </span><span class="p">-&gt;</span><span class="w">
    </span><span class="p" data-group-id="4170800316-118">[</span><span class="s">&quot;&lt;ul&gt;&lt;a href=\&quot;#&quot;</span><span class="o">++</span><span class="n">H</span><span class="o">++</span><span class="s">&quot;\&quot;&gt;\s&quot;</span><span class="o">++</span><span class="n">H</span><span class="o">++</span><span class="s">&quot;,\n&lt;/a&gt;&lt;/ul&gt;&quot;</span><span class="p">|</span><span class="nf">make_ref</span><span class="p" data-group-id="4170800316-119">(</span><span class="n">T</span><span class="p" data-group-id="4170800316-119">)</span><span class="p" data-group-id="4170800316-118">]</span><span class="p">.</span></code></pre><p>If we run it like this:
<code class="inline">motorcycles2html:process_to_file('result_xs.html', 'motorcycles2.xml').</code> The
result will be <a href="result_xs.html">result_xs.html</a>. When the input file is of the
same structure as the previous &quot;motorcycles&quot; XML files but it has a little more
'bike' elements and the 'manufacturer' elements are not in order.</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="notes.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
Xmerl Release Notes
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

  </div>
</div>
      <footer class="footer">
        <p>

          <span class="line">
            <button class="a-main footer-button display-quick-switch" title="Search HexDocs packages">
              Search HexDocs
            </button>

          </span>
        </p>

        <p class="built-using">
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.30.9) for the

            <a href="https://erlang.org" title="Erlang" target="_blank" translate="no">Erlang programming language</a>

        </p>
      </footer>
    </div>
  </div>
</main>
</div>


  </body>
</html>
